This article was downloaded by: [Georgia Tech Library]
On: 09 December 2014, At: 10:16
Publisher: Taylor & Francis
Informa Ltd Registered in England and Wales Registered Number: 1072954 Registered office: Mortimer
House, 37-41 Mortimer Street, London W1T 3JH, UK

International Journal of Geographical Information
Science
Publication details, including instructions for authors and subscription information:
http://www.tandfonline.com/loi/tgis20

The discrete dynamics of small-scale spatial events:
agent-based models of mobility in carnivals and
street parades
Michael Batty a , Jake Desyllas b & Elspeth Duxbury c
a Centre for Advanced Spatial Analysis , University College London , 1–19 Torrington
Place, London WC1E 6BT, UK E-mail:
b Intelligent Space Partnership , 81 Rivington Street, London EC2Y 8BN, UK E-mail:
c Bartlett School of Planning , University College London , 22 Gordon Street, London
WC1H 0QB, UK E-mail:
Published online: 19 May 2010.

To cite this article: Michael Batty , Jake Desyllas & Elspeth Duxbury (2003) The discrete dynamics of small-scale spatial
events: agent-based models of mobility in carnivals and street parades, International Journal of Geographical Information
Science, 17:7, 673-697, DOI: 10.1080/1365881031000135474

To link to this article:  http://dx.doi.org/10.1080/1365881031000135474

PLEASE SCROLL DOWN FOR ARTICLE

Taylor & Francis makes every effort to ensure the accuracy of all the information (the “Content”) contained
in the publications on our platform. However, Taylor & Francis, our agents, and our licensors make no
representations or warranties whatsoever as to the accuracy, completeness, or suitability for any purpose of
the Content. Any opinions and views expressed in this publication are the opinions and views of the authors,
and are not the views of or endorsed by Taylor & Francis. The accuracy of the Content should not be relied
upon and should be independently verified with primary sources of information. Taylor and Francis shall
not be liable for any losses, actions, claims, proceedings, demands, costs, expenses, damages, and other
liabilities whatsoever or howsoever caused arising directly or indirectly in connection with, in relation to or
arising out of the use of the Content.

This article may be used for research, teaching, and private study purposes. Any substantial or systematic
reproduction, redistribution, reselling, loan, sub-licensing, systematic supply, or distribution in any
form to anyone is expressly forbidden. Terms & Conditions of access and use can be found at http://
www.tandfonline.com/page/terms-and-conditions

. .   , 2003
. 17, . 7, 673–697

Research Article

The discrete dynamics of small-scale spatial events: agent-based
models of mobility in carnivals and street parades

MICHAEL BATTY
Centre for Advanced Spatial Analysis, University College London,
1–19 Torrington Place, London WC1E 6BT, UK
e-mail: mbatty@geog.ucl.ac.uk

JAKE DESYLLAS
Intelligent Space Partnership, 81 Rivington Street, London EC2Y 8BN, UK
e-mail: jdesyllas@intelligentspace.com

and ELSPETH DUXBURY
Bartlett School of Planning, University College London, 22 Gordon Street,
London WC1H 0QB, UK
e-mail: eduxbury@intelligentspace.com

(Received 7 August 2002; accepted 1 December 2002)

Abstract. Small-scale spatial events are situations in which elements or objects
vary in such a way that temporal dynamics are intrinsic to their representation
and explanation. Some of the clearest examples involve local movement, from
conventional traﬃc modeling to disaster evacuation where congestion, crowding,
panic, and related safety issues are key features. We propose that such events can
be simulated using new variants of pedestrian model, which embody ideas about
how behavior emerges from the accumulated interactions between small-scale
objects. We present a model in which the event space is ﬁrst explored by agents
using ‘swarm intelligence’. Armed with information about the space, agents then
move in unobstructed fashion to the event. Congestion and problems over safety
are then resolved through introducing controls in an iterative fashion, rerunning
the model until a ‘safe solution’ is reached. The model has been developed to
simulate the eﬀect of changing the route of the Notting Hill Carnival, an annual
event held in west central London over 2 days in August each year. One of the
key issues in using such simulation is how the process of modeling interacts with
those who manage and control the event. As such, this changes the nature of the
modeling problem from one where control and optimization is external to the
model to one where it is intrinsic to the simulation.

1.

Introduction: small-scale spatial events
Analysis at ever ﬁner geographical scales changes the emphasis from a concern
for understanding the structural arrangement of objects to ways in which those

All ﬁgures

in this paper are also reproduced in colour on the web site

http://www.casa.ucl.ac.uk/ijgis/

International Journal of Geographical Information Science
ISSN 1365-8816 print/ISSN 1362-3087 online © 2003 Taylor & Francis Ltd
http://www.tandf.co.uk/journals
DOI: 10.1080/1365881031000135474

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 674

M. Batty et al.

objects move to position themselves in time and space. This change in perspective
is occasioned by several factors. At ﬁner scales, we increasingly become part of the
scene as observers, identifying more closely with elements nearer to our everyday
experiences. This, in turn, changes the need to abstract and generalize. The law of
large numbers also breaks down when the phenomena cannot be classiﬁed into
categories from which general relationships can be inferred. But more importantly,
spaces observed at the ﬁnest scales cannot be viewed as being predominantly static.
What comes into focus is routine movement which keeps systems energized, alive if
you like, and as observers within the scene, our own actions are enough to change
the focus from statics to dynamics. The implications of this are important for
geographic information science. As we approach the human scale, relationships begin
to be articulated between objects rather than aggregates. Interactions between objects
suggest that ‘mobility’ as well as location becomes important. More routine processes
on ﬁner time scales are introduced and the focus changes to one where many system
elements can be directly observed in real-time.

Progress in developing science at this ﬁne scale has been immensely slow for
human systems. Systematic data has been absent while ways of deﬁning and manip-
ulating such objects mathematically have only emerged recently with the advent of
object-orientated representation and agent-based modeling. There has thus been very
little work on examining changes in, for example, urban form at these scales, despite
some extremely promising work on the ﬁne-grained socio-economic structure of
cities half a century or more ago (Rannells 1956). Perhaps the most obvious problems
at the local scale comprise one-oﬀ spatial events which involve the movement of
large numbers of people over short periods of time. These largely fall within the
sphere of entertainment although some of them relate to work, but all involve issues
of mobility and interaction between objects or agents which generate non-trivial
problems of planning, management, and control. Classic examples are football
matches, rock concerts, street parades, some kinds of shopping, the entry and exit
of large numbers of people from high capacity buildings and vehicles such as airports,
stations, subway trains, and high buildings. Recently disaster scenes involving evacu-
ation have become more signiﬁcant, especially following 9/11, where methods for
dispersing large concentrations of people are being explored. These types of events,
however, have tended to resist scientiﬁc inquiry, never being thought of as particularly
signiﬁcant in terms of their impact on spatial structure.

Much of this is now changing. A new momentum to develop geographical
information science at much smaller scales is coming from at least three directions.
First there are changes in data availability where ever smaller scales are being
observed, measured, and represented digitally. Sensing technology for detecting ﬁne-
scale geometries and textures as well as geodemographic data capture through
electronic transactions are driving acquisition and measurement at the small-scale.
The second source revolves around a sea change in the way systems are being
conceptualized. There is increasing recognition that systems must be understood
from the bottom-up as many systems function and maintain their structure in this
manner. The way local actions generate emergent structures with order at higher
levels is important to many functioning spatial systems such as traﬃc in networks,
the development of edge cities, and residential segregation (Johnson 2001). The third
source is a consequence of our growing abilities to interact more globally than
hitherto. The movement of large numbers of people over short periods of time is an
ever growing feature of our cities, and the spatial problems that these movements
generate are increasingly important.

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

675

We ﬁrst discuss dynamics of small-scale events and ways in which these might
be observed and measured. Because such events are subject to considerable control,
we propose a two-stage structure in which control is gradually introduced into the
simulation. In the ﬁrst stage, we explore the eﬀect of geometry on movement and
develop an algorithm based on ‘swarm intelligence’. This generates hierarchies of
shortest path and surfaces of attraction relating the location of events to points at
which agents enter the event. In the second stage, agents—visitors/walkers/pedes-
trians—are launched from the entry points and climb the attraction surface to reach
the event. An initial assessment of crowding is then made and, if necessary, controls
introduced manually to reduce congestion. The model is re-run through this second
stage and this process continues until a ‘safe solution’ is reached.

We then discuss model calibration. This model, like many, only touches our
knowledge of the event in terms of the limited data available. Data requirements are
enormous, always less than optimal, quite unlike aggregate modeling where parsi-
mony is key. We use the model to simulate the eﬀect of changing the route of the
parade in the Notting Hill Carnival, an annual event held over two days in August
each year in a 3.5 km2 area of west central London. This event attracts over 1 million
visitors and is widely regarded as posing a major problem of public safety. Our
simulations continually reference problems of safety and we ﬁnally indicate how the
model can be used to change routes and introduce controls which reduce crowding
to acceptable levels. Our focus is not however on applications per se but on introdu-
cing a generic class of models that might be generalized to a variety of small-scale
spatial events based on dynamics which involve local movement.

2. Observing and understanding local dynamics

Spatial models at any scale imply interactions based on movements of people,
goods, ideas, between two or more locations which are usually classiﬁed as origins
and/or destinations. These movements cover processes operating over diﬀerent time
scales at diﬀerent speeds, from slow (in years) to fast (in minutes and seconds). At
interactions occur over diﬀerent sized areas, each implying a
the human scale,
diﬀerent dynamics, purpose, and goal. Where interactions take place in very small
spaces of the order of tens of square metres, the dynamics of movement are dominated
by density considerations such as crowding, whereas over wider areas of hundreds
of square metres or even tens of square kilometres, movement is more likely to be
characterized by cost and purpose. What complicates the dynamics of the small-
scale are events based on diﬀerent individual movements which switch from one
purpose and/or scale to another. In our example, we will deal with movements in
conﬁned spaces such as subway stations, along streets where density and crowding
are less important, and at ﬁxed attractions where density once again becomes
important.

Although the events we will simulate exist from ﬁxed origins to destinations like
the journey to work, they are quite unlike such work trips in being much more
protracted in duration, with greater freedom of movement in time and space. While
attractions are assumed to be the main foci for such movement, multiple other
purposes can intervene and compete, such as shopping, eating, and so on. There is
also the somewhat mystical property of large crowds being formed with their own
momentum which binds them together and drives their movement. Such character-
istics are hard to identify and model although such herding instincts due to identity
of purpose—‘crowd fever’ so-to-speak—are important. The morphology of such

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 676

M. Batty et al.

events has barely been examined to date. There is little descriptive material on which
good models of these dynamics might be built, and the interpretations that do exist
are not found within mainstream geographical, urban, or architectural analysis.
There is a useful classiﬁcation from Canetti (1962) while there is a persistent line of
research in psychology from LeBon (1905). Much of this, however, relates to what
Isaac Newton once described as the ‘madness of crowds’, dealing as much with
speculation and gambling as with physical concentrations.

Canetti (1962) describes such events as being highly focused on single points of
attraction which are spatially associated with agglomerations of individuals. The
crowds we deal with here form slowly with minimal diversions, but because of
competing attractions, there is continual circulation within the highest density places
as individuals move to experience adjacent attractions. It is possible, too, that crowds
can grow to sizes and densities which are out of control. Fear and panic can set in
as crowds attempt to disperse if densities become too high and safety is compromised.
Crowds form at points of ingress and egress where they are channeled into and out
of high-capacity containers like buses, subway trains, and buildings. In short, there
is an implicit morphology of crowds which likens them to organically growing and
changing phenomena but there are few attempts at describing the dynamics and the
transformations that take place as crowds form and dissipate. In this context, our
events are considerably calmer than crowds at football matches or in Japanese
subway trains. Canetti (1962) describes the kind of crowd that we are dealing with
here when he says: ‘There is a ... type of slow crowd which can better be compared
with a network of streams. It starts with small rivulets gradually running together.
Into the stream thus formed other steams ﬂow, and these, if enough land lies ahead,
will in time become a river whose goal is the sea. The pilgrimage to Mecca is perhaps
the most impressive example of this slow crowd’ (page 40).

We shall see that this picture is close to the way the crowds form in our
applications here. It is directly reﬂected in the dynamics captured within the model
but depends on the way we deﬁne the objects that make up the event. It is worth
thinking of these as mobile agents which move within a geometric landscape, streets
in the urban case. Most models of pedestrian movement are now being developed
in this way but here our agents are not simply the walkers who are visitors at the
event. The attractions themselves may be treated as ‘agents’, some ﬁxed such as
concert venues but others mobile like parades. The geometry of the landscape, the
streets, as well as barriers, police who control access, and the whole range of
emergency services can be modeled as ‘mobile agents’. This suggests that many
diﬀerent types of interaction such as that between the physical landscape and users
of that landscape, can be represented as agent interaction where the cells that actually
deﬁne the landscape geometry may themselves be considered as agents (Box 2001).
Such characterization is similar to that used in particle physics where the concept
of the ‘active walker’—a particle (agent) that both changes and is changed by its
environment (landscape)—has become popular (Schweitzer 1997).

A critical issue involves the diﬃculties in observing this kind of system in suﬃcient
detail. Strictly speaking, with models composed of individuals, there should be data
on the decision-making events associated with each individual throughout the time
periods and across the space associated with each decision event. What is usually
possible is good data on the density of crowds but not on paths taken by individuals.
Good path data from closed circuit TV or even from laser scanning is fundamentally
limited (at present) due to privacy considerations. The best data that have been

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

677

collected to date are for the most conﬁned spaces where crowding at sports events
and in subway stations is under scrutiny. Over wider areas, this has always been
problematic and the fact that the best examples are not contemporary indicates a
recurrent and lasting dilemma posed by the observation problem (Pushkarev and
Zupan 1975). This lack of path and interaction data actually inﬂuences the kind of
models that can be built. Similar problems exist in eliciting preferences which cannot
be observed but only inferred through actions. Agent-based models must therefore
be designed to account for such omissions.

3. The control of spatial events

Simulation usually follows the conventional cycle of mathematical modeling: data
assembly, representation, and analysis is prior to model speciﬁcation and testing,
and prediction is usually only attempted when a good enough ﬁt of the model to
reality has been achieved. The ﬁnal stage of the cycle involves using the model for
optimization where model outputs are managed or designed to achieve certain targets
or goals. This process works well where models are aggregate and parsimonious,
where data is adequate and where it is assumed that plans or designs required to
control/manage the future system are absent from the way the system has evolved
in the past. With small-scale spatial events, these assumptions are no longer tenable
for many of the events of interest cannot be separated from explicit controls. Often
these controls are passive, being part of the wider environment, but some are active
in a way that makes them critical to simulation and calibration. For example, as
crowds at sporting events get bigger and denser, safety standards come into force
through police control of crowd behavior. In the case of crowds which are not
policed directly, constraints on the design of physical infrastructure act in a passive
way to control behavior.

In short, we cannot build models of spatial events where we assume that data is
collected ﬁrst, the model calibrated, and then if appropriate, used for prediction,
thence design and control. What this implies is that our model must integrate all
these stages from data assembly to prescription and control and that the process of
calibration is contingent on the entire sequence. It is easiest to illustrate this with
the example used. We have some data on where people originate and where they
are destined for but we do not have data on their spatial preferences or on the paths
that they actually take, connecting up their origins to destinations. Thus the ﬁrst
stage of the model is to generate paths that are consistent with normal walking
behavior. The problem is one of simulating the missing data but in such a way that
the most likely behavioral pattern emerges. However, the event we will be modeling
is also highly controlled by the police who channel crowds by closing streets and
erecting barriers as well as positioning attractions. These controls are known, so we
could model the actual situation with these in place. However, as the purpose of this
model is to ‘redesign’ these controls, then what we actually do is begin our simulation
with no controls at all. We assess the situation ﬁrst in the absence of control, then
gradually introduce controls to a level which meets the goals of safety associated
with local movement. This means that the calibration must thus be structured around
the whole cycle. When it comes to testing diﬀerent controls, the entire cycle must be
run again, for new controls imply diﬀerent data patterns.

There is a further twist to this circularity. The controls themselves cannot be
divorced from the event itself, indeed they deﬁne the event, and these are also
generated from the bottom-up. Moreover, these controls cannot be easily modeled

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 678

M. Batty et al.

without the interventions of those who design them. The most appropriate way to
design and operate this kind of model is to provide an interface to those who actually
control the real event and to use their expertise in running the model through its
various stages. In the ﬁrst stage in which data is being assembled, such stakeholder
involvement is not required but in the second stage where ‘virtual agents’ are
simulated under diﬀerent controlled conditions, the way these controls are introduced
is best accomplished by the ‘real agents’—the police and related authorities—who
design these in the ﬁrst place. As the process of calibration loops around this entire
sequence, this breaks the model into stages where diﬀerent kinds of expertise are
required, further complicating the way it needs to be executed.

Before we explain the class of agent-based models that we consider suited to
these types of problem, it is worth brieﬂy noting alternative and complementary
approaches. In fact there is a disjunction in the ﬁeld of pedestrian or walker modeling
between models which emphasize density and crowding and those that focus on the
way walkers move from origins to destinations. These approaches are not mutually
exclusive, they may be complementary but they do not deal with the same kinds of
walking phenomena. The former apply to conﬁned spaces while the latter to much
larger areas; the former are designed for issues of safety and evacuation which involve
channel capacity for movement while the latter are for predicting aggregate volumes
where locational capacity is more signiﬁcant. Yet all these models incorporate self-
organization through push-pull eﬀects which occur when individuals form crowds
through herding, and when individuals seek to escape from crowds due to panic.

Helbing (1991) and his colleagues have developed a whole series of models which
are built around social forces, which relate variously to ideas from ﬂuid ﬂow, particle
systems, and ﬂocking (Helbing et al. 1997). Similar approaches have been developed
by Still (2001), and Hoogendoorn et al. (2001). Several reviews exist (Helbing 2001).
In contrast there are models being developed by Blue and Adler (2001) for more
constrained route systems using cellular automata akin to those developed by Nagel
and Schreckenberg (1992) for vehicular traﬃc. These models are also being applied
at slightly larger scales by Dijkstra et al. (2002) and Burstedde et al. (2001). At
smaller scales for more ordered ﬂow schedules, queuing models have been adapted
but with limited success (Lovas 1994) while for building and urban spaces where
preferences associated with diﬀerent locations are key, event-based simulation has
been attempted (Baer 1974). At larger scales where movement on malls and even
entire neighborhoods is the focus, spatial choice and interaction models have been
applied (Borgers and Timmermans 1986).

There have never been enough applications to generalize this ﬁeld into distinct
types, for there are elements of each approach in every other. For example, agent-
based models are now becoming popular at small scales ranging from town centers
(Haklay et al. 2001) to buildings but there is also the implication that such approaches
can be applied at much larger scales (Schweitzer 1998, Batty 2001). Our model
reﬂects diﬀerent aspects of all these approaches which we will pick up in its formal
development in the following sections. But as the ﬁeld develops from this somewhat
rudimentary level, models might be better classiﬁed according to the events that they
simulate rather than the formal mathematics that they employ.

4. Movement dynamics: a formal model

Our generic approach is best illustrated through the example of the Notting Hill
Carnival. This event is represented by several groups of agents which move at

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

679

diﬀerent speeds—fast, slow, and immobile. We deﬁne: walkers (W )—visitors who
interact with each other and the Carnival events in real time; paraders (P ) who move
in more routine fashion along the parade route, again in real time; bands (B) which
form the ﬁxed sound systems, are immobile but emit noise which decays exponentially
from source, thus attracting walkers; and physical objects which are streets (S),
reﬂecting building layout and street geometry which act as obstacles to movement
but are ‘movable’ in themselves. In fact, the parade and paraders, the bands, and the
street objects can all be ‘moved’ occasionally but infrequently, and it is these that
provide controls which can be manipulated to meet standards of public safety.

In table 1 we show these agents in terms of their mobility characteristics and
data requirements, while in ﬁgure 1 we graph their potential interactions. From these
interactions, it is very clear that the focus is on the walkers. These interact with each
other, forming crowds by ﬂocking, and then dispersing if congestion is too high.
They are directly aﬀected by paraders, street geometry, and sound systems. The
paraders and bands interact with themselves in a relatively passive way but not with
each other while the street geometry simply aﬀects the walkers. These interactions

Table 1. Varieties and characteristics of agent in the Notting Hill model.

Agent group

Agent type

Mobility level

Movability

Data sources

Walkers (W )

Visiting parade
Visiting bands
Visiting bands
and parades

Fast in real time Completely
Fast in real time ﬂexible
Fast in real time Completely

Origins and
destinations of
observed walkers,
Paths not known

Paraders (P ) Moving vehicles Fast but ﬁxed

Bands (B)

Streets (S)

route
Fixed

Fixed sound
systems
Physical objects/ Fixed
barriers

ﬂexible
Completely
ﬂexible
Movable in long Observed
term
Movable in long Observed
term
Movable in
medium term

Observed and
managed

Figure 1.

Interactions between agents. Also see http://www.casa.ucl.ac.uk/ijgis/ﬁgure1.htm

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 680

M. Batty et al.

types

these three walker

exist in real time but there are longer-term interactions between all agent types: ﬁrst
through changes to the street geometry aﬀecting parades and bands (the broken arcs
with no arrows in ﬁgure 1), and second in the much longer term when the parade
route and the band locations are themselves changed (the broken arcs with arrows).
Table 1 also makes clear that at least three kinds of walkers exist in the system:
those who interact solely with the bands, those who visit simply to see the parade,
and those who visit to engage with both. Although preference schedules are not
explicitly incorporated,
involve implicit behavioral
diﬀerences with respect to their attraction to the events that comprise the Carnival.
The spatial simulation is extremely straightforward. Walkers enter the Carnival
area and move through the street system to the various attractions. They interact
with each other, the parade, and the sound systems, and these interactions can cause
crowding which can violate safety limits. The paths they take from the points at
which they enter are deﬁned by the noise that they hear, and by feedback from other
walkers which leads to ‘ﬂocking’. When large crowds form at the various attractions,
they disperse if congestion exceeds certain thresholds. If they cannot disperse suﬃ-
ciently quickly, panic can set in and accidents occur. In terms of the simulation, the
paths that walkers take are unknown and must be generated and thus the ﬁrst stage
of the model involves generating this ‘missing data’. The hierarchies of shortest
routes and related accessibility surfaces which emerge are used in the second stage
to eﬀect the simulation of walkers from which patterns of crowding and public safety
levels can be evaluated. Controls designed to raise levels of safety are then systematic-
ally introduced, the two-stage model being reiterated until acceptable limits are
reached.

To generate the shortest routes, we can either begin with walkers at known
origins, the entry points, or with walkers at known destinations, attractions, searching
either for destinations from origins or vice versa. We will use an algorithm in which
walkers begin to search for the relevant locations randomly but as these are disco-
vered, others learn by watching where the successful walkers are moving to. This
kind of algorithm is based on a class of behaviors called ‘swarm intelligence’ (Kennedy
et al. 2001), based on intelligence amongst insects which is determined in a bottom-
up fashion through such learning. These techniques are ﬁnding wide applicability in
all kinds of routing problems from telecommunications to robot manipulation
(Bonabeau et al. 1999). In this application, we search for origins from ﬁxed destina-
tions, walkers moving out randomly from their starting points (their ultimate destina-
tions). Those closest to entry points (origins) will discover these ﬁrst and once this
occurs, they head back to the starting points which they remember. However, to
remind themselves of the path between their entry point and starting point, they lay
a trail. In analogy to the way ants react to the discovery of food sources, they drop
‘pheromone’. (Camazine et al. 2001). Other agents who have not yet discovered any
destination points see these trails, sensing the scent, leading them more and more
quickly to the various entry points. Once an agent has returned to the destination
after such a discovery, it begins again but this time reacting to the pheromone surface
where it exists. In this way, the hierarchy of routes is reinforced with the shortest
being the most heavily traﬃcked. This ﬁrst stage is illustrated as part of ﬁgure 2
opposite.

In the second stage, we use the information discovered at the ﬁrst to construct
appropriate accessibility surfaces for each class of walker. Essentially these surfaces
link origins (entry points) to destinations (Carnival events), walkers being launched

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

681

Figure 2. An outline of the two-stage model. The ﬁrst stage which is the ‘swarm’ algorithm,
is the initial
left-hand sequence, while the second stage simulation of crowding
is the right-hand sequence. Note how controls (‘Change Street Agents’) are gradually
introduced through reiterating both stages of
the entire sequence. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure2.htm

from entry points and ‘climbing’ these surfaces to reach the attractions. The walkers
interact with each other through watching where others walk, thus ‘following the
crowd.’ Walkers ﬂock to the parade routes and to the ﬁxed sound systems and in
doing so generate congestion which is resolved by dispersal. Flocking is positive
feedback and dispersal is negative. The interaction with the parade can lead to
conﬂict other than congestion, for as walkers try to cross the parade route, accidents
can occur. However, the greatest source of potential safety problems occurs when
crowds build up and are unable to disperse. Dispersal takes time and meanwhile
ﬂocking continues, especially in areas where the street geometry is highly constrained.
Only when average distances travelled in each time period converge, are we able
to make a clear assessment of crowding. In short, we simulate the steady state at
the peak period during the Carnival, and to reach this point in time, we do not
simulate all walkers throughout the two-day period but build up the relevant number
from scratch just prior to the peak. Various measures are used to assess whether
public safety requirements have been breached, and if so, controls are introduced,
ﬁrst on the street system consisting of street closures and movable barriers which
constrain movement and densities. This is the point at which those stakeholders who
know the problem need to be involved with the model. Once we make such changes,
however, the shortest routes and related accessibility surfaces also change and these
must be recomputed so the entire sequence based on these two stages needs to be

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 682

M. Batty et al.

reiterated. Its essential logic is illustrated in ﬁgure 2 with the various loops terminat-
ing when an overall steady state has emerged. Along the way, we may have ascer-
tained that safety levels are too tight and that looser ones are possible or that safety
measures are too slack and new ones required. In the latter, we can initiate changes
to the location of the parade and sound systems, thus beginning to use the model
in traditional ‘what if ’ fashion as a means of testing alternative conﬁgurations of the
Carnival.

5. The mathematics of the simulation

it

it

the number of walkers, P

it
the number of bands, and S

All actions and interactions in the model take place in an event space composed
of N cells (square pixels) indexed i, j=1, 2, ..., N. The agent groups, walkers (W ),
paraders (P ), bands (B), and street objects (S) are always located with respect to
these cells at time t=1, 2, ..., T with W
the number of
paraders, B
the number of street objects, in each cell
it
i at time t. In the case of bands and street objects, these are ﬁxed in space and time
=1 or 0, that is
and only a single agent is associated with each cell. For bands, B
a band exists in a cell or does not, and the total number of bands is thus B=S
,
it
=1, this means that the street agent is signaling that a cell is
Y t. For streets, if S
=
available for a walker to move to, that there are no obstacles to movement; if S
0, obstacles such as barriers, buildings or street closures exist, and the cell is oﬀ-
limits to movement. The total number of cells available is S=S
, Y t, and thus
there are N9 =N−S cells which act as barriers or obstacles. The bands and street
objects are entirely passive and do not change within a single run of the model.
Street objects are however changed when control is being manipulated to meet safety
measures through the outer loop in ﬁgure 2. Band and parade locations are only
changed when diﬀerent routing scenarios are evaluated.

B

S

it

it

it

it

i

i

z=1

The three types of walker are composed of those whose motive is to visit the
parade (W 1), those who primarily visit the bands (W 2), and those who visit both
(W 3) with the total W =W 1+W 2+W 3=S3
W z. Each individual walker is deﬁned
by the binary variable W k
, set to 1 if a walker of type z is in cell i at time t, or 0
it
otherwise. A series of accounting relations deﬁnes densities in cells and totals in the
system at any one time, and the total number of walkers in each group W z is ﬁxed
over all
is
=S
W z
, and the total of type z in
W k
, the total in cell i W
k
it
zit
=S
, Y t. The same kinds of relations pertain to paraders
the system W z
S
k
t
, k=1, 2, ..., P which is equal to 1
except that there is only one type deﬁned as Pk
z
it
or 0 depending upon whether or not a parader occupies cell i at time t. The total
and the global total P
paraders in cell i is P

time periods. Then the total number of walkers of
=S
W k
zit

type z in i

W k
zit

=P, Y t.

W z
it

=S

S

S

=S

=S

S

it

z

z

z

z

k

z

i

The ﬁrst stage of the simulation is based on the swarm algorithm which is solely
based on walkers and does not involve paraders and bands other than their being
sources for random exploration of the street system. The walkers are launched from
these sources D at time t=1 where W
=S
. Walkers of each type
z can move from cell i to an adjacent cell j in each time period [t(cid:1)t+1] where
jµV
is the eight cell (Moore) neighborhood around i. In general, some of
these cells will not be accessible because of obstacles but if the street agent signals
=1, the agent is able to make a move. We will now call the
an empty cell, that is S
street agent S
, dropping t which does not change during the two-stage simulation,
and only changes when the entire cycle is reiterated if routes are changed. Movement
from i to j in search of an origin O is then determined by the relevant probability

W k
zD1

and V

=S

W z

D1

D1

S

jt

z

z

k

z

j

i

i

t

Pk
it

k

k

it

Pk
it

k

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

683

for type z as

l

i

S

=

(1)

S
j
tz
lt

pz
ijt+1

tz
it
∑
lµV
is the route accessibility to origins for agent type z, and this depends on the
tz
jt
destinations which act as the sources of each walker type. A move from i to j is
determined randomly according to the schedule of probabilities in (1). We also
compute a composite accessibility surface for all the walkers g
which in principle
could be walker type speciﬁc, but in practice is more useful as an index combining
the inﬂuences of all walkers. This is in contrast to tz
which, as we will see, is more
jt
=1 and
like a density of movement associated with the use of routes. Then if W k
zit
W k

=1, the accessibility surface to destinations is updated as
=g

zjt+1

+ ∑

jt+1

(2)

∑

(dk

)−b

g

jt+1

jt

zDjt+1

z

k

z

z

zDjt+1

is the distance of walker k

where dk
from D to cell j, and b is a tunable parameter
reﬂecting the friction of distance. In fact, this is also a ‘sound surface’ as the distance
decay through the power law implied in (2) can be considered as a proxy for the
decay of sounds from the attractor destinations. As we have implied earlier, in small
spaces, walkers are attracted to sounds and this is one way in which this feature can
enter the model, at least implicitly. The analogy should not be taken too far as we
have not attempted any analysis of sound decay with distance but this surface
is used to incorporate system-wide eﬀects on all walkers. Sound is one such
eﬀect. Finally at this point, the density of walkers at j can be computed as
W

jt+1
The process implied by (1) and (2) continues until a walker discovers an origin
, the walker switches from exploratory to discovery
and returns to the destination D with knowledge of the discovery. The

zjt+1
O. For each walker W k
mode W9 k
zjt+1
probability of returning is thus

, or in terms of walker types, as W z

, if jµV

=S

=S

zjt+1

zjt+1

jt+1

W k

W k

S

O

z

k

z

k

z

.

l

i

S

zD1

as

=

(3)

, hk
ziD

qk
zijt+1

S
pk
zjt
j
∑
pk
zlt
lµV
is based on the diﬀerence between the heading in the direction from i to
, which are combined as
moves to

|]−1. This move is also chosen randomly and when W: k
zit

, and that from i to the position deﬁned by W k

where pk
zjt
j, hk
zij
[1+|hk
−hk
zij
ziD
W9 k
, the walker marks the move by updating tz
zjt+1
jt
W9 k
zjt+1

k
This process is akin to the walker laying a pheromone trail when a discovery
has been made: tz
measures the density which ultimately reﬂects a hierarchy, the
jt+1
highest of which form the shortest routes. When the walker comes within the
neighborhood of its destination jµV
, it switches back to exploration mode and
the search begins again. Note that unlike traditional spatial interaction theory which
uses index i for an origin and j for a destination, no such convention is adopted here.
It takes some time before agents discover an origin. Before this, the search is a
random walk with the route accessibility surface set as a uniform distribution, that
=1 until a time t is reached when the ﬁrst entry point is found. If a walker
is tz
jt
crosses the edge of the event space, it is absorbed, regenerates at its source destination,

=tz
jt

tz
jt+1

+ ∑

(4)

D

z

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 684

M. Batty et al.

and begins its search again. In its early stages, this is a random walk with absorbing
barriers with a standardized variance of distance traveled proportional to t0.4, a little
less than the value for an unconstrained random walk where s=t1/2 (Sornette 2000).
As the process continues, more and more origins are discovered while during explora-
tion, walkers ‘learn’ to direct their search at routes to origins already discovered.
Those origins closest to destinations are discovered ﬁrst and the hierarchy of ‘shortest
routes’ is thus built up, continually reinforced by this positive feedback. The algorithm
is a variant of that observed in trail formation and collective foraging behavior
amongst animal populations such as ants (Helbing et al. 1997, Camazine et al. 2001).
The swarms created are extremely eﬃcient in predicting shortest routes in geometric-
ally constrained systems (Bonabeau et al. 1999). Here we do not let the pheromone
trail tz
gives the relative attraction of
jt
destinations to diﬀerent street locations in terms of distance and its proxy as
noise. The exploratory stage ﬁnishes at time T when diﬀerences in densities
| fall below various predetermined
tz
jt+1
t+1
thresholds which we ﬁx through experimentation.

decay, while the accessibility surface g

| and t

−tz
jt

−tz
jt

=S

=S

jt+1

t+1

|tz

|tz

S

jt

z

j

j

In the second stage, we launch the walkers from their entry points, and these
as indicators of
and combine them as
. The basic probability of movement for each walker type z is now deﬁned

walkers move towards the event using the surfaces tz
jT
accessibility. We suppress T , normalize these as tz
and g
j
(tz
j
as

)ag1−a
j

and g

jT

j

=

qk
zijt+1

)ag1−a
S
(tz
j
i
i
)ag1−a
∑
(tz
l
l
lµV

S

l

(5)

i

=lh:k

i
where a is a tunable parameter which plays a role similar to an homogenous
production function of degree 1 such as the Cobb-Douglas, widely used in micro-
economics for its scaling properties (Henderson and Quandt 1980). We use (5) to
select directions of movement from i to j where we use each probability qk
in the
ijt
to determine the direction j in which the walker moves. This is
neighborhood V
done randomly with new headings in the direction j computed as h:k
and then
used to update the existing heading as hˆk
where l reﬂects a
lag in response.

zit+1
There are two eﬀects that complicate this movement. The ﬁrst is herding or
ﬂocking (Reynolds 1987, Vicsek et al. 1995). This directs movement as an average
of all movement in the immediate neighborhood reﬂected in the headings where
. However a move by walker W k
W l
hk
S
zit+1
jµV
z
zit
zjt
only takes place if the density of walkers in cell j is less than some threshold
to W k
z
=2 based on the accepted standard of 2 persons per meter squared
Y∏S
W k
zjt
(ppm2) (Fruin 1971, Still 2001). If this is exceeded, the walker evaluates the next
best direction and if no movement is possible, remains stationary until the algorithm
frees up space on subsequent iterations. These rules are ordered to ensure reasonable
walking behavior. There are many variants that can be tried but those adopted seem
to be plausible from ad hoc observation and from the literature.

+(1−l)hk
zit

=S
zjt+1
S
k
z

hˆl
zjt+1

W l
zjt

zit+1

zit+1

jµV

µj

µj

/S

S

S

S

z

z

z

i

l

i

l

The paraders Pk
it

move in a much more structured manner, around a parade loop
deﬁned by a linear sequence of cells {i} forming the set iµP which are ordered so
that there is only one direction of movement from [i(cid:1)j] in time [t(cid:1)t+1]. Headings
and probabilities of movement do not have to be calculated for the paraders although
movement is determined with some random input. Although the ﬂoats normally

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

685

iµP

travel to adjacent cells in the given direction with the ﬂow controlled to give
reasonable moving behavior, this smoothness does incorporate a degree of inter-
, iµP,
mittency. At any time t, the total number of paraders in each cell i, P
is distributed approximately uniformly amongst the total number of cells used for
the parade (S
1). A parader will progress to an adjacent cell in a time period
according to a random function which ensures that most paraders make such
transitions, but a few do not and stay in the cell that they are currently in. For any
=Pk
parader Pk
. If the threshold H
it
it
is set a little less than 1, then most paraders will move smoothly to the next cell.
The parameter is set experimentally to introduce a level of intermittency in the ﬂow
of the parade that is observed in practice and which, for the most part, avoids major
incidents.

, if rand(1)<H, then Pk

otherwise Pk

=Pk
it

=S

jt+1

it+1

Pk
it

it

k

z

k

z

z

z

k

S

S

S

S

S

W k

t∞=1

W k
zjt

jµWPi

(t)=St

There are, of course, potential conﬂicts between paraders and walkers when they
come into contact. We deﬁne cells in these neighborhoods as jµWP
where we
i
compute the density of walkers in these cells. Note that walkers cannot occupy cells
(cid:4)L, where L is the critical
which deﬁne the parade route. Then if S
jµWPi
density in cells adjacent to the parade, then walkers disperse in the same way they
do when they interact with each other and breach critical density limits. We keep a
trace AP
zjt∞ which provides us with a record of potential
i
accident hot spots along the parade. The same logic is used in relation to crowding
around the ﬁxed sound systems where the bands are playing. In analogous fashion,
we deﬁne cells in neighborhoods around each band i as jµWB
, an equivalent test
i
(cid:4)J, and the trace of potential accidents as
W k
for dispersion as S
S
S
z
zjt
AB
W k
zjt∞. This second stage is terminated when the density of
S
t∞=1
jµWBi
i
walkers enters a steady state which implies that all walkers are moving in the
area of the Carnival and that movement between attractions is beginning to
for this using various criteria such as the statis-
repeat
tics
on
test
jT−t∞
]}/{T −t∞−1}, a lagged density diﬀerence
z
deﬁned for each type of walker z (or for all walkers) where the summation over time
is from the point where the simulation enters the steady state t∞ to the point where
the simulation ends T . This formula handles the case where periodicity is feature of
the simulation.

itself. We can test
we
which
St∞
S

present
ziT−t

jµWBi
S
k
z
z

(t)=St

ziT−t−1

generic

−W k

={S

below.

based

[W k

t=1

A

S

is

k

z

k

z

i

We can now assess how good the model

is at predicting the observed
distribution of crowds. We do not deﬁne any statistics for the individual groups z
for two reasons. First, we do not have good data on these diﬀerences and second,
as those visitors whose prime concern is to visit either bands or the parade but not
both are likely to visit each of these, our observations do not directly tie in with
motivations. Thus we will only work with aggregate quantities. We compare the
predicted density of all walker types W
, the
it
average neighborhood density in cells where observed densities are available. We
>0,
then relate these to the number of occupied cells S
i
=0) and the number of available cells S
=S, deﬁning averages as
otherwise n
i
i
, s(t)=S
. For diﬀerent
r(t)=S
W˜
n
n
threshold
/S
/S
/S
i
it
i
i
i
i
i
i
(Y )=0, and the proportion of
(Y )=W
>Y, then c
values Y, if W
otherwise c
it
it
(Y )=S
(Y )/M. Average distance travelled in each
c
the population at risk is thus Z
it
t
time period [t(cid:1)t+1] is U
=S
/M with the percent actually moving
dk
S
zijt+1
t+1
=S
/M.
W k
V
zit
These two stages deﬁne the complete model with subsequent stages being gener-

W k
jµV
jt
j
=1 if W k
zit

µj
z
=M (where n

and q(t)=S

and W˜

=S

zjt+1

S
i
S

jµV

t+1

W k

/S

i
it

ijk

W

ijk

S

S

S

S

n

n

it

it

it

z

z

z

k

z

i

i

i

i

i

i

i

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 686

M. Batty et al.

ated through reiteration of the entire sequence. These additional stages are activated
if the statistics generated at the end of the second stage suggest that public safety is
compromised. It consists of examining the statistics from the second stage, and
gradually making changes to reduce the population at risk by introducing barriers,
capacitating entry points, and closing streets. This is achieved by changing the
number of street objects—switching street agents oﬀ or on to signal how much space
for movement is available. The set of agents {S
} where the prime
indicates that this is the next iteration in the sequence with the model beginning
again and the original time t being indexed back at t=1. As the repercussions of
these changes are not immediately obvious, we make these changes one by one
forming S∞
, ..., rerunning the model each time until an acceptable solution
j
emerges. These reiterations assume that the shortest routes surface needs to be
updated and this involves rerunning the entire two-stage procedure shown in ﬁgure 2.

} is updated to {S∞
j

, S◊
j

, S+
j

j

6. Dimensioning the problem and calibrating the model

The main feature of the Carnival is the parade which involves 89 ﬂoats and 64
support vehicles that continuously move around a closed loop of 4.9 km from noon
until dusk on each of the two days of the event. Within the loop, there are 42 static
sound systems—bands—and across the entire area, some 240 licensed street stalls
with well-resourced health and comfort points for visitors and paraders alike. Most
visitors to the event use public transport to reach the 38 entry points which deﬁne
the traﬃc exclusion zone managed by the police, some 40% using the tube and 22%
using buses. Many others walk from central London or neighboring areas and only
a small number (<10%) travel to the Carnival by car or taxi. The street system, and
the entry, parade, static sound, and tube stations, are shown in ﬁgures 3(a) and (b),
respectively.

(a)

(b)

Figure 3. Geometric and locational features of the carnival. The scale of these and all
subsequent similar maps is 2.4kms in the east-west horizontal direction. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure3.htm

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

687

The number of visitors grew dramatically in the 1990s, reaching 1.2 million (over
the two day period) in 1999 but dropping to something like 700 000 in 2001. Informed
speculation suggests that this is possibly due to the negative publicity associated
with high levels of crime at the event which have dominated policing in recent years.
Problems of crowding have become signiﬁcant with accidents due to congestion
rising dramatically and problems of emergency vehicle access being compounded by
the conﬂict between the parade and visitors entering the inner core of the area to
visit the sound systems. In 2001, there were 500 accidents (100 requiring hospital
treatment with 30 percent related to wounding) and 430 crimes with 130 arrests.
Two fatalities occurred in 2000 from violent crime. This and the need to review
resources allocated to manage the event—3500 police and stewards were required
each day—was the trigger that led to the review that initiated this technical work
(CRG 2001).

Attendance is more than twice as large on the second day with the peak level
between 4 pm and 6 pm when around 260 000 visitors are in the Carnival area.
During the event, there is considerable movement between the various attractions
and although precise movements are not known, the rate of ‘churn’ which is the
ratio of those entering and leaving the area to those within, is around 40%. In terms
of the volume of movement from entry points to attractions, four streets located at
E–W–N–S of the area account for over 50%. Crowd densities are high at about
0.25 persons per m2 of which 0.47 ppm2 line the parade route and 0.83 ppm2 lie inside.
Critical densities up to 1 ppm2 exist in the central section where many of the bands
are clustered while around the judging point in the south west area of the parade,
route densities rise to 1.3 ppm2 which are critical.

The data we have available were collected at the Carnival in 2001 speciﬁcally for
this analysis. Essentially origin and destination data are available, the origins from
a cordon count at all 38 entry points throughout the 2-day period, while destination
data along the parade and at some static sound locations were derived from video
footage taken from police helicopters during the late afternoon of the second day
(IPS 2002). From this footage, 1022 images have been extracted from which densities
have been manually computed and averaged to cells, as indicated in ﬁgure 4.
Additional data on entry and exit volumes at the subway station from surveys by
London Underground Ltd., and bus volumes at setting down locations have been
integrated into the density database.

To set up the simulation using this data, we need to decide on the level of
resolution of the space within which the Carnival is to be modeled. This is largely
dictated by software considerations in that the software used has upper limits on
the number of agents and cells that can be handled. No more than 16 000 agents
can be simulated on no more than 52 500 cells. Thus the area of the space was set
as 207 pixels×251 pixels and 13 000 agents were deﬁned, divided into those whose
intention is to visit the bands (3000), those visiting the parade (5000), and those
visiting both (5000). This must be interpreted as a 5% sample of the 260 000 visitors
in the peak period that is being modeled and thus all quantities must be scaled and
adjusted accordingly. This is less than satisfactory because we consider that a fully-
ﬂedged model should be able to handle not a sample but the full population of
agents. This however would require considerable programming that was simply not
possible within the project at this time but it remains a longer-term aim of this
research. The cell structure is implied by the pixelation shown in ﬁgure 3(a). Key
locational features of the problem—entry points and Carnival destinations (parade

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 688

M. Batty et al.

Figure 4. Translating video footage of walkers to cell densities. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure4.htm

and bands) shown in ﬁgure 3(b)—represent the sources for the swarm algorithm
which generates the paths in the ﬁrst stage of the model and thus the starting (entry)
points for the visitors in the second stage.

Like all calibrations, the purpose is to deﬁne values for the model parameters so
that the predictions of the model are as close as possible to the observed data. In
terms of equations (1) to (5), we have ﬁxed several parameters relating to lags and
crowding at what we consider reasonable values. This enables us to reduce the search
problem to a phase space deﬁned by only two parameters—the friction of distance
b and the accessibility weighting parameter a. The density thresholds for walkers
with respect to each other Y, to paraders L, and to bands J have all been set at
2 ppm2 as suggested in oﬃcial advice (Fruin 1971, ISP 2002). In the second stage of
the simulation, once paths and accessibilities have been deﬁned, the lag in updating
the heading from the previous value is set at l=0.4 while the intermittency threshold
for moving the elements in the parade forward is set at H=0.9. The calibration thus
consists of running the model through its two stages (together with any subsequent
control) over samples of parameter values a, b until a combination is found which
optimizes the model’s predictions based on the ﬁt of observed to predicted densities.
located at the Carnival
event locations D. They begin their random walk through the streets in search of
entry points where they will actually start their walk to the Carnival in the second
stage. Purely to illustrate the power of the swarm algorithm, we show the paths that
are generated for walkers (z=2) starting from the sound systems (W 2
) and ﬁnding
D1
the entry points but in the absence of any geometric constraints posed by the streets.
In short, we set the streets S
, and in this way the walkers ﬁnd the entry
points directly. They move out in concentric rings from the static sound locations,
the symmetry of this concentricity being broken when entry points are ﬁrst disco-

The simulation starts with the three types of walker W z

=1, Y

D1

j

j

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

689

vered. In ﬁgures 5(a) and (b), we show the location of the walkers at times t=10 and
t=50. By t=500, the pattern is dominated by the paths between sound systems and
entry points as shown in ﬁgure 5(c), and this is conﬁrmed by the straight line traces
reproduced in ﬁgure 5(d ). All the results in this section
based on the densities t2
jT
are based on simulations with the best combination b=0.65, and a=0.35. With the
, z=1, 2, 3 are shown in
streets in place, the three shortest route hierarchies tz
jT
ﬁgures 6(a)–(c) together with the overall accessibility surface g
in ﬁgure 6(d ). These
show the hierarchy of routes which are then combined into a composite accessibility

jT

(a)

(b)

(c)

(d)

Figure 5. Swarming in search of entry points without any street geometry. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure5.htm

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 690

M. Batty et al.

(a)

(b)

(c)

(d)

Figure 6. Hierarchies of shortest routes and associated accessibility. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure6.htm

surface used to initiate the actual walks to the Carnival in the second stage of
the model.

We will examine the various statistics associated with these simulations after we
have examined the second and subsequent stages where safety levels determine how
control is developed as part of the modeling process. Using the accessibility surface
shown in ﬁgure 6(d ), we locate all walkers at the points where they are observed to
enter the Carnival area (at the entry points in ﬁgure 3(b)) and we then launch these
using the access surface to guide the directions that they walk. Flocking and conges-

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

691

tion dispersal are an integral part of this second stage, as are the interactions between
walkers and paraders, and walkers and bands. We have not included emergency
vehicles as separate agents for we consider the scale of the simulation (at a relatively
crude level of cell resolution) makes the interactions between walkers, paraders,
bands, and emergency vehicles somewhat arbitrary. Accidents caused by congestion
can be further exacerbated by the diﬃculties of getting emergency vehicles to attend
to injured walkers and paraders but explicit consideration of these eﬀects must await
the detailed model that we are currently constructing with more appropriate software.
In ﬁgure 7(a), we show the composite access surface for just one walker type—those
where we use a=0.35,
who visit the parade and the bands (z=3)—as (t3
i
this best value determined through running the entire model through diﬀerent
combinations of its parameter values within its phase space. We show the movement
of all three walker types at t=100 and then in the steady state at t=500 in ﬁgure 7(b)
and (c).

)0.35g0.65

i

i

k

z

S

S

S

=1

jµV

∞
(t)=St
t

trace indices
In the steady state, we have also computed the hotspot
(t) deﬁned earlier as well as those for walkers not in the parade or band
A¦P
(t), AB
i
i
∞. We have added and smoothed these surfaces
locations AW
W k
zjt
i
as shown in ﬁgure 7(d ) and this gives a good indication of the accident and crowding
hotspots at the end of the second stage. It is this picture that is essential in determining
where safety controls are to be introduced. In fact the simulation reveals a mismatch
between actual hotspots and those produced by the simulation. Congestion along
the parade itself in the south-west corner is not as problematic as actually observed
in 2001, while there are more serious problems in the northern part of the route.
The model does tend to give greater weight to the northern area and this is a
systematic error that needs to be addressed in the new simulation.

z

At the end of the second stage, we assess safety levels. To illustrate how we
proceed, we have introduced the various barriers that are associated with the actual
Carnival in 2001. The core area in the center of the parade route is reserved for
police and emergency management in case a serious disaster occurs and other roads
are closed for resident access and due to constrictions in streets unsuited to large
crowds. The areas are shown in ﬁgure 8(a) where we also produce a summary of
density levels which provides some idea of how the crowding problems might be
resolved. These are shown in ﬁgure 8(b) where it is clear that the north-east leg of
the parade is problematic in terms of crowding as is the center area of the Carnival
where many static sound systems are clustered. In fact, the existing crowd control
through barriers and street closures does go some way to reduce problems although
it is best to consider the map of hotspots in ﬁgure 8(b) as a diagnostic for future action.

7. Safety, policy, and scenario testing

Before we examine safety issues and provide some sense of how the model is
being used in evaluating diﬀerent routes for the parade, the performance of the
existing model must be examined. At each stage of the simulation, we compare
existing densities of walkers in their steady state with observed densities at 120
locations which we have extracted as being signiﬁcant from the density database. In
the ﬁrst stage, however, the swarm algorithm predicts the numbers of walkers who
‘ﬁnd’ each entry point, and from the cordon survey (ISP 2002), we are able to
account for 64% of this variance based on the numbers observed entering the
Carnival area during the peak period from 4 pm to 6 pm on the second day. The
second stage, which involves locating the observed walkers at these entry points and

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 692

M. Batty et al.

(a)

(b)

(c)

(d)

Figure 7. The second stage of the simulation. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure7.htm

‘walking’ them to the Carnival attractions generates 72% of the variance of observed
densities in the 120 locations. These predictions not only relate to the sound systems
but to selected points on the parade route for which density data are available. At
the third stage, when the model is rerun with the oﬃcial street closures and barriers
imposed, the variance explained increases to 78%, but not all the points of extreme
crowding have been removed, as already shown in ﬁgure 8(b).

We graph the key indicators in ﬁgure 9. These statistics are averages and totals
and to understand their impact locally, reference to the densities and hotspots in

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

693

(a)

(b)

Figure 8. Control of crowds after the second stage simulation. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure8.htm

ﬁgures 6, 7 and 8 must be made. Nevertheless, besides showing how the simulation
works, the trajectories give some sense of how these densities change. There is a
critical distinction between the densities and occupancies associated with the ﬁrst
and second stages of the model—between the swarm and climbing algorithms. The
swarm algorithm begins with all walkers at destination attractions and as these
spread out in the search for entry points, densities drop dramatically as illustrated
in the upper and lower left-hand graphs in ﬁgure 9. As the algorithm converges on
the most favoured shortest routes, the percentage of the walkers who breach the
critical thresholds of 0.5 and 1 ppm2 continuously increases. Although there is some
sense of convergence to stable values, these percentages continue to rise as more and
more walkers are attracted to the shortest routes. The percentage who occupy the
streets is fairly stable as is the average distance travelled in each time period. In all
cases, there is continual volatility in these trajectories as local geometric factors
perturb the movement of walkers. Nowhere is there a smooth ﬂow of walkers, and
this seems characteristic of what actually happens as walkers move between events
at the Carnival itself.

In contrast, the second stage of the model displays quite diﬀerent behavior.
Walkers move from their entry points by climbing the accessibility surface towards
the attractions. Again walkers begin at very high densities which fall oﬀ as they
spread out from their origins. These densities then rise slowly, peaking as walkers
enter the Carnival area and move between attractions. The graphs of average point
and neighborhood densities, and critical threshold values converge to quite stable
levels which mark the steady state shown by the graphs on the right-hand side of
ﬁgure 9. The average distance travelled slightly increases as walkers enter the steady
state and the volatility of walkers gets greater as they crowd together around the
Carnival attractions. A key issue of course is the diﬀerence between the simulation
without any controls on street closures and that which develops when routes are

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 694

M. Batty et al.

1: Average walker density r(t)3; 2: Average neighborhood walker density s(t)/3; 3: Average
(Y )>0.5; 5: Percent vulner-
/4; 4: Percent vulnerable >0.5 ppm2Z
distance just traveled U

t+1

able >1 ppm2 Z

(Y )>1; 6: Percent occupancy q(t)

t

t

Figure 9. Walker densities and safety levels in the two-stage simulations. Also see
http://www.casa.ucl.ac.uk/ijgis/ﬁgure6.htm

closed as in ﬁgure 8(a). The results are encouraging: density levels at each point and
in each neighborhood are reduced by around 12% with the percentage vulnerable
to crowding at 0.5 ppm2 and 1 ppm2 down to about 14%. This must be attributed

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

695

t

t

solely to the eﬀect of closures, suggesting that existing controls are eﬀective but with
considerable room for further improvement. As ﬁgure 9 shows, existing controls
(Y )>0.5 and 8% the Z
reveal that 20% breach the Z

(Y )>1 thresholds.

For reasons of conﬁdentiality, we are not able to present the detailed results of
using the model to assess the impact of alternative parade routes. However it is
worth presenting some general comment on the way the model has been used. The
process of developing six diﬀerent alternative routes was based on a series of meetings
organized by the Greater London Authority’s Carnival Review Group (CRG 2001)
and from this process, six somewhat diﬀerent routes emerged for testing. These
routes essentially broke the circularity of the existing route. The simplest was based
on an L-shaped procession along the existing north–south route (Ladbroke Grove)
and then west-east along the Bayswater Road ﬁnishing in Hyde Park (see ﬁgure 3(a)).
The other ﬁve routes were variations either on this or on the existing route. The key
issue in running the model, however, is in determining visitor volumes at entry points
with the location of the sound systems unchanged. In fact a series of related models
was built to predict these volumes based on linear regression of observed volumes
against key route factors such as visibility, accessibility, and various distance meas-
ures to related facilities (ISP 2002). Thus for any location in the area, it is possible
to predict visitor volumes which, when normalized to total visitor numbers, give the
numbers entering the Carnival area associated with any new parade route.

There was considerable variation in average densities, occupancies and vulnerabil-
ities associated with the six new routes although in every case there was improvement.
In general, the new routes which were longer in distance traveled and simpler in
conﬁguration spread the visitors over a wider area, thus lowering the maximum and
average densities of walkers. For example, for the L-shaped route, the maximum
density is 60% lower, the average neighborhood density is 45% lower and the average
density is 36% lower than for the existing route. The interim solution adopted in
2002 essentially breaks the circuit by cutting the start from the end of the parade
on the northern loop, reducing crowding by 37%, 21% and 9% across these same
measures.

8. Conclusions: future research

Our current model is limited in its ability to simulate behavior across spatial
scales and within diﬀerent time periods due to software constraints on the number
of agents handled and the level of cell resolution. We are unable to simulate a
complete range of behaviors, which include panic situations where we need to
represent the full agent population at very ﬁne scales. As we move to full populations,
we also require ﬁner scales and ﬁner time intervals to represent speed and acceleration
which are features of many pedestrian models (Helbing et al. 2000, Still 2001). Only
when we are able to represent all agents would we be able to resolve the scaling
problem and include behavioral protocols in the form of schedules governing move-
ment. All these additions require us to reprogram the model in a more powerful
language. This is work in progress. An important issue, however, is the need to
develop software in which we can quickly visualize inputs and outputs from the
model at diﬀerent scales and through time. Some geographical information systems
software can be extended in this way and we are already at work on using such
software to handle visibility ﬁelds. It is unlikely, however, that in our new model
there will be anything other than a loose coupling to such software (Batty and
Xie 1994).

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 696

M. Batty et al.

We also need much better data for such models. Path data are probably of lesser
importance than attitudinal and related behavioral data that can only come through
direct questionnaire. Our model depends on knowing the distribution of diﬀerent
types of agent and this in turn is reﬂected not only in their behaviors at the Carnival
but also in their demographic proﬁles. In short, following the law of requisite variety,
we need to ensure that the richness of our models is matched by suﬃciently rich
data. Finally the model structure developed here provides a rather diﬀerent perspect-
ive on the nature of control, design and planning. In many small-scale spatial event
situations such as the movement of people into and out of high-capacity buildings
and vehicles, there are already major controls on what is possible, established by
various legislative and local mandates. These must be built into the models directly
and if they are to be altered in any way, then the experts and stakeholders who
know most about these situations and what is possible must be intimately involved.
This in turn requires the models to be accessible in a way that is not usually the
case. We need to establish environments in which a variety of stakeholders can be
involved in the science and can provide essential inputs not only in the interpretation
of results from the models but also the design of the models themselves. This presents
a new frontier for geographic information science which the models developed here
are just beginning to address.

Acknowledgments

The ESRC Nexsus Project (L326-25-3048) provided partial support for the
project. We also wish to thank the Greater London Authority’s Carnival Review
Committee, Lee Jasper (the Mayor’s Advisor), the Metropolitan Police, London
Underground Ltd. and the Notting Hill Carnival Trust.

References
B, A. E., 1974, A Simulation Model of Multidirectional Pedestrian Movement Within
Physically Bounded Environments. Institute of Physical Planning, Report 47
(Pittsburgh, PA: Carnegie-Mellon University).

B, M., 2001, Polynucleated urban landscapes. Urban Studies, 38, 635–655.
B, M., and X, Y., 1994, Modeling inside GIS: Part 2: selecting and calibrating urban
models using ARC-INFO. International Journal of Geographical Information Systems,
8, 451–470.

B, V. J., and A, J. L., 2001, Cellular automata microsimulation for modeling
bi-directional pedestrian walkways. T ransportation Research B, 35, 292–312.
B, E., D, M., and T, G., 1999, Swarm Intelligence: From Natural to

Artiﬁcial Systems (New York: Oxford University Press).

B, A., and T, H. A., 1986, A model of pedestrian route choice and demand
for retail facilities within inner-city shopping areas. Geographical Analysis, 18, 115–128.
B, P., 2001, Spatial units as agents: making the landscape an equal player in agent-based
simulations. In Integrating Geographic Information Systems and Agent-based Modeling
T echniques, edited by H. Randy Gimblett (New York: Oxford University Press),
pp. 59–82.

B, C., K, K., S, A., and Z, J., 2001, Simulation of
pedestrian dynamics using a two-dimensional cellular automaton. Physica A, 295,
507–525.

C, S., D, J-L., F, N. R., S, J., T, G., and B E.,
2001, Self-Organization in Biological Systems (Princeton, NJ: Princeton University
Press).

C, E., 1962, Crowds and Power (London: Victor Gollancz).

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 T he discrete dynamics of small-scale spatial events

697

36, 298–310.

Physics, 73, 1067–1141.

Nature, 407, 487–490.

CRG, 2001,

Interim Report and Public Safety Proﬁle Recommendations

for 2001,
(London: Carnival Review Group. Greater London Authority), available at
http://www.london.gov.uk/mayor/carnival/interim_report/interim_review_report.pdf

D, J., J, J., and T, H. J. P., 2002, A multi-agent cellular automata
model of pedestrian movement. In Pedestrian and Evacuation Dynamics, edited by
M. Schreckenberg and S. D. Sharma (Berlin: Springer-Verlag), pp. 173–180.
F, J. J., 1971, Pedestrian Planning and Design (New York: Metropolitan Association of

Urban Designers and Environmental Planners, Inc.).

H, M., T-G, M., O’S, D., and S, T., 2001, ‘‘So go
downtown’’: simulating pedestrian movement in town centers. Environment and
Planning B, 28, 343–359.

H, D., 1991, A mathematical model for the behavior of pedestrians. Behavioral Science,

H, D., 2001, Traﬃc and related self-driven many-particle systems. Reviews of Modern

H, D., F, I., and V, T., 2000, Simulating dynamical features of escape panic.

H, D., S, F., K, J., and M, P., 1997, Active walker model for
the formation of animal and trail systems. Physical Review E, 56, 2527–2539.
H, J. M., and Q, R. E., 1980, Microeconomic T heory: A Mathematical Approach,

3rd Edition (Tokyo: McGraw Hill).

H, S. P., B, P. H. L., and D, W., 2001, Microscopic pedestrian wayﬁnd-
ing and dynamics modeling. In Pedestrian and Evacuation Dynamics, edited by M.
Schreckenberg and S. D. Sharma (Berlin: Springer-Verlag), pp. 123–154.

IPS, 2002, Carnival Public Safety Project—Assessment of Route Design for the Notting Hill
Carnival (London: Intelligent Space Partnership, Greater London Authority).
J, S., 2001, Emergence: T he Connected L ives of Ants, Brains, Cities, and Software (New

K, J., E, R. C., and S, Y., 2001, Swarm Intelligence (San Francisco, CA:

Morgan Kaufmann Publishers)

L B, G., 1905, T he Crowd: A Study of the Popular Mond (London: Transactions Publishers,

L, G. G., 1994, Modeling and simulation of pedestrian ﬂow traﬃc. T ransportation Research

N, K., and S, M., 1992, A cellular automaton model for freeway traﬃc.

Journal of Physique France, I2 2221–2228.

P, B. S., and Z, J. M., 1975, Urban Space for Pedestrians (Cambridge, MA:

York: Scribner).

1995 Edition).

B, 28B, 429–443.

MIT Press).

R, J., 1956, T he Core of T he City: A Pilot Study of Changing L and Uses in Central

Business Districts (New York: Columbia University Press).

R, C. W., 1987, Flocks, herds, and schools: a distributed behavioral model. Computer

Graphics, 21, 25–34.

S, F., 1997, Active Brownian particles: artiﬁcial agents in physics. In Stochastic
Dynamics, edited by L. Schimansky-Geier, and T. Poschel, Lecture Notes in Physics,
Vol. 484 (Berlin: Springer), pp. 358–371.

S, F., 1998, Modeling migration and economic agglomeration with active Brownian

particles. Advances in Complex Systems, 1, 11–37.

S, D., 2000, Critical Phenomena in Natural Sciences: Chaos, Fractals, Self-organization

and Disorder (Berlin: Springer-Verlag).

S, G. K., 2001, Crowd Dynamics (PhD Thesis, Warwick, UK: University of Warwick),

available at http://www.crowddynamics.com/

V, T., C, A., B-J, E., C, I., and S, O., 1995, Novel type of
phase transition in a systems of self-driven particles, Physical Review L etters, 75,
1226–1229.

Downloaded by [Georgia Tech Library] at 10:16 09 December 2014 