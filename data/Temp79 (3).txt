Transactions irr  GIs,  1996, vol.  I ,

  no. 2, p. 09 

Propagating effects of database generalization 
on the viewshed 

PETER  FISHER 

Department of Geography, Universiry of Leicester, Leicester, LEI  7RH, UK 
e-mail:pffi@le.ac.uk 

Few  studies  have  systematically  examined  the  effects  of  different  possible 
generalization  methods on the products of GIS operations.  In  this paper the effects 
of generalizing  a Digital Elevation Model  (DEM) on the area which  is  determined 
to  be  visible  (the viewshed) is  examined.  Among  the  many different  methods  of 
generalization  which  are possible, a limited set of operators is examined here.  First, 
they all  fit  geometrically from  one resolution  to  another, and they can be  grouped 
into  two  types:  regular sampling  and statistical summaries.  In  the latter  class four 
different  operations  are  used:  for  any  cell  at  the  target  resolution,  elevations  are 
determined,  from  the  arithmetic  mean,  the  maximum,  the  minimum,  and  the 
maximum  difference  from  the  mean  of  the  cells within  the  kernel  a t  the original 
scale. Changes in resolution of 0.5, 0.33, 0.25, and 0.2 of the original study area are 
studied at  100 viewing points in each of two study areas.  At  the original resolution 
a 120 x 120 pixel area was examined, giving generalizations to 60 x 60,40 x 40,30 
x 30, and 24 x 24 pixels. The viewsheds determined over these different resolution 
DEMs are compared with a number of possible viewsheds derived by generalization 
of  the  viewshed  over the  original  DEM.  Of those  tested,  the  maximum  deviation 
from the mean within kernel emerges as the most reliable estimate of the pattern and 
area  of  the  viewshed  at  all  resolutions. The importance  of  this  conclusion  is  that 
different  generalization  operators  yield  more  or  less  faithfd  versions  of  the 
ungeneralized  product  (the viewshed), and  it seems indicative that a similar variery 
in stability of the product with generalization operator will  result in many, if not all, 
complex products of spatial analysis. 

introduction 

recent  attention 

The representation  of digital spatial data at multiple 
resolutions,  where  either  information  is  stored  at 
multiple resolutions or is generalized from a detailed 
(large)  scale  to  a  generalized  (smaller)  scale,  has 
received  considerable 
from 
researchers  (Burtenfield  and  McMaster  199 1 ; 
Miiller  er  a1  1995). Research  which  has  examined 
the  digital  products  derived  from  data  at  different 
resolutions can be divided  into those which examine 
the same product in digital coverages generated and 
stored  at different  resolutions  (Isaacson and  Ripple 
1990; Joio  1995; Painho  1995), and  those  which 
examine only one method of generalization to other 
resolutions  (Brown  et  a1  1993;  Chang  and  Tsai 
1991; Reperto  1996; Wilson  er a1  1996). 

Few  studies  have  taken  a  dataset  at  one 
resolution  and  examined  derived  products  in 
alternative  generalizations  of  the  data.  This  is 
surprising,  since  we  know  that  products  derived 
from  GIS  Operations  are  dependent  on  many 
factors, including  database  accuracy  (Fisher  199 l ) ,  
the algorithm  used  (Fisher 1993) and the resolution 
of the database (Chang and Tsai  199 1).  The implicit 
assumption  of  the  work  in  generalization  is  that 
when  a  database  is  generalized,  the  method  is 
finding  a  unique  solution;  this  is  obviously not  the 
case, because it  is  finding  one of a  host  of possible 
solutions.  Indeed,  LMcMaster  (1 987) has  examined 
the 
line 
simplification algorithms. Source lines were taken to 
be  true,  and  then  simplified  by  a  number  of 
different  algorithms,  and  the  performance  of- those 

of  various 

numerical 

precision 

69 

P Fisher 

algorirhms  compared  using  a  number  of sratisrical 
measures.  Indeed,  the  vasr 
lirerarure  o n   line 
is  an  exploration  of  alternative 
simplificarion 
algorithms ro achieve  the same end. 

T h e  research  reporred  here  cakes rhe viewshed 
as  it  is  determined  in  one  DEM  at  rhe  largest 
resolurion, and uses measuremenu of the ‘quality’ or 
‘accuracy’  of  the  viewshed  when  it  is  determined 
from  alrernarive  derived  DEMs  ar 
smaller 
resolurions.  T h e  purpose  is  primarily  to  commenr 
on the changing narure of rhe derived  viewshed wirh 
D E M   resolurion,  and  rhe  relative  performance  of 
the  alternative  generalization  operators  which  are 
invesrigared wirh  respecr  to the derived viewshed. 

Data  generalizarion  may  be  necessary  in  a 
number  of siruarions, especially where  rapid  results 
of  the  procedure  are  required,  or  disk  space  is 
limired.  T h e   dererminarion  of  the  viewshed 
is 
normally  a  lengrhy  procedure  and  can  be  speeded 
up  by  reducing  the dara  volume.  Similarly,  DEMs 
are  commonly  large  darasers,  and  the  storage 
requiremenr  can  be  decreased  by  generalizacion  so 
long as some loss of data is judged nor ro be crucial. 
T h e  relevance of the work reported here  is  nor 
resrricred  ro either rhe viewshed  or DEMs, however, 
bur  rather  to  the  whole  question  of  the  spatial 
resolurion  of  databases,  the  effects  of  changing 
resolurion,  and  the  reliability  of  products  derived 
from  them. 

In  rhe next secrion of the paper a definition of 
rhe  viewshed 
is  provided,  and  a  discussion  of 
generalizarion  operarors follows. T h e  fourrh section 
outlines  the  experimenral  procedure,  and  the  fifrh 
section  includes  descriprion  and  discussion  of  rhe 
resulrs. T h e  conclusion  follows. 

The viewshed 

The  viewshed  is  one  of  the  standard  procedures 
included wirh GIS designed for analysis of elevation 
dara.  Ir  is  intended  to  distinguish  locations which 
can  be  seen  from  a  parricular  viewing locarion  (in- 
view)  from  rhose  which  are our-of-view (Figure  1). 
A line-of-sight  is drawn from the viewer at a viewing 
locarion  to  a  viewed  location,  and  if  the elevation 
rises  above  rhe  elevation  of  the  line-of-sight  ar  any 
poinr  along  the  line-of-sighr  [hen 
the  viewed 
posirion  ar  the end  of  rhe  line  is  derermined  ro  be 
our-of-view.  Otherwise i r   is  in-view.  To  derrrmine 
rhe  viewshed  from  a  viewing  poinr,  all  possible 

70 

Figure  1. T h e  viewshed  algorirhm rrears all 
of the study area as the viewed  locarion. 

parts 

poinrs  wirhin  a  geographical  region  are  [reared  as 
the  viewed  point  in  [urn  (Figure  2).  Research  on 
algorithms and implementations  (Fisher 1993), and 
on  the  accuracy  of  the  elevations  (Fisher  1391, 
1992),  has  been  shown  ro  cause  considerable 
uncerraincy  in  the product.  Ir is  therefore very likely 
chat  different  resolutions  of  dara  will  iilso  yield 
different viewable  areas.  For  the record, the method 
of poinr-ro-poinr  dererminarion across a  rectangular 
grid is  used  here (Fisher 1993). 

Generalization operators 

Generalizing the  DEM 
It  is easy ro  envisage many alternative approaches ro 
the generalizarion  of a  gridded  terrain  daraser.  T h e  
methods  used  here  are  enrirely  based  on  rasrer 

Figure  2.  a) a  Digiral 
Elevarion  Model 
(DEM) of a parr  of 
the Darrrnoor  resr 
area, and b)  the 
viewshed  from  the 
mid-point of rhe 
previous (grey areas 
are in-view,  and rhe 
view  point is  ar  rhe 
cenrre of rhe area). 

Propagating  effects of database generalization  on  the viewshed 

Figure 3. T h e  
variable size kernel 
for generalization. 
When m  = 2, then 
cells  1-4  form the 
kernel, when  m  = 3 
then cells  1-9, 
when  m  = 4 cells 
1-16,  and when  m 
= 4 cells  1-25. 

and 

nearest 

neighbour 

filtering. They d o  not include any surface modelling 
methods.  Another  approach  is  to  resample  using 
one  of  a  number  of  well-known  algorithms, 
including 
bilinear 
interpolation.  These  methods,  however,  are 
generally  reserved  for  the  transformation  of  one 
gridded dataset  to another where the orientation of 
the grid varies,  as well  as  the size of the grid. Other 
approaches  to  generalizing  the  grid  use  a  more 
regular  geometric  approach,  and  are  investigated 
here. 

Two  primary  types  of generalization are used. 
T h e  first  type  finds values  in  the original  DEM o n  
a  basis  of  regular  spacing,  while  the  ochers  take 
summary statistics from within a kernel  area. 

Regular spacing 
T h e  simplest  method  of  generalization  is  to  take  a 
value  at  a  regular spacing,  rn, so  that  the  values  in 
the derived  DEiM are every rnrh values  in x and y  in 
the  original  DEM.  I f  rn  =  2,  then  there  are  4 
possible  realizations  of this process.  ZJ  =  z,,  then  zd 
= z2, then  zd  = z,,  and  finally zd  = z g  (where z,,  z,, 
z,,  and 24 refer  to values  in  Figure  3, and zd  is  the 
value  in  a  realization  of the generalization process). 
If rn =  5, then  there are 25 different possible values 
of zd  (Figure 3). 

Summary statistics 

Mean 
Within  the  kernel  area  the most  obvious summary 
statistic  is  the mean.  For any generalization there is 
only one value here.  If rn = 2, then zd  is  defined  in 
Equation  1. 

And  the more general case is stated in  Equation 2. 

z d   =  Ek1 

- 

n 

PI 

where  [z ] is  the  set  of  elevation  values  within  the 
kernel  area, and n  is the size of the set. 

Maximum and minimum 
Two  further generalization  operators are defined in 
Equations 3 and 4. These are simply the maximum 
and minimum values within  a kernel. 

zd  =  max  [z] 

zd  =  min [z] 

[31 

[41 

Maximum deviation fiom the mean 
Finally, the value of the elevation which is the largest 
deviation  from  the  mean  within  the  kernel  is 
recorded  (Equation  5).  Although 
is  not 
necessarily  an  obvious  operator,  it  preserves  high 
and  low  points  in  the  landscape  which  are  very 
important  for  the  area  of  the  viewshed  (Fisher 
1991),  and  it  also  bears  considerable similarity  to 
[he widely used  Douglas-Peucker  line generalization 
algorithm  in  the  types  of  feature  it  will  preserve 
(Douglas and Peucker  1973). 

this 

Generalizing  the  viewshed 

For comparison  with derived  viewsheds  at multiple 
levels  of  generalization  it  is  necessary  to  have  a 
generalization of the original viewshed.  It should be 
recalled  that  the viewshed  treated  here  is  a  binary 
phenomenon;  any cell can only be treated  as being 
in-view or out-of-view.  Three different strategies are 
used: 

All 
A  cell  in  the generalized  dataset  is  taken  to  be  in- 
view  if all cells  in the kernel  are in-view.  Otherwise 
it is out-of-view. 

Majority 
A  cell  in  the generalized  dataset  is  taken  to  be  in- 
view if the majority of cells in the kernel are in-view. 
Otherwise it  is  out-of-view.  Where there  is  an. even 
number of cells in the kernel the majority is taken as 
nl2 + l .  

71 

P Fisher 

Any 
A  cell  in  the  generalized  dataser  is  taken  to  be  in- 
view  if  any cell  in  the  kernel  is  in-view.  Otherwise 
the generalized  cell  is  our-of-view. 

Generalizing the  viewpoint 

T h e   cell  considered  to  be  the  viewpoint  in  any 
generalization is  the generalized  cell which  contains 
the  Viewpoint  in  the  ungeneralized  DEM.  This 
approach  has  the  advantage  over  others  that  the 
viewpoint  is  always  at  the  centre  of  a  cell  in  any 
dataset, and so coincides geometrically with a height 
the  corresponding  DEM.  T h e   DEM 
value  in 
elevation at the Viewpoint  is always known 3s part of 
the  generalized  DEM  and  never  inferred.  Many 
possible  realizations  of  che  original  viewshed 
correspond to the viewshed at a particular scale, and 
different  GIS  treat  the  viewpoint  very  differently. 
Therefore,  what  is  reported  here  must  be  regarded 
simply as one possible  re5uit. 

Experimental procedure 

For  the research  reported  here two Ordnance Survey 
DEMs from  the United  Kingdom were used: one to 
the  west  of the  Malvern  Hills  (including views  and 
foothills  of those  hills;  Figure 4 ) ,  and one including 
the south-east part of Darrmoor. Each is a 20 x 20 km 
tile  of  the  national  elevation  coverage  of  I:50,000 

Figure 4. T h e  active  area of the Malvern dataset, 
showing the  100 test  viewing points. 

72 

gridded elevation  data recording elevations at 50  m 
intervals.  Therefore,  each  is  401  x  401  values. 
Within  each  test  area  100  random  points  were 
selected within an active  area which excluded a 60- 
cell  buffer  from  the edge of  the  tile  (Figure 4). A 
region  120 x  120 cells was  then taken  around each 
point.  In  every  case,  elevation  data  were  available 
for  all  cells  due to the  buffer zone. T h e  60,60 cell 
within each area was taken as the Viewpoint  and the 
viewshed  determined.  These  are  binary  products 
the  original 
which  are  referred 
viewsheds. 

to  below  as 

Generalizations  were  then  made of the D E M  
itself,  the  original  viewshed  and  the  viewpoint,  so 
that viewsheds  could be determined.  For simplicity, 
the original  D E M s  are  generalized  so that  pixels  in 
the  derived  datasers  map  exactly  to  kernels  in  the 
original.  T h e   generalizacions  included  0.5,  0.33, 
0.25, and 0.2  times  reductions,  giving  D E M  arrays 
of 60  x  60, 40  x  40, 30  x  30  and  20  x  20. T h e  
generalization  procedures  are  discussed  in 
the 
previous  section. 

A  number  of  sratisrical  comparisons  were 

made: 
I  T h e  bias  (Equxion 6) and error  (Equation 7) OF 

the viewshed  in  the generalized  DEMs was 
derived  from a  comparison with  the area of the 
original  viewshed. 

n 

whereAi is  the area of the viewshed  in  the ith 
generalization  of the  DEM; and A  is  the area of 
the original viewshed. 

2  T h e  widely  used  kappa coefficient of agreement 
(Congalton et a1  1983) was determined for  the 
viewshed  in  the generalized  DEMs and a 
number of alternative generalizations of the 
original viewshed. Kappa varies  from  1  to 0; the 
former indicating  perfect  agreement benveen 
the nvo viewsheds.  and the latter  indicating 
perfect  disagreement. 

Propagating effects of dotobase generalization on  the viewshed 

The sampling, generalization  by  all  methods, 
generation  of  the  viewshed  and  calculation  of 
summary  and  comparative  statistics  of 
the 
viewsheds,  were  all  integrated  together  with  the 
viewshed algorithm, and coded in Turbo Pascal 7.0. 
T h e  program ran on a Pentium PC which had been 
checked for faults on the processor.  Idrisi v 4.1  was 
used  in  support  of  the  analysis  to  view  data  at 
different 
resolutions,  and  data  analysis  a n d  
visualization  was  performed  with  Excel  5.0  and 
single purpose programs written  by the author. 

Results 

Visualizations 
T h e   nature  of 
in 
the  problem  can  be  seen 
examination  of 
a  few  realizations  of  a  single 
viewshed.  Figure 
2a  shows  the  original  D E M   for 
one of the test viewing  locations on  Dartmoor, and 
Figure  2 b   shows  the  original  viewshed  for  that 
DEM.  Among  the  possible  viewsheds  on  the 
Dartmoor rest  area,  i t   has  one of the largest  visible 
areas. In  Figure 5  the set of four different  reductions 
by  0.5,  0.33,  0.25,  and  0.2  of  the  DEM  by  the 
maximum  operator  are  presented;  note  that  the 

Figure  5.  Four generalizations of the D E M  shown 
in  Figure  2a by  the  maximum within  kernel. 
Working across and then  down the reduction  in 
resolution  is  by 0.5, 0.33, 0.25,  and 0.2. T h e  
shading scheme is exactly  the same as is  used  in 
Figure 2a. 

Figure 6 .  Viewsheds derived from the D E M s  shown 
in  Figure 5 ,  themselves derived from the original 
D E M  by  taking the maximum within  kernel. 
Working across and then down the reduction  in 
resolution  is  by 0.5, 0.33, 0.25, and 0.2. 

greys  used  in  the  figure  correspond  to  exactly  the 
same height  intervals as  d o  those  in  Figure  2a. T h e  
main  visual  effects  are  unsurprising,  and  include 
pixelizing  of  the  image,  preservation  of  the valleys, 
and  creation  of  some  closed  basins  (pits) at  the 
coarser resolutions. T h e  viewsheds  derived from the 
generalized  DEMs  are  shown  in  Figure  6.  Some 
patterns  seem  to  be  preserved  from  the  original 
viewshed  (Figure  Zb),  particularly  in  the  highly 
visible  high  ground  to  the  north-east,  but  there  is 
little  agreement  elsewhere,  such  as  to  the  south- 
west.  T h e   level  of  agreement  with  the  original 
viewshed decreases with coarsening of the resolution 
of the DEM. 

in 

(darker) 

Four  alternative  reductions  of  the  D E M   by 
Maximum  Deviation  from  the Mean  are shown  in 
Figure  7.  Larger  areas  are shown  as  being  at lower 
elevations 
the  comparable 
than 
resolution  D E M   by 
the  maximum  operator, 
reflecting  the  action  of  the  two  operators.  The 
valleys  can  be  easily  traced  over  a  larger  distance 
than  in  the  maximum,  although  again  pits  are 
created which are not present at the finer resolution. 
The viewsheds  derived from these  DEMs (Figure 8) 
show an overall pattern which is more faithful to the 
original  viewshed  than  the earlier  one, but some of 

73 

P  Fisher 

Figure 7. Four generalizations of the DEM shown 
in  Figure 2a by  the maximum deviation  from  the 
mean  within  kernel.  Working across and then 
down the reduction  in resolution  is  by 0.5, 0.33, 
0.25, and 0.2. T h e  shading scheme is  exactly the 
same as is  used  in  Figure 2a. 

Figure  8. Viewsheds derived from the DEMs 
shown  in  Figure 7, which  are derived from the 
original DEM  by taking the maximum deviation 
from the mean  within  kernel. Working across and 
then down the reduction  in  resolution  is  by 0.5, 
0.33, 0.25,  and 0.2. 

the out-of-view  areas  to  the  north-east  are  less well 
represented. 

In short, patterns of land in view and the area 
of  that  land  are  different  when  derived  from  the 
different versions  of the DEM at a single resolution. 
O n e  would appear to be better, another not so good. 
Predictably,  neither reduction  in resolution provides 
a  particularly  good  representation  of  the  original 
viewshed,  although  in  this  instance  both  are 
probably ‘acceptable’ for some purposes. 

Generalizing the original viewshed 
As  noted  above,  three  different  generalizations  of 
the original  viewshed  were derived. These are based 
on  all,  a  majority  and any of  the pixels  within  the 
kernel  being  in  view  in  the original. T h e  results  of 
this  analysis can  best  be seen  as a scatterplot  of the 
area of the generalized  viewshed plotted  against  the 
area  of the original.  Figure 9 shows these  plots  for 
the 0.5 and  0.2  times  reductions  of  the  Dartmoor 
area;  results  for the Malvern  rest  area  are  identical. 
In  both  reductions  it can  be seen  that  the majority 
operator is  close  to a gradient of  1,  and that  in  the 
0.2  times reduction it is closer  than the others. Also 
values  associated  with  the  majority  operator  at  0.2 

74 

times  reduction  have  a  very  restricted  envelope 
compared  with  that  covering  the  any  and  all 
operators. 

T h e   same  pattern  of  results  is  reflected  in 
Table  1,  where  the correlation  between  the area of 
the  original  and  generalized  viewsheds  is  reported 
together with  the mean  bias and error as a  result  of 
the generalization  for both  test  areas.  It  can  be seen 
that  the  correlation  for  the  majority  operator  is 
always close  to  1.0, and that it has much the lowest 
values of bias and error at all levels of generalization. 
In summary, the area of the viewshed derived 
by  the majority  operator  is  predictable,  and  is  very 
similar  to  the  original  area,  even  over  large 
resolution changes, while the values as a result of the 
any and  all  operators  are  not  so  predictable  at  the 
larger  resolution  changes.  Furthermore, the  values 
of the majority operator  are very  close to the values 
for 
the  original.  Subsequent  analyses  which 
the  arrangement  of  cells  within  the 
investigate 
viewshed  therefore  compare  patterns  with  the 
majority generalization. 

The  area of  the  viewshed 

When 

the  viewshed 

is  determined  over 

the 

Propagating  effects of database generalization  on the viewshed 

(4 

0.5  x reduction 

(b) 

0.2 x reduction 

f 5 “1 

50 

1 

I 

O

I

 

0 

A 

00 
B 
A 
A 

0

5

1

0

2

5

1
0
Area of original v

J

5
2
i m  

i-- 
3
D

5

 

0 

0 

n 

0 

0 

8 

A 
A 

- 

tl 

A 

Figure 3. Selected scatterplots of the area of the 
original viewshed  versus the area of generalized 
binary viewshed of the Malvern area. 

it  with 

generalized  DEMs,  there  are a  number  of ways  to 
compare 
the  original  viewshed.  Two 
parameters  are examined  here:  the  area  visible,  and 
the kappa  coefficient of agreement. T h e  area of  the 
viewshed  at  different  resolutions  is  easily  dete- 
rmined, and in Table 2  the mean  bias  (Equation  1 )  
and error  (Equation  2) are given  for both  test areas 
at  all  four  resolutions.  In  addition, the  correlation 
coefficients  between  the  two  areas  are  reported. 
T h e   ‘best’  generalization  is  that  which  yields  the 

Table  1.  Bias and error in  generalizations of the 
original  viewshed. 

smallest  bias  and  error and  the  largest  correlation. 
Selective  scatterplots  of  the  area  visible  in  the 
original  versus  various  different  generalizations  are 
given  in  Figure  10. T h e  table and  figure  are largely 
supportive  of  each  other,  being  re-expressions  of 
much the same thing. 

Table 2 is divided by the amount and methods 
of  generalization.  The  values  reported  for  regular 
spacings  are  the  minimum  and  maximum  area 
determined  among  the  4, 9,  16, and  25  possible. 
There  is  considerable  variation  among  these,  as is 
reflected  in  the error measures which are always the 
largest  and smallest of any other generalization.  O n  
the other hand, the correlation coeficienrs for these 
are on  the  whole  both  poorer  than  the best  of  the 
summary statistic values. 

Among 

the 

summary 

statistics 

of 

CorrdatiOn 

 

Comktion 

Generalizotioils 

M o l v e r r i  

Dartmoor 

0 . 5 ~  

0 . 3 3 ~  

0 . 2 5 ~  

0.2x 

Any 
Majority 
All 

Any 
M a  lor i ty 
All 

Any 
Maiority 
All 

Any 
Malority 
All 

Bias 

3  39 
-1.19 
-3  60 

5.98 
0.09 
-6.2 1 

8.36 
-0  56 
-7  93 

10 54 
-0  29 
-9  131 

E m  
3.78 
1.34 
4.06 

6.58 
0.43 
7.02 

9.12 
0.77 
8.99 

11.46 
0.70 
0.39 

0 993 
0 997 
0 985 

0 983 
0 999 
0 943 

0 971 
0 997 
0 881 

0 958 
0 997 
0 803 

Bias 

2.42 
-0.87 
-2.48 

4.50 
0.00 
-4.45 

6.46 
-0.50 
-5.96 

8.30 
-4.26 
-6.99 

E
m
2.70 
0.97 
2.79 

4.97 
0.24 
5.04 

7.10 
0.63 
6.75 

9.09 
0.61 
7.92 

0.997 
0.94‘9 
0.993 

0.993 
0.979 
0.972 

0.988 
0.998 
0.940 

0.980 
0.995 
0.896 

75 

P Fisher 

generalizations,  21  out  of  the  24  measures  of 
accuracy  show  the  maximum  deviation  from  the 
mean  to give the best  performance. T h e  correlation 
coefficients and mean errors yielded by this method 
are  always  the  best  of  those  reported.  The  bias  is 
sometimes smaller  for  some other  method  (in  two 
cases  the  maximurn  within  kernel  and  once  the 
minimum  within  kernel).  This  relationship  is 
apparent in  Figure  10. Two scatterplots  from  those 
which  can  be  generated  from  the  maximum 
deviation  from  the mean are shown  for 0.5 and 0.2 
generalizations  of  the  Dartmoor  area  (Figure  1Oc 
and d). The distribution of points is very close to the 
leading diagonal of the plot  in both cases, especially 

Figure  10. Selected scatterplots  of the area visible 
in  the original viewshed versus that visible in 
generalizations. 

when  compared with  the 0.33 and 0.2  (Figure  10a 
and b) scatterplots for the minimum within  kernel. 
The  latter  of  these  shows  an  enormous  spread  of 
values  which  tends  to  be  more  rypical  of  the  0.2 
generalizations  than  that  yielded  by  the  maximum 
deviation  from  che  mean.  The 0.5 generalizations 
are generally  relatively well  correlated,  as  is  shown 
by  the correlation  coefficients,  but  this  can  rapidly 
deteriorate,  as  in  the  case  of  the  0.33  reduction 
shown in Figure  10a. 

The  arrangement of  the  viewshed 

The  kappa  coefficient  of  agreement  between  two 
sets  of  data  ranges  from  0  to  1, where  1  reflects 
perfect  correspondence in  the  arrangements and  0 
disagreement.  It  has  been  widely  applied  to 
examining  the  confusion  matrix  in  remote sensing 
(Congalton et al  1983). Here the same approach is 

__ 

0.33 x  reduction 

(b) 
- - ~ - _ _ _ _ ~ _ _  

0.2 x  reduction 

0” 

0 

0 0  

0 

> 

(c) 

50 

c - 5  401 
’Z 

0.5 x reduction 

5 

10 

15 

20 

Area of original viewshed 

(4 
T---  0 

0.2  x reduction 

- 

- 

Oooo  8 

olbo  0 

0

’

30 
 

50 

-- 

40 

20 

10 

i 

0 

0 

0 

I 

0 4  

0 

0 

10 

20 

30 

Area of original viewshed 

5 

10 

15 

20 

Area of orlginal viewshed 

76 

Propagating  effects of database generalization  on the viewshed 

Generalizations 

0 . 5 ~  regular  M a x  
spacing  Min 

summary  Max 
statistics  Min 

0.33~ regular  Max 
spacing  Min 

summary  M a x  
statistics  Min 

0.25~ regulor  Max 
spacing  Min 

summary  M a x  
statistics  Min 

0 . 2 ~  regular  Max 
spacing  Min 

summary  Max 
statistics  Min 

Mean 
MaxDev 

Mean 
MaxDev 

Mean 
MaxDev 

M w n  
MaxDev 

Bias 
6.17 
1.14 
4.04 
4.27 
4.52 
3.39 

11.39 
2.28 
6.85 
8.5 1 
7.87 
6.60 

16.34 
3.34 
9.55 
12.61 
11.22 
9.65 
20.75 
4.15 
12.45 
15.83 
14.00 
12.77 

8.17 
3.32 
6.56 
6.63 
6.76 
4.02 

13.68 
6.42 
9.34 
11.25 
10.10 
8.08 
18.89 
7.42 
12.24 
15.86 
14.01 
11.23 

23.23 
8.08 
15.88 
18.96 
17.12 
14.60 

0.802 
0.91 3 
0.809 
0.823 
0.830 
0.967 

0.706 
0.725 
0.768 
0.688 
0.768 
0.884 
0.600 
0.673 
0.658 
0.600 
0.675 
0.844 

0.526 
0.65 1 
0.542 
0.580 
0.607 
0.790 

Dartmoor 

3 .a 
0.47 
2.18 
2.03 
2.23 
2.1 1 
7.52 
1.03 
4.50 
4.57 
4.74 
4.08 

12.26 
1.76 
7.46 
7.25 
7.38 
6.29 

6.60 
2.30 
9.78 
0.26 
0.14 
8.97 

E m  
4.34 
1.82 
3.18 
3.12 
2.97 
2.58 

8.75 
3.33 
6.05 
6.59 
6.17 
4.85 

14.26 
4.88 
9.40 
9.48 
9.12 
7.53 

18.87 
5.5 1 
12.20 
12.62 
12.38 
10.57 

Comktion 
0.956 
0.965 
0.946 
0.957 
0.9.72 
0.992 

0.871 
0.897 
0.874 
0.880 
0.910 
0.979 

0.7 I2 
0.8 12 
0.784 
0.806 
0.836 
0.955 

0.648 
0.738 
0.705 
0.685 
0.706 
0.927 

Table 2. Error measures for the area of the viewshed 
in  generalizations of the viewshed as compared  with 
the area in  the original viewshed. The ‘best’ results 
(see text) in each group are shown in bold. 

used.  Kappa  is  determined  for  2  x  2  tabulations 
which,  for  a  particular  resolution,  compares  the 
the  generalized  binary 
visibility  of  pixels  in 
viewshed,  as  determined  by  the  majority  method, 
with  that  determined  through  the  DEM  when 
generalized  by  one  of  the  methods  under  test. 
Summary  results are reported  in Table 3, where the 
maximum,  minimum  and  mean  values  of  the 
coefficient for the  100 viewpoints in each study area 
are  reported. The  maximum  and  minimum  values 
are  reporting  the  best  and  the  worst  agreements 
between  patterns  in  any  situation.  The  best 
generalization method should yield the largest value 
of kappa at any reduction. 

in  any  single  generalization 

The results for regularly spaced samples report 
the  agreements  for  the  maximum  and  minimum 
areas 
test.  The 
maximum  viewshed is  the best  in  22  out of the 24 
values reported. In other words, the largest viewshed 
generated  by  regular  spacing  from  the  kernel  area 

yields  the  best  agreement  in  the  spatial  pattern  of 
the viewshed among all  other generalizations of the 
DEM.  On  the  other  hand,  the  minimum  area 
viewshed  always  yields  the  worst  agreement.  This 
method of generalization provides an envelope of all 
other  values.  Indeed,  in  the  0.2 generalizations  of 
both  the  Malvern  and Dartmoor  test  areas,  regular 
spacing  yielding  the  minimum  visible  area  gives 
almost 
the  original 
viewshed (0.054 and 0.020). 

total  disagreement  with 

In  17  out  of  24  summaries,  the  maximum 
deviation within kernel yields the best agreement. In 
five  cases  the  mean  is  best,  and the  maximum  and 
minimum  within  kernel  are  best  once each.  With 
0.2 generalization  the worst  levels of agreement are 
again very poor  (0.015 in  the 0.2 generalization  of 
the Malvern area by minimum within kernel). Both 
the  mean  and  the  best  levels  of  agreement  in  all 
situations are, however, quite acceptable. 

Comparison of  the  arrangement and area of 
the  viewshed 
Figure  11  shows  eight  scatrerplots  of  the  kappa 
coefficient of agreement against the ratio of the area 
visible in  the  original  viewshed  to  that  determined 

77 

Genemlirations 

Mobern 

Dartmoor 

P  Fisher 

0.5 x 

regular  Max 
spacing  Min 
summary  Max 
statistics  Min 

0.33 x  regulor  Max 
spacing  Min 
summary  Max 
statistics  Min 

0.25 x  regular  Mox 
spacing  Min 
summary  Max 
statistics  Min 

0.2 x 

regular  M a x  
spacing  Min 
summary  Max 
statistics  Min 

Mean 
MaxDev 

Mean 
MaxDev 

Meon 
MaxDev 

Mean 
MaxDev 

Maximum 
0.899 
0.850 
0.878 
0.910 
0.902 
0.899 

0.886 
0.805 
0.868 
0.856 
0.873 
0.864 

0.856 
0.748 
0.833 
0.816 
0.831 
0.812 

0.833 
0.71 1 
0.785 
0.785 
0.825 
0.750 

Meon 
0.744 
0.591 
0.674 
0.661 
0.692 
0.725 

0.694 
0.465 
0.607 
0.562 
0.624 
0.646 

0.601 
0.353 
0.496 
0.447 
0.510 
0.528 

0.555 
0.288 
0.446 
0.393 
0.458 
0.469 

Minimum 
0.285 
0.201 
0.23 1 
0.2 17 
0.222 
0.263 

Maximum 
0.924 
0.845 
0.903 
0.879 
0.890 
0.924 

0.235 
0.106 
0.182 
0.158 
0.193 
0.196 

0.170 
0.053 
0.106 
0.102 
0.133 
0.1 18 

0.174 
0.054 
0.082 
0.01 5 
0.109 
0.118 

0.877 
0.796 
0.864 
0.853 
0.858 
0.877 

0.864 
0.695 
0.779 
0.795 
0.829 
0.795 

0.827 
0.61 3 
0.8 13 
0.775 
0.815 
0.767 

Mean 
0.818 
0.688 
0.760 
0.769 
0.784 
0.802 

0.772 
0.540 
0.666 
0.675 
0.705 
0.728 

0.688 
0.406 
0.559 
0.555 
0.593 
0.615 

0.634 
0.320 
0.487 
0.484 
0.528 
0.533 

Minimum 

0.66 1 
0.135 
0.371 
0.414 
0.41 1 
0.440 
0.480 
0.162 
0.20 1 
0.316 
0.278 
0.480 

0.427 
0.053 
0.126 
0.245 
0.180 
0.379 

0.238 
0.020 
0.047 
0.067 
0.059 
0.193 

Table 3. Kappa coeffrcients of agreement  between 
the generalized version  of the original viewshed and 
the viewshed determined over the generalized 
DEM. The 'bar' results  (see text) in all groups of 
results are shown  in  bold. 

to  be  visible  on  any  generalized  DEM.  These  are 
selected to show the  range of patterns.  Possibly the 
best  pattern  is  that  of  the  maximum  of  regular 
samplings (Figure 1 l a  and b). The kappa coefficient 
of this  is  almost independent  of the ratio, although 
at  the  largest  generalization  there  is  an  obvious 
gradient and the points in the scatterplot are rather 
spread  out.  The  reverse  is  apparently  true  of  the 
minimum of the regular samplings (Figure 1 I c  and 
d). Here the ratio appears  uniformly  low for a large 
range  of  kappa.  T h e   x  axis  of  the  graph  is  very 
distorted,  however,  by  an  extreme  outlier.  At  best 
the  partern  shows  an  inverted  V  shape.  The same 
shape  is  apparent  in  the  plot  for  minimum  within 
kernel  (Figure  l l e   and  f). At  both  amounts  of 
generalization  shown,  the V  climbs  from  relatively 
close to the origin, peaks towards kappa  1 and ratio 
1, and then  drops. This same  inverted V  pattern  is 
illustrated  here, 
apparent  in  scatterplots  not 

78 

including all  levels  of  generalization  and  those  for 
maximum and mean within kernel.  It is a very poor 
the  distribution.  T h e   only 
characteristic  of 
generalization  method  for which  this  pattern  is  not 
observable  is  the  maximum  deviation  from  the 
mean.  At  small  generalizations  most  points  are 
clustered at large ratio and large kappa with a single 
outlier  (Figure  1 l g  and h), and any trend  line has a 
positive gradient, with  no values over  1 in either the 
ratio  or  kappa.  With  increasing  generalization  the 
range  of  values  increases  in  both  kappa  and  the 
ratio, but the pattern  remains consistent. 

Conclusions 

A  number  of  conclusions  can  be  drawn  from  the 
current work. For the viewshed it would appear that 
the  generalization  of  the  binary  viewshed  to  ocher 
grid  resolutions  is  best  performed  by  determining 
those cells at the target  resolution  with the majority 
of  visible  cells.  Other  immediately  apparent 
methods of generalization do nor yield results which 
match the area and pattern  of the original viewshed. 
Generalization  of  the  DEM  yields  many 
alternative  possible  viewsheds.  Regular  spacing  of 

'I 

Propagating  effects of database generalization  on  the viewshed 

Figure  1 1.  Selected scatterplots of the kappa coefficient of agreement against the ratio of rhe area of rhe 
viewshed in  the generalized DEM to the original viewshed. 

(a)  0.5  x reduction 

Maximum of regular 

(b)  0.2 x  reduction 

Maximum of  regular 

p  0.2 ii 0.4 I 

0 

0 

0.4 

0.2 t  0 

(d)  Minimum of regular 

0.5 

0 

0.2 

0.4 

0.6 

0.8 

(c)  Minimum of  regular 

7

-

-

1 

1

 

 

0 

2 

4 

6 

2 

4 

6 

0

 

1
I 
-1 
8 

(e)  Minimum within kernel 

(f)  Minimum within kernel 

IT------- 

---I 

1

~ 

1 I 

1 
1 

0,: I

06 

0.4 

0.2 

0 
0 

0.2 

-- 
0.8 

- -  
0.6 

0.4 

-- 

 

-

l

0.8 4 

0 

0 

the mean within kernel 

0 2  

-- 

0 

 

-

0

0.4 

0.2 

0 
Ratio of area of reduced to original 
viewshed 

0 6  

0 8  

79 

E  0.8 -- 
- 
a? 
5 0 6 -  
U 
0.4 -- 

0 

n n 
2  0.2 -- 

0 

0 

0.5 

1 

1.5 

2 

(9)  Maximum dev from 

the mean within kernel 

1 ,  

0 

I 

1 

0: 
0 

0 5  

Ratio of area of reduced to original 
viewshed 

P Fisher 

rhe  kernel  area  yields  borh  the  best  and  worsr 
esrimares  of  the visible area. T h e  result  is  therefore 
unpredictable,  and although the method is  fast and 
convenienr, it  is  nor  ro  be  recommended  as  a  basis 
of  generalizarion.  Among  rhe  srarisrical  summaries 
of  a  kernel  area,  generalization  of  the  D E M   by 
determination  of  the  maximum  deviation  within 
the  kernel  yields  the  viewshed  which  besr  reflects 
borh  rhe  area and  arrangement of  rhe  visible  area. 
T h e  resulrs  are all  most stable and  most  frequenrly 
the besr  for  rhis merhod.  It  is  rherefore  the method 
ro  be  recommended  (of  those  rested)  in  any 
siruarion  where  a  DEM  requires  generalizarion 
(such as dara compression), and rhe viewshed  is  rhe 
derived  product  which 
the 
invesrigacor's  inrerest. T h e  resulting DEM  may not, 
however,  be  the  besr  for  all  ocher  outcomes.  The 
creation  of  closed  basins  (Figure  7),  for  example, 
means  rhar  ir  would  be  very  poor  for  watershed 
delineation. 

is  uppermost 

in 

Finally  ir should be  nored  that  generalizarion 
of rhe DEM can occur which  results  in  only a small 
disruption  of  either  the  area  or  rhe  pattern  of  rhe 
viewshed,  but  injudicious  selecrion  of  method  for 
generalizarion  can  have  a very  delererious  effecr  on 
rhese  paramerers.  In  orher  words,  the  viewshed  is 
very sensitive  to resolution  changes in rhe database, 
unless  an  appropriare  merhod  of  generalizarion  is 
used. 

As  srared  in 

the  inrroducrion,  very  lirrle 
research  is  reporred  on  propagaring  the  effecrs  of 
alrernarive  generalizarions of  spatial  darabases,  and 
the  research  reporred  here  may  advise  caution  in 
interpreting  rhe  resulrs  of  inreresring  research  into 
rhe effecr of darabase scale change on the srabiliry of 
model  outputs.  For  example,  Brown  et  al  (1993) 
show  char  when  the  dara  inpur  ro  rhe ANSWERS 
pollurion  model is subjecred ro generalizations  from 
a pixel size of 30 x 30 m  ro 600 x 600 m, rhe ourpur 
changes.  Berween  resolutions  of  120 x  120 m  and 
180 x  180 rn a serious dereriorarion in  results occurs 
such rhar  [hey become unreliable.  Is rhis a feature of 
rhe  resolurion  of  rhe  dara  or  of  the  method  of 
generalizarion? Is ir possible rhar another method of 
generalization  may  cause  rhe  ourpur  ro  be  reliable? 
T h e  conclusion  from  rhe  presenr  research  suggesrs 
thar  rhere  may  be  merhods  of  generalization  nor 
explored  by  Brown  er  al  (1993) which  do nor cause 
rhe same  sensiriviry  in  rhe  model.  Research  similar 
ro  rhar  reporred  here  can  be  envisaged  for  almosr 

80 

ir 

rhe  possible 

any orher combination  of spatial  dara  and  derived 
is  crucial  for  very  many 
product.  Indeed. 
applications  rhar  we  know  besr  how  ro  generalize 
borh  categorical  data  (for  example,  the  binary 
viewshed),  and  continuous  dara  (for  example,  the 
consequences  of 
D E M ) ,   a n d  
generalization. While the resulrs  reporred here seem 
likely  ro  be 
quire  conclusive,  and  are  very 
generalizable  ro  orher geographical areas, so long as 
the  viewshed  is  of  interesr,  there  is  absolurely  no 
guarantee  rhar  eirher  the recommended  merhod  of 
generalization  should  be  the  same  for  all  derived 
products,  or  rhar  rhere  is  nor  a  berter  method  for 
generalizing  rhe  DEM  when  rhe  viewshed  is  of 
inrerest. 

Acknowledgements 

I  would particularly like ro thank Jo Wood and Babs 
Burrenfield  for  some  insighrful  suggesrions  in  the 
course of rhis work. 

References 

Brown  D G, Bain  L  and Walsh  S J  1993 Response 
of a distributed  watershed  erosion  model  ro 
variations  in  rhe  inpur  dara  aggregarion 
levels. Computers & Geosciences 19: 499-503 
Burrenfield  B P and McMasrer R  B (eds)  1991 Map 
Generalization: Making  Rules f i r  Knowledge 
Representfition. London, Longman 

Chang K-r  and Tsai  B-w  1991 T h e  effect  of  D E M  
resolurion  on  slope  and  aspect  mapping. 
Cartograp by  and  Geograp hir  Information 
Systems  18: 69-77 

Congalton  R  G,  Oderwald  R  G  and  Mead  R  A 
1983  Assessing  Landsar 
classificarion 
accuracy  using discrere mulrivariace  analysis 
techniques.  Photogrammetric 
staristical 
Engineering and Remote Sensing 49: 79-87 

Douglas  D A  and  Peucker  T  1973 Algorirhms  for 
the  reduction  of  rhe  number  of  poinrs 
required  ro  represenr  a  digirised  line  or  its 
caricarure.  Canadian  Cartographer  10: 
1 12-22 
P  F  1931  Firsr  experimenrs  in  viewshed 
uncerrainry:  The  accuracy  of  rhe  viewshed 
area.  Photogrfimmetrir  Engirrerring  and 
Remotr Sensing 57:  132 1-7 

Fisher 

Prcpagating  effects of database generalization  on the viewshed 

Fisher  P  F  1992  First  experiments  in  viewshed 
uncertainty:  Simulating the  fuzzy viewshed. 
Photogrammetric  Engineering  and  Remote 
Sensing 58: 345-52 

Fisher  P  F  1993  Algorithm  and  implementation 
analysis. 
Geographical 

uncertainty 
International  Jorrrnal 
Information  System 7: 33 1-47 

viewshed 
of 

in 

Isaacson D L and Ripple  W J  1990 Comparison of 
7.5-minute  and  1-degree  digital  elevation 
models.  Photogrammetric  Engineering  and 
Remote Sensing 56:  1523-7 

JoSo E  M  1995 The importance of quantifying  the 
effects  of  generalization.  In  Miiller  J  C, 
Lagrange  J  P  and  Weibel  R  (eds)  CIS a n d ,  
Generalization:  Methodology  and  Practice. 
London, Taylor & Francis:  183-93 
McMaster  R  B  1987 T h e  geometric  properties  of 
simplification.  Geographical 

numerical 
Analysis 19: 3 3 0 4 6  

Miiller J  C, Lagrange J  P  and Weibel R  (eds)  1995 
G I s   and  Generalization:  Methodology  and 
Practice. London, Taylor  & Francis 
Painho  M  1995 The  effects  of  generalization  on 
atrribute  accuracy  in  natural  resource  maps. 
I n   Miiller J  C,  Lagrange J  P  and  Weibel  R 
(eds)  G I s  and  Generalization: Methodology 
and  Practice.  London,  Taylor  &  Francis: 
194-206 

Reperto  P  L  1996  Revised  universal  soil  loss 
equation:  esrimation  at  the  landscape  scale 
thesis, 
using  GIs.  Unpublished  MS 
Department  of  Earth  Sciences,  Montana 
Stare Univeristy 

Wilson J  P,  Inskeep W  P,  Wraith J M and Snyder R D 
1996  GIS-based  solute  transport  modeling 
applications: Scale effects of soil  and climate 
databases.  journal  of Environmental  Quality 
25: 445-53 

81 

