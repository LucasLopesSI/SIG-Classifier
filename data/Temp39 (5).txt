International Journal of Geographical Information
Science

ISSN: 1365-8816 (Print) 1362-3087 (Online) Journal homepage: http://www.tandfonline.com/loi/tgis20

Characterizing mixed-use buildings based on
multi-source big data

Xiaoping Liu, Ning Niu, Xingjian Liu, He Jin, Jinpei Ou, Limin Jiao & Yaolin Liu

To cite this article: Xiaoping Liu, Ning Niu, Xingjian Liu, He Jin, Jinpei Ou, Limin Jiao & Yaolin Liu
(2017): Characterizing mixed-use buildings based on multi-source big data, International Journal of
Geographical Information Science

To link to this article:  https://doi.org/10.1080/13658816.2017.1410549

Published online: 01 Dec 2017.

Submit your article to this journal 

View related articles 

View Crossmark data

Full Terms & Conditions of access and use can be found at
http://www.tandfonline.com/action/journalInformation?journalCode=tgis20

Download by: [RMIT University Library]

Date: 01 December 2017, At: 08:14

INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE, 2017
https://doi.org/10.1080/13658816.2017.1410549

ARTICLE

Characterizing mixed-use buildings based on multi-source
big data

Xiaoping Liu a, Ning Niua*, Xingjian Liu b*, He Jinc, Jinpei Oua, Limin Jiaod,e
and Yaolin Liu d,e

aGuangdong Key Laboratory for Urbanization and Geo-simulation, School of Geography and Planning, Sun
Yat-sen University, Guangzhou, China; bDepartment of Urban Planning and Design, University of Hong
Kong, Hong Kong; cDepartment of Geography, Texas State University, San Marcos, TX, USA; dSchool of
Resource and Environment Science, Wuhan University, Wuhan, China; ekey Laboratory of Geographic
Information System, Ministry of Education, Wuhan University, Wuhan, China

ABSTRACT
To-date few research has successfully integrated big data from
multiple sources to characterize urban mixed-use buildings. In this
paper, we introduce a probabilistic model to integrate multi-source
and geospatial big data (social network data, taxi trajectories, Points
Interest and remote sensing images) to characterize urban
of
mixed-use buildings. The usefulness of our model is demonstrated
with a case study of the Tianhe District in megacity Guangzhou,
China. The model predicted building functions at 85% accuracy
based on ground truth data from ﬁeld surveys. We further explored
the spatial patterns of the identiﬁed building functions. Most
mixed-use buildings are located along major streets. Our proposed
model can identify mixed-use buildings in a city;
information is
useful for planning evaluation and urban policymaking.

ARTICLE HISTORY
Received 3 May 2017
Accepted 24 November 2017

KEYWORDS
Mixed-use buildings;
geospatial big data; Bayes’
theorem

Introduction

Mixed-use is often deemed a necessary condition for sustainable and liveable urban devel-
opment as advocated by Jane Jacobs in key urban planning and design (Rowley 1996,
Coupland 1997). The mixing of urban activities is often associated with higher levels of job-
housing balancing, a shorter commuting distance, reduced energy consumption, improved
accessibility and walkability, and more cohesive neighbourhoods (Cervero 1996, Grant 2002,
Merlin 2014). Despite potentially negative consequences (Sperry et al. 2012), mixed-use
developments have been pursued at multiple scales, ranging from mixed-use zoning at the
neighbourhood level and large-scale commercial complexes at the block level, to multi-
functional buildings (Cao and Chatman 2016). Furthermore, mixed-use has emerged as part
of an urbanization process. For example, rapid urbanization, informal development and rural–
urban migration have led to the emergence of urban villages in China (Wang et al. 2009).
These urban villages are characterized by mixed-use buildings, which combine residential,
retailing and small-scale manufacturing under the same roof (Zhao and Webster 2011).
Measuring the degree of mixed-use is the ﬁrst step to evaluate the existing planning and

CONTACT Ning Niu
*Both the author contributed equally
© 2017 Informa UK Limited, trading as Taylor & Francis Group

niu_ning@outlook.com; Xingjian Liu

xliu6@hku.hk

Downloaded by [RMIT University Library] at 08:14 01 December 2017 2

X. LIU ET AL.

design and to plan for future urban development strategies. However, collecting information
about mixed-use at ﬁne spatial scales is usually laborious and resource intensive, involving
numerous ﬁeld surveys (Zhan et al. 2014). To facilitate identiﬁcations of mixed use buildings,
we propose a new approach to characterize mixed-use development at the building level
using multi-source geospatial data. Our new approach aims to provide a reliable and cost-
eﬀective alternative for capturing mixed-use buildings at high temporal and spatial resolu-
tions (Graham and Shelton 2013, Liu et al. 2014; Liu et al., 2015a).

Liu et al., (2015b) took a big data approach to characterizing urban dynamics and land use.
More speciﬁcally, smartphones, social media applications and vehicle GPS records all provide
useful information about urban activities. For example, the trajectories of taxis have been used
to characterize human mobility or classify land use (Veloso et al. 2011; Liu et al. 2012, Pan et al.
2013, Li et al. 2017; Liu et al., 2015b). Social media (e.g., Twitter, Facebook, WeChat and Weibo)
data are also utilized to identify city structures and explore complex human dynamics (Hasan
et al. 2013; Liu et al., 2017a; Zhan et al. 2014, Luo et al. 2016, Zhou and Zhang 2016).
Furthermore, Ratti et al. (2006) mapped intra-city population distributions based on mobile
phone signals. Similarly, Toole et al. (2012) inferred spatio-temporal variations in population
from mobile phone data and used a machine-learning algorithm to classify land use in the
metropolitan areas of Boston, USA. Nevertheless, existing studies based on taxi trajectories,
social media data and cell phone usage are subject to the following constraints: (1) coarse
spatial resolution, as the unit of analysis is best at the neighbourhood level; and (2) a limited
number of inferred land use types (Yuan et al. 2012, Liu et al. 2016).

Recent development has also highlighted the importance of combining data from
multiple sources (Cai et al. 2017). For example, taxi GPS records and cell phone data
provide location information at high precision, but the data contain little information
land use and human activities. This limitation could be alleviated by
about actual
combining data sets with high-resolution spatial
information (e.g., taxis trajectories
and cell phone data) with those having rich thematic information (e.g., Points of
Interests (POIs), survey data and online business catalogues) (Yuan et al. 2012, Zhong
et al. 2014). For instance, Gong et al. (2016) combined taxi and POIs data to infer trip
purposes and uncover travel patterns in Shanghai, China. Jiang et al. (2015) utilized POIs
data to infer land use at the census block level before further integrating the data into
the LUTE (land use, transportation and environment) model to simulate residents’
behaviours. Additionally, some research used probabilistic modelling to synthesize
surveys and smart card data to identify practical land use information (such as building
function) in two regions of Singapore (Zhong et al. 2014). Still, none of existing studies
are able to characterize mixed-use development at the building level.

In this paper, we attempt to characterize mixed-use development at the building
scale by (1) integrating multi-source geospatial big data; and (2) devising a modiﬁed
Bayes’ theorem, spatial analysis and spatial statistics of urban activities. Our approach
integrates geospatial big data from multiple sources, including taxi trajectories, social
media records, remote sensing and POIs. A probabilistic model is devised to infer the
functions of mixed-use buildings, and the results are benchmarked with site visits. The
usefulness of our methodology is illustrated with a case study of Tianhe District,
Guangzhou, China. Our proposed methodology would be helpful for urban planning,
especially in metropolitan areas, because it allows planners to obtain mixed-use building
information at the building level.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

3

Study area and data

Study area

Tianhe District (Figure 1) in Guangzhou, China, was chosen as our study area. Tianhe
District is located in central Guangzhou, covering an area about 96 km2, hosting a
population of more than 1.4 million in 2015. Tianhe was predominately rural before
the 1980s and was transformed into an urban centre after 30 years of rapid economic
development and urban expansion (Wu and Yeh 1999; Guo et al. 2016; Liu et al., 2017b).
In this process, Tianhe diversiﬁed its economic and urban functions, such as light
manufacturing, retailing, commercial services and professional services. The rapid urba-
nization also led to the rise of primary villages in Tianhe, which are characterized by
multi-functional buildings and mixed-use informal development. Now, Tianhe hosts a
mosaic of buildings, which were built in diﬀerent times, have diﬀerent property arrange-
ments and most importantly, serve diﬀerent urban functions. Therefore, Tianhe provides
a good example for examining mixed-use development.

Data sources

This study uses four data sets: social network records (WeChat), taxi trajectories, POIs
and building footprints obtained from high-resolution remote-sensing images. These
data were collected for both a weekday (15 June 2015) and a weekend day (20 June
2015) in Tianhe District. The preliminary data processing is shown in Figure 2.

Figure 1. The study case area: Tianhe District, Guangzhou, China.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 4

X. LIU ET AL.

Figure 2. The probabilistic model used in this study.

The positioning records for 30 million WeChat users were determined by smart-
phones and other devices each day in Tianhe District (above 20 footprints per person
per day). The locations were aggregated approximately once per hour from ‘EasyGo’ (a
Tencent BigData platform). WeChat data, collected hourly at the base transceiver sta-
tions of smartphones and Wi-Fi hotspots, were interpolated to construct the mesh grids
for further computation. The preliminary data processing involved three steps. First, the
ﬁshnet (25 m × 25 m) was generated on Tianhe District in ArcGIS 10.2 (Esri, Redlands,
California, USA). Second, we calculated WeChat users’ density, using the number of
records in each grid cell divided by the size of a grid cell. Finally, we summarized the
number of WeChat users per hour per grid cell within a 24-hour time series on the two
days, representing a weekday and a weekend day (Table 1).

Taxi data set comprises of two and a half million taxi trajectory records from
approximately 7000 taxis in our study area. This data set includes the time and locations
of taxi pick-ups and drop-oﬀs of passengers, as well as travelling path information, from
00:00 to 24:00 on 12 May 2014 (Monday) and 17 May 2014 (Saturday). Table 2 displays a
taxi passenger’s travel paths in these time windows. We also calculated the network
distance for each trip based on the travel information shown in Table 2.

We captured 40,954 Chinese POIs from dianping.com (one of China’s largest online to
oﬄine (O2O) companies), fang.com (one of China’s largest online house information service
providers) and Baidu maps (one of China’s largest online map service providers) in 2015.
POIs of Baidu maps are the core database, if this database lacks users’ evaluation score this
information is supplemented by POIs from dianping.com and fang.com. This improves the
data accuracy and consistency. A POI is a point location containing vital information, such as
the name of the building, its address, its category and users’ evaluation score. Based on this
information, we grouped the POI data set into four classes: residential communities, oﬃce
facilities (e.g., enterprises, banks and government buildings), shopping facilities (e.g., super-
markets, malls, etc.) and recreational facilities (e.g., bars, restaurants, hotels, etc.). Table 3

Table 1. Descriptive statistics of WeChat user density on weekday and weekend day.
Factors
Weekday
Weekend

Sample size
190,163
204,036

Mean
374.538
336.03

Max
8740
10,280

Min
0.00
0.00

Standard deviation
556.68
548.87

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

5

Table 2. An example of taxi trajectory records in taxi data set.
Latitude of taxi
Taxi

Longitude of taxi

Speed of taxi

YA000S9
YA000S9
YA000S9
YA000S9
YA000S9

Time (t)
19:59:39
19:59:43
. . .
20:06:20
20:06:38

+113.32773
+113.32773
+113. *****
+ 113.3242
+ 113.32425

+23.14959
+23.14963
+23. *****
+ 23.16365
+ 23.1636

000
019
***
022
000

State of taxi

4 (boarding)
5 (traveling)
5 (traveling)
5 (traveling)
4 (alighting)

Table 3. Some examples of POIs in Tianhe District.
ID

Category

Title

Longitude

1
2
. . .

Victory Plaza
Guanghua mansion
. . .

Shopping
Oﬃce
. . .

+113.320818
+113.319943
+113.******

Latitude

+23.134949
+23.140610
+23.******

The users’ evaluation score
4.51
3.86
3.45

displays some recorded POIs and their related information in Tianhe District. We visually
interpreted and manually edited building footprints based on high-resolution QuickBird
images and extracted 63,961 building footprints in our study area (Figure 1).

Probabilistic model

The probabilistic model is shown in Figure 2. This model includes two stages. The ﬁrst
stage infers the building function by using taxi data and POI data. In this stage, we
combined taxi data with POI data to deduce information about passengers’ activities after
drop-oﬀs and before pick-ups using the modiﬁed Bayesian model. We used the Inverse
Distance Weight (IDW) function to construct the relationships among pick-up/drop-oﬀ
locations, building and the purpose of passengers’ activities. We then identiﬁed the
buildings’ mixed functions based on the purpose of passengers’ activities. In the second
stage, according to our assumption in Section 3.2, buildings’ mixed-use functions are
inferred using WeChat data and kernel density estimation. Due to several factors, such as
taxi passengers’ drop-oﬀs and pick-ups usually occurring on the side of the street, POI
location deviation, etc., some errors may remain in the ﬁrst and second stages. To correct
these aforementioned inference errors, we deﬁned correction rules in Section 3.3.

In addition, we used the building types of Niu et al. (2017) to deﬁne the unmixed
building types in Tianhe District. Meanwhile, POI categories are referenced in Section2.2
(residential communities, oﬃce facilities, shopping facilities and recreational facilities).
Seven types of building mixed functions were deﬁned in our study area: oﬃce and
recreation building; oﬃce and residential building; oﬃce and shopping building; resi-
dential, recreation and oﬃce building; residential and recreation building; shopping and
recreation building; and residential and shopping building.

First stage of inferring building’s functions

In general, we can easily obtain pick-up or drop-oﬀ locations, arrival times and trip lengths
from taxi trajectories. However, taxi passengers’ pick-up and drop-oﬀ points do not correlate
to the exact locations where activities occur (Gong et al. 2016). For example, people going
shopping may exit their taxis many metre away from a shopping mall. Therefore, the
information obtained from taxi trajectories does not contain an accurate activity time that

Downloaded by [RMIT University Library] at 08:14 01 December 2017 6

X. LIU ET AL.

indicates the trip’s purpose; this limitation makes it challenging to infer travel purposes by
only using taxi trajectories. To solve this problem, we combined these taxi trajectory data with
POI data to infer the purposes of these taxi passengers’ trips. We used a modiﬁed Bayesian
model to calculate the probability of purposes of passengers based on passengers’ pick-up
and drop-oﬀ locations, arrival time, the distance between each pick-up/drop-oﬀ and a POI,
users’ evaluation scores of a POI and the type of day (weekday/weekend day).

According to Bayes’ theorem (Carlin and Louis 1997), the probability that a nearby POI
might be visited can be calculated by Equations (1)–(6). The value of this probability ranges
from 0 to 1, and the summation of the probabilities of all candidate POIs that might be
visited ought to equal to 1. Some vital settings in our method include the following: the
possibility that a POI might be visited: PðOjLÞ= {(F)| dl;o, t}; F is the users’ evaluation score of a
POI; dl;o is the distance of passengers walking to or from the pick-up/drop-oﬀ points; and the
time of pick-up or drop-oﬀ is t. If t is 8:00–18:00 on weekday, the probability of visiting oﬃce
places is higher than the probability of going shopping. Similarly, if t is 14:00–22:00 on a
weekend day, the probability of going shopping is higher than the probability of visiting
oﬃce locations. Additionally, the usually closing time of shopping malls and recreation
facilities is 22:00–9:00 on weekdays and weekends; hence, the probability of visiting them is
lower than the residential buildings during that period. These special temporal distributions
of activities (TDi) were acquired through our life experiences.
(

t‚TDi :

t 2 TDi :

ð

OjL

Þ ¼

ð
P Oð Þ(cid:2)P LjO;t

P Oð Þ(cid:2)P LjO;t
ð
ÞþP O0ð

Þ
Þ(cid:2)P LjO0;t
ð
0; dl;o>dmax

Þ ; dl;o (cid:3) dmax

P Oð Þ þ P O0ð

Þ ¼ 1

(cid:2)

(

(cid:2)

(

ð
P LjO; t

Þ ¼

P LjO0; t
ð

Þ ¼

dl;o

(cid:4)α; dl;o(cid:1)dl;o0

w1 (cid:2) dl;o

(cid:4)α þ w2 (cid:2) Fβ; w1<w2; dl;o ¼ dl;o0

w1 (cid:2) dl;o0

dl;o0
(cid:4)α0 þ w2 (cid:2) F

(cid:4)α0; dl;o(cid:1)dl;o0

0β0; w1<w2; dl;o ¼ dl;o0

ð
P LjO; t

Þ ¼

P LjO0; t
ð

Þ ¼

dl;oi

(cid:4)α; dl;oi(cid:1)dl;oi0

w1 (cid:2) dl;oi

(cid:4)α þ w2 (cid:2) Fβ; w1<w2; dl;oi ¼ dl;oi0

w1 (cid:2) dl;oi0

dl;oi0
(cid:4)α0 þ w2 (cid:2) F

(cid:4)α0; dl;o(cid:1)dl;oi0

0β0 ; w1<w2; dl;oi ¼ dl;oi0

(1)

(2)

(3)

(4)

(5)

(6)

In these equations, P Oð Þ is the ‘prior probability’, the possibility that a POI has been visited
Þ is the ‘posterior probability’; the possibility
ð
before/after a passenger’s pick-up/drop-oﬀ,P OjL
of a POI is visited after a passenger’s pick-up/drop-oﬀ; P LjO; t
Þ is the possibility of a passen-
ger’s pick-up/drop-oﬀ going to/away from a POI; P O0ð
Þ is the visited possibility of another POI;
P LjO0; t
Þis the possibility of passenger’s pick-up/drop-oﬀ going to/away from the another
ð
POI; and the maximum walking distance is dmax. Parameters w1 and w2 are the weighted
coeﬃcients of the distance (dl;o; dl;o0 ) between POIs and a taxi passenger’s pick-up or drop-oﬀ
point, and the users’ evaluation score of a POI (F,F0), respectively. Parameter i represents the
category of POIs in Section 2.2 (residential communities, oﬃce facilities, shopping facilities and
recreational facilities).

ð

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

7

After obtaining taxi passengers’ likely travelling purposes, we proceeded to determine
spatial associations between taxi passengers’ likely travelling purposes and buildings to ﬁnd
the buildings that most passengers are heading to or departing from. Theoretically, taxi
passenger pick-up or drop-oﬀ locations were always as close as possible to their origins or
destinations. In other words, the longer the walking distance was to a nearby building, the
lower the probability that taxi passengers are at a pick-up or drop-oﬀ location. We assumed
that taxi passengers always selected the nearest pick-up or drop-oﬀ location from which to
access or depart a building. Meanwhile, The IDW interpolation estimated cell values by
averaging the values of sample data points in the neighbourhood of each processing cell.
The closer a point is to the centre of a cell being estimated, the more inﬂuence, or weight, it
had in the averaging process (Watson 1985). IDW is a better method to construct the spatial
relationships among pick-up/drop-oﬀ location, the purposes of taxi passengers’ trips and
the functions of urban buildings than other methods (Zhong et al. 2014). To infer buildings’
functions, we selected the maximum probability of taxi passengers’ trip purposes within a
single category of building. To infer which buildings’ functions fall into a diﬀerent category,
we again used the maximum probability of taxi passengers’ trip purposes. Based on the
assumption, we considered the buildings’ functions to be mixed if a given building had
multiple maximum probabilities based on diﬀering trip purposes of taxi passengers.

Second stage of inferring buildings’ functions

We randomly selected some buildings (including per building type) and veriﬁed their
functions as the training samples by POIs and Baidu street view maps, and we calculated
the number of WeChat users in these buildings using Equation (7)

Nw tð Þ ¼

ð
w i; j; t

Þ

Xi;j

t

(7)

In this equation, Nw(t) is the number of WeChat users; i denotes the longitude of the
WeChat user; j represents the latitude of the WeChat user; and t is the time of WeChat
users’ activity; i∈[+113.295123,+113.446266], j∈[+23.101097,+23.248271] and t∈[0,24].

Activity hubs in the diﬀerent periods represent buildings that individuals frequently
visit for certain purposes. For example, people spend most of their time resting at
homes, working in oﬃces and eating at restaurants, all within diﬀerent periods. We
considered the locations of these frequently visited places (i.e., homes, oﬃces and
restaurants) to be activity centres. Here, we assumed that buildings with the same
functions had the same peak times as WeChat users’ daily activities. The peak time
per building type was obtained by counting the frequency of WeChat users of the upper
training samples. Kernel density estimation is a non-parametric method to estimate the
probability density function of a random variable (Rosenblatt 1956, Parzen 1962). It is a
widely used method for mapping spatial patterns of points in ecology (Brunsdon 1995),
human activities (Chainey and Ratcliﬀe 2005) and other ﬁelds (Shi, 2010). Thus, accord-
ing to this assumption and the peak time per building type, kernel density estimation
was used as an exploratory tool to identify the function of these activity hubs. In this
process, if a building had multiple peak times, we assumed this building was a mixed-
use building.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 8

X. LIU ET AL.

Correction rules

if a building was inferred ‘Oﬃce and residential building’

Two consecutive rules were established to correct for inference errors. First,
if the
inference results from the two stages were the same, we terminated the inference. For
in the ﬁrst and
example,
second stage, we determined the function of this building is oﬃce and residential
building. Second, if the inference resulted from the two stages was diﬀerent, we applied
one of the following two scenarios. When a building was located on the side of a street,
we used the inferred results of the ﬁrst stage as our result. If this was not the case, we
utilized the inference results of the second stage as our results. For example, if a building
was inferred as ‘oﬃce and shopping building’ in the ﬁrst stage and ‘oﬃce and residential
building’ in the second stage, this building was along the edge of street, we determined
the function of this building was the oﬃce and shopping building.

Results

The maximum walking distance between a pick-up/drop-oﬀ point and a building is a key
factor aﬀecting taxi passengers’ choices. We randomly selected 16 sample buildings to
ensure that most taxi passengers prefer walking from pick-up or drop-oﬀ locations to
buildings. First, each of these 16 buildings was centred at buﬀer zones with the radii of
25 m, 50 m, 75 m and 100 m (Figure 3). Then, we calculated the number of pick-ups and
drop-oﬀs of taxi passengers in these buﬀer zones on 12 May 2014 (Monday). Based on
the results of the statistics revealed in Table 4, we determined that most taxi passengers
travelled a walking distance of less than 100 m from their pick-up/drop-oﬀ locations to
buildings. However, in Equation (1), we deﬁned dmax as 50 m. There were two reasons for
this: (1) when the distance was less than 50 m, the walking distance of taxi passengers
increased with the increasing frequency of taxi passengers’ pick-ups/drop-oﬀs; however,
when the distance was more than 50 m, the walking distance of taxi passengers
increased as the number of taxi passengers’ pick-ups/drop-oﬀs decreased; (2) we also
considered that road width can aﬀect this distance; that is, the narrower the road, the
smaller the distance.

Through a number of experiments, we found a set of more suitable parameters in
Equations (1)–(6): α ¼ (cid:4)1; β ¼ 1; α0 ¼ (cid:4)1; β0 ¼ 0:001; w1 ¼ 1; w2 ¼ 0:05. Figure 4(a–d)
shows the results from using Equations (1)–(6) and IDW interpolation in Section 3.1.
The inferred results of the ﬁrst stage are presented at the centre of Figure 4. These
ﬁgures show that some buildings have multiple possible functions; for example, build-
ings with blue circles have residential, oﬃce and shopping functions. We therefore
deﬁne these buildings’ functions as being mixed.

Figure 5 illustrates the number of WeChat users per hour within each sample building
(shown in Figure 3) as determined using Equation (7). Figure 5(a) represents the
residential buildings,
in which curve A1 represents the Ruixinyuan Unit, curve A2
represents the Nanyayuan Unit, curve A3 represents the Yujingyuan Unit and curve A4
represents the Tianlu Garden. Figure 5(b) represents the oﬃce buildings, where curve B1
represents the Mingmen Mansion, curve B2 represents the Fuli Mansion, curve B3
represents the Boehner Mansion and curve B4 represents the Tianyin Mansion.
in which curve C1 represents the
Figure 5(c) represents the shopping buildings,

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

9

Figure 3. Extracted building footprints in Tianhe District with the locations of 16 selected samples.

Table 4. The number of taxi passengers’ pick-ups and drop-oﬀs within the diﬀerent buﬀers
(25 m,50 m,75 m,100 m) on 12 May 2014.
Building name
Ruixinyuan (Residential building)
Nanyayuan (Residential building)
Yujingyuan (Residential building)
Tianlu Garden (Residential building)
Mingmen Mansion (Oﬃce complexes)
Fuli Mansion (Oﬃce complexes)
Boehner Mansion (Oﬃce complexes)
Tianyin Mansion (Oﬃce complexes)
Zhengjia Mall (Shopping centre)
Grandbuy Store (Shopping centre)
China Resources Vanguard

76–100 m
1111
2102
1115
1250
1140
3354
1125
1135
1010
1205
855

51–75 m
1423
3343
11,133
1360
1202
2278
2379
14,251
6358
4010
3001

26–50 m
3160
4564
5040
2867
2801
11,495
1469
1522
20,354
15,020
17,041

1–25 m
1910
1484
2639
1386
1111
1707
2167
1256
2060
1750
2500

(Shopping centre)

Teemall Department Stores

(Shopping centre)

Maofamily restaurant (Recreation)
Guangzhou restaurant (Recreation)
Henan restaurant (Recreation)
Mingzhu restaurant (Recreation)

1423

1120
1201
1540
2560

5500

4132
2025
3526
4562

12,500

2302
1240
4256
8954

1100

1210
350
1260
1471

Zhengjia Mall, curve C2 represents the Grandbuy Store, curve C3 represents China
Resources Vanguard and curve C4 represents the Teemall Department Stores. Finally,
Figure 5(d) represents the restaurant, which curve D1 represents the Maofamily restau-
rant, curve D2 represents the Guangzhou restaurant, D3 represents Minzhu restaurant
and curve D4 represents the Henan restaurant.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 10

X. LIU ET AL.

Figure 4. Results of spatial analysis (taxi data) for (a) residential, (b) oﬃce, (c) shopping and (d)
recreation.

Figure 5 shows that buildings with the same functions record similar peak times of
WeChat users’ activities. For example, the Ruixinyuan, Nanyayuan and Yujingyuan Units,
and Tianlu Garden are all residential buildings and they record peak times of WeChat
users’ activities in the late evening and night (22:00–2:00) on a Monday and Saturday.
This observation conﬁrms our previously stated assumption in Section 3.2. Moreover, we
including oﬃces, shopping centres and
acquired the peak time of other buildings,
restaurants, which recorded respective peak times of 12:00–14:00 on a Monday, 20:00–
22:00 on a Saturday and 18:00–20:00 on a Saturday. Next, the method of the second
stage of inferring building’s functions in Section 3.2 was used to identify WeChat users’
activity hubs based on the peak times of each building type, and these results were
shown in Figure 6(a–d). Based on our previously stated assumption in Section 3.2, we
combined these buildings’ footprints with the data in Figure 6(a–d). The inferred results
of the second stage were showed at the centre of Figure 6, which reveals buildings with
multiple possible functions (i.e., buildings with both oﬃce and shopping functions), as
demarcated by green circles. We deﬁne these buildings’ functions as being mixed-use.
After completing the ﬁrst and second stages of this process, we utilized the
correction rules in Section 3.3 to obtain the ﬁnal inferred results, which are shown
in Figure 7. A total of 12,042 buildings were labelled with mixed-use buildings
accounting for only 18.82% of all buildings. The ratios of oﬃce and recreation
building, oﬃce and residential building, oﬃce and shopping building, residential-
recreation and oﬃce building, residential and recreation building, shopping and
recreation building, residential and shopping building were 10.92%, 29.53%, 3.25%,
51.54%, 1.25%, 1.52% and 1.98%, respectively,
in all mixed-use buildings. Figure 7
shows that these buildings are mostly located along the sides of streets and are
mainly located in the western region of Tianhe District. More residential buildings are

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

11

Figure 5. Curves representing temporal variations in the number of WeChat users for each of the 16
sample buildings.

classiﬁed as being ‘mixed’ than any other building type. In detail, most buildings with
the mixing of urban functions (i.e., residential buildings and other mixed-use build-
ings) are located to the south of the Guangyuan Expressway and north of Linjiang
residential mixed-use buildings appear along
Avenue. The highest number of
Guangzhou Street and Huangpu Avenue. The residential and oﬃce mixed-use build-
ings are generally scattered around the central business district (CBD) and throughout
the urban core. The mixing of oﬃce and shopping urban functions complexes can
also be found in the CBD (e.g., Pearl River New City and CITIC Plaza). Shopping

Downloaded by [RMIT University Library] at 08:14 01 December 2017 12

X. LIU ET AL.

Figure 6. Analysis results of WeChat data at peak times for (a) residential, (b) oﬃce, (c) shopping
and (d) recreational facilities.

Figure 7. Inferred the mixed functions of buildings in Tianhe District (Guangzhou, China).

centres are usually mixed with residential buildings and are most commonly located
in the core of the city (i.e., CITIC Plaza). Recreational buildings account for a low
percentage of all building types in Tianhe District. They are often mixed with oﬃce
and shopping complexes and are mainly located in the urban core and the surround-
ing suburban areas.

Finally, we randomly selected a series of complexes at diﬀerent spatial scales in our
study area and compared their inferred results with ground-truth investigation data
and Baidu street view maps. The results of these comparisons are shown in Table 5.
As the data in Table 5 reveal, at a spatial scale of 500 × 500 m, there are 131

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

13

Table 5. Comparing the predicted results with the ground-truth investigation data.
Site

Size

N1

N3

N2

500 × 500 m

131

91

11

C

87.9%

1000 × 1000 m

372

108

16

85.18%

N1, N2 and N3 are the number of counted buildings, number of mixed functional buildings and number of predicted
incorrect mixed functions of buildings, respectively. C represents correct rate of inferring mixed functional buildings.

buildings; 91 of these are classiﬁed as mixed-use buildings, with only 11 being
predicted incorrectly, resulting in an inferred accuracy rate of 87.9%. At a greater
spatial scale, such as 1000 × 1000 m, the total number of buildings is 372, the
number of mixed-use buildings is 108, and the number of
incorrectly predicted
mixed-use buildings is 16, yielding an inferred accuracy rate of 85.18%. Therefore,
even at diﬀerent spatial scales, the accuracy rates of
inferring mixing of urban
functions of buildings are consistently above 85%.

Discussion

Spatial distribution of mixed-use buildings

This analysis reveals how distributions of mixed-use buildings correspond with distance
from the urban core. Figure 8(a) displays ﬁve circles in a 10-km area, each with a radius of
2 km, and Figure 8(b) displays the distribution of various types of buildings within each
zone. Moving from the inner zones to the outer zones, building types change from
predominantly mixed-use buildings, to single/mixed-use buildings, to mostly single func-
tional buildings. This trend indicates that land use intensity gradually declines towards the
outer zones, which corresponds to the changes in buildings’ functions from mostly mixed-
use buildings in inner zones to single functional buildings in outer zones.

Spatial interaction between human activities and buildings’ functions

Figure 9(a) illustrates the spatial distribution of humans’ activities within a 3-km travel-
ling distance, and features ﬁve circles in an area of 10 km in size, each with a radius of
2 km, moving outwards from the city core. To obtain a quantitative understanding of
human travelling behaviours, we calculated the percentage (P) of travellers in all grid
cells (100 m × 100 m), which represents the proportion of individuals’ daily travels within
a travelling distance of 3 km in zones of varying distances from the urban core (0–2 km,
2–4 km, 4–6 km, 6–8 km and 8–10 km), the results of which are illustrated in Figure 9(b).

Downloaded by [RMIT University Library] at 08:14 01 December 2017 14

X. LIU ET AL.

Figure 8. The spatial distribution of mixed functions buildings: (a) displays ﬁve circles in a 10-km
area, each with a radius of 2 km and (b) represents the distribution proportion of various types of
buildings within each zone.

We found that most grid cells that are less than 2 km from the urban core have a
percentage of passengers greater than 60–80%, which reﬂects that the majority of
residents living in this zone have a shorter traveling distance. However, in the zone
located 6–10 km from the urban core, the percentage of shorter traveling distance is
much lower (i.e., 20–30%). This percentage is deﬁned as high when P is larger than 60%;
otherwise, it is deﬁned as low.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

15

Figure 9. The spatial distribution of human with the traveling range <3 km: (a) represents ﬁve circles
in a 10-km area, each with a radius of 2 km, (b) is the distribution proportion of the traveling range
within each zone.

The spatial distribution of people’s daily activities in Figure 8(b) and buildings’
functions in Figure 9(b) reﬂect the spatial interactions between the two domains. The
relationship between P and percentages (above 60%) of mixed-use buildings in zones of
varying distance from the urban centre (0–2 km, 2–4 km, 4–6 km, 6–8 km and 8–10 km)
were veriﬁed by the linear regression model of IBM SPSS Statistics 21.0. The calculated R2
linear coeﬃcient is 0.771, demonstrating that buildings’ functions greatly inﬂuence

Downloaded by [RMIT University Library] at 08:14 01 December 2017 16

X. LIU ET AL.

human activity; that is, the more complex buildings’ functions are, the shorter a human’s
travelling distance is.

Sources of inference errors

Two reasons may lead to inference errors. First, given the prevalence of private cars and
the popularity of the public transport system (including bus transit and the metro), as
well as the use of specialized vehicles from Uber and DiDi
in Guangzhou, taxi GPS
trajectory records and WeChat users’ real-time records are not consistently eﬀective
methods of recording people’s activities. Thus, the accuracy of inferring results essen-
tially relies on the density of pick-ups/drop-oﬀs of taxi passengers and WeChat users,
which may not correspond. For example, inference accuracy rates for shopping centres
were relatively low, possibly because the individuals who accessed these buildings often
did not take taxis or rarely use WeChat.

Second, the timing in these multi-source data is not synchronized. For example, in our
study, taxi GPS data were obtained in 2014, WeChat user real-time location records were
collected in 2015, building footprints were generated from 2015 high-resolution
QuickBird images and POIs were acquired in 2015. These temporal discrepancies may
have caused some errors within the inference results.

Conclusions

Few existing studies focused on inferring buildings’ mixed functions in terms of human
activities. In this paper, we introduced a probabilistic model to infer buildings’ mixed
functions by integrating taxi trajectory records, WeChat users’ density data, POI data and
remote-sensing data. This methodology combined a modiﬁed Bayes’ theorem, spatial
analysis and spatial statistics. We applied this method to Tianhe District, where 12,042
mixed-use buildings (out of a total of 63,961 buildings) were inferred, with an accuracy
rate of 85% based on ground-truth data. From the identiﬁed results, we found that most
mixed-use buildings were located along main streets. Furthermore, the relationships
between the spatial distribution of mixed-use buildings and human activity space were
veriﬁed. We found that the more complex building functions are, the shorter the
travelling distance (from pick-up locations to drop-oﬀ sites) of human beings.

In summary, this study provides a new method to infer urban mixed-use building
functions by using multi-source geospatial big data, and discussed the spatial interac-
tions between human activity spaces and buildings’ mixed functions. The information
may help assess the eﬀectiveness of urban planning schemes and improve the manage-
ment of urban planning.

In a future study, we will try to extract building footprints from remote sensed
imagery or Open Street Maps. In addition, we plan to test the method with Twitter
users’ data, POIs from Google maps or others in more urban areas of diﬀerent countries.
Additionally, the relationship between urban mixed-use building functions and human
activities (e.g. activity intensity, and space) will be further explored.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

17

Acknowledgment

The authors would like to thank Prof. Yuan May and Bo Huang, and reviewers who gave us so
many useful comments and suggestions for the revision.

Disclosure statement

No potential conﬂict of interest was reported by the authors.

This study was supported by the National Key R&D Program of China [grant No. 2017YFA0604404]
and the National Natural Science Foundation of China [grant No. 41671398].

Funding

ORCID

References

Xiaoping Liu
Xingjian Liu
Yaolin Liu

http://orcid.org/0000-0003-4242-5392
http://orcid.org/0000-0003-4242-5392

http://orcid.org/0000-0003-4242-5392

Brunsdon, C., 1995. Estimating probability surfaces for geographical point data: an adaptive kernel

algorithm. Computers & Geosciences, 21 (7), 877–894. doi:10.1016/0098-3004(95)00020-9

Cai, J., Huang, B., and Song, Y., 2017. Using multi-source geospatial big data to identify the
In Press. doi:10.1016/j.

structure of polycentric cities. Remote Sensing of Environment,
rse.2017.06.039

Cao, X. and Chatman, D., 2016. How will smart growth land-use policies aﬀect travel? A theoretical
discussion on the importance of residential sorting. Environment and Planning B: Planning and
Design, 43 (1), 58–73. doi:10.1177/0265813515600060

Carlin, B.P. and Louis, T.A., 1997. Bayes and empirical Bayes methods for data analysis. Statistics and

Computing, 7 (2), 153–154. doi:10.1023/A:1018577817064

Cervero, R., 1996. Mixed land-uses and commuting: evidence from the American Housing Survey.
Transportation Research Part A Policy & Practice, 30 (5), 361–377. doi:10.1016/0965-8564(95)
00033-X

Chainey, S., and Ratcliﬀe, J.H., 2005. Gis and crime mapping. London: Wiley.
Coupland, A., 1997. Reclaiming the city: mixed use development. London: Spon.
Gong, L., et al., 2016. Inferring trip purposes and uncovering travel patterns from taxi trajectory
Information Science, 43 (2), 103–114. doi:10.1080/

data. Cartography and Geographic
15230406.2015.1014424

Graham, M. and Shelton, T., 2013. Geography and the future of big data, big data and the future of
geography. Dialogues in Human Geography, 3 (3), 255–261. doi:10.1177/2043820613513121
Grant, J., 2002. Mixed use in theory and practice: Canadian experience with implementing a
planning principle. Journal of the American Planning Association, 68 (1), 71–84. doi:10.1080/
01944360208977192

Guo, H., et al., 2016. Researches on urban compactness based on grid method: a case study of
Tianhe District, Guangzhou. Urban Planning International, 51 (4), 51–57. doi:10.22217/
upi.2014.101

Hasan, S., Zhan, X., and Ukkusuri, S.V., 2013, Understanding urban human activity and mobility
patterns using large-scale location-based data from online social media. Proceedings of the 2nd
ACM SIGKDD international workshop on urban computing. ACM, 6.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 18

X. LIU ET AL.

Jiang, S., et al., 2015. Mining point-of-interest data from social networks for urban land use
classiﬁcation and disaggregation. Computers, Environment and Urban Systems, 53, 36–46.
doi:10.1016/j.compenvurbsys.2014.12.001

Li, X., et al., 2017. A new global land-use and land-cover change product at a 1-km resolution for
2010 to 2100 based on human–environment interactions. Annals of the American Association of
Geographers, 107 (5), 1040–1059. doi:10.1080/24694452.2017.1303357

Liu, X., et al., 2014. Simulating urban growth by integrating landscape expansion index (LEI) and
cellular automata. International Journal of Geographical Information Science, 28 (1), 148–163.
doi:10.1080/13658816.2013.831097

Liu, X., et al., 2015. Revealing travel patterns and city structure with taxi trip data. Journal of

Transport Geography, 43, 78–90. doi:10.1016/j.jtrangeo.2015.01.016

Liu, X., et al., 2015a. Understanding urban China with open data. Cities, 47 (47), 53–61. doi:10.1016/

j.cities.2015.03.006

Liu, X., et al., 2016. Incorporating spatial interaction patterns in classifying and understanding
Information Science, 30 (2), 334–350.

International Journal of Geographical

urban land use.
doi:10.1080/13658816.2015.1086923

Liu, X., et al., 2017a. Classifying urban land use by integrating remote sensing and social media
data. International Journal of Geographical Information Science, 31 (8), 1675–1696. doi:10.1080/
13658816.2017.1324976

Liu, X., et al., 2017b. A future land use simulation model (FLUS) for simulating multiple land use
scenarios by coupling human and natural eﬀects. Landscape and Urban Planning, 168, 94–116.
doi:10.1016/j.landurbplan.2017.09.019

Liu, Y., et al., 2012. Urban land uses and traﬃc ‘source-sink areas’: evidence from GPS-enabled taxi
Landscape and Urban Planning, 106 (1), 73–87. doi:10.1016/j.

in Shanghai.

data
landurbplan.2012.02.012

Liu, Y., et al., 2015b. Social sensing: a new approach to understanding our socioeconomic
the Association of American Geographers, 105 (3), 512–530.

environments. Annals of
doi:10.1080/00045608.2015.1018773

Luo, F., et al., 2016. Explore spatiotemporal and demographic characteristics of human mobility via
11–25. doi:10.1016/j.

study of Chicago. Applied Geography,

case

70,

Twitter:
a
apgeog.2016.03.001

Merlin, L.A., 2014. Measuring community completeness: jobs-housing balance, accessibility, and
convenient local access to nonwork destinations. Environment and Planning B: Planning and
Design, 41 (4), 736–756. doi:10.1068/b120010p

Niu, N., et al., 2017. Integrating multi-source big data to infer building functions. International

Journal of Geographical Information Science, 31 (9), 1871–1890.

Pan, G., et al., 2013. Land-use classiﬁcation using taxi GPS traces. IEEE Transactions on Intelligent

Transportation Systems, 14 (1), 113–123. doi:10.1109/TITS.2012.2209201

Parzen, E., 1962. On estimation of a probability density function and mode. The Annals of

Mathematical Statistics, 33 (3), 1065–1076. doi:10.1214/aoms/1177704472

Ratti, C., et al., 2006. Mobile landscapes: using location data from cell phones for urban analysis.

Environment and Planning B: Planning and Design, 33 (5), 727–748. doi:10.1068/b32047

Rosenblatt, M., 1956. Remarks on some nonparametric estimates of a density function. The Annals

of Mathematical Statistics, 27 (3), 832–837. doi:10.1214/aoms/1177728190

Rowley, A., 1996. Mixed-use development: ambiguous concept, simplistic analysis and wishful

thinking? Planning Practice & Research, 11 (1), 85–98. doi:10.1080/02697459650036477

Shi, X., 2010. Selection of bandwidth type and adjustment side in kernel density estimation over
inhomogeneous backgrounds. International Journal of Geographical Information Science, 24 (5),
643–660. doi:10.1080/13658810902950625

Sperry, B.R., Burris, M.W., and Dumbaugh, E., 2012. A case study of induced trips at mixed-use develop-

ments. Environment and Planning B: Planning and Design, 39 (4), 698–712. doi:10.1068/b38047

Toole, J.L., et al., 2012. Inferring land use from mobile phone activity. Proceedings of the ACM

SIGKDD international workshop on urban computing. ACM, 1–8.

Downloaded by [RMIT University Library] at 08:14 01 December 2017 INTERNATIONAL JOURNAL OF GEOGRAPHICAL INFORMATION SCIENCE

19

Veloso, M., Phithakkitnukoon, S., and Bento, C., 2011, Urban mobility study using taxi traces.
Proceedings of the 2011 international workshop on Trajectory data mining and analysis. ACM,
23–30.

Wang, Y.P., Wang, Y., and Wu, J., 2009. Urbanization and informal development in China: urban
villages in Shenzhen. International Journal of Urban and Regional Research, 33 (4), 957–973.
doi:10.1111/ijur.2009.33.issue-4

Watson, D.F., 1985. A reﬁnement of inverse distance weighted interpolation. Geo-Processing, 2 (2),

315–327.

Wu, F. and Yeh, A.G., 1999. Urban spatial structure in a transitional economy. Journal of the

American Planning Association, 65 (4), 377–394. doi:10.1080/01944369908976069

Yuan, J., Zheng, Y., and Xie, X., 2012, Discovering regions of diﬀerent functions in a city using
human mobility and POIs. Proceedings of the 18th ACM SIGKDD international conference on
Knowledge discovery and data mining. ACM, 186–194.

Zhan, X., Ukkusuri, S.V., and Zhu, F., 2014. Inferring urban land use using large-scale social media
check-in data. Networks and Spatial Economics, 14 (3), 647–667. doi:10.1007/s11067-014-9264-4
Zhao, Y. and Webster, C., 2011. Land dispossession and enrichment in China’s suburban villages.

New Global Studies, 48 (3), 529–551.

Zhong, C., et al., 2014.

Inferring building functions from a probabilistic model using public
transportation data. Computers, Environment and Urban Systems, 48, 124–137. doi:10.1016/j.
compenvurbsys.2014.07.004

Zhou, X. and Zhang, L., 2016. Crowdsourcing functions of the living city from Twitter and
Information Science, 43 (5), 393–404.

Foursquare data. Cartography and Geographic
doi:10.1080/15230406.2015.1128852

Downloaded by [RMIT University Library] at 08:14 01 December 2017 