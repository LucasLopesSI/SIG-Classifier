Geoinformatica
DOI 10.1007/s10707-017-0311-4

The national geographic characteristics of online public
opinion propagation in China based on WeChat network

Chuan Ai 1 & Bin Chen 1 & Lingnan He 2 & Kaisheng Lai 2 &
Xiaogang Qiu 1

Received: 1 February 2017 / Revised: 16 May 2017
Accepted: 19 September 2017
# Springer Science+Business Media, LLC 2017

Abstract Offline networks have been the subject of intense academic scrutiny for many
decades, but we still know little about the nationwide spatial interaction patterns and its
application for public opinion management of online social networks. With the aim of
uncovering the geographic interaction characteristics of online public opinion propaga-
tion, we analyze a large dataset obtained from WeChat, the most popular social media
application in China, and construct the spatial interaction network G, which contains
359 city-nodes. It is found that the communities in the network and the administrative
division corresponded well with each other, and cities with high betweenness and
degree also develop well in the economy. Public opinion propagation depends on the
state of online interaction. The findings indicate that public opinion should be managed
separately by regions divided according to the community division, and different
regions should adopt different management methods according to their economic,
historical and political characteristics. In our work, the possibility and opportunity is
presented to study the spatial interaction patterns of online public opinion propagation
with the massive behavioral data and the methods of complex network.

Keywords Online interaction network . Public opinion online . Community detection . Regional
characteristics

* Bin Chen

nudtcb9372@gmail.com

1 College of Information System and Management, National University of Defense Technology,

Changsha 410073, China

2

School of Communication and Design, Sun yat-sen University, Guangzhou 510006, China

Geoinformatica

1 Introduction

The Internet has spawned different types of information sharing systems, including Web, FTP,
E-mail and Telnet. Recently, online social networks have gained significant popularity and are
now among the most popular sites on the Web (http://venturebeat.com/2008/06/18/hitwise-
facebook-gaining-on-myspace-in-the-us/). For example, Weibo, WeChat are two of the most
popular sites built on social networks in China. The popularity of these sites provides an
opportunity to study the characteristics of online social network at large scale [1]. Offline
networks have been the subject of intense academic scrutiny for many decades, but the
availability of large online social networks has raised new sets of questions [2]. There are
many studies on a variety of topics ranging from basic properties of online social networks ([1,
3–5]), the characteristics of users’ behavior ([6–8]), the propagation of information online ([9,
10]) and the evolution of the online social networks ([2, 11]).

The spatial interaction characteristics of online social network is also very important and
attract much attention. From the perspective of space network, there are two most prominent
regional scientific researches based on the mobile communication data. The first one is that the
gravity law could be used to fit the density of the interactions between the urban centers ([12,
13]). Another one is about community detection, some studies ([14, 15]) found that the
communities detected correspond with the administrative boundaries extremely well. Mao
et al. [16] found that strong interactions denotes strong economy connection between pairs of
place. These researches follow the tradition that built by Ullman [17] and carried on by
Noronha and Goodchild [18], Castells [19] and others, that spatial interaction represent
geography characteristics.

However, these research results have the following shortcomings: (1) Because of the data
constraints, comparing to the work on the general, holistic social network analysis, there are
few researches focused on regional characteristics of online social network. (2) These studies
are mainly based on records of mobile phone communication, and few researches on the
interaction of regional characteristics directly based on social media data. However, the
researches that based on data from online social network are of great significance on practice
of online public opinion management. (3) There are few studies on the characteristics of
regional interaction in the whole country. For example, Guanghua et al. [20, 25] studied on the
characteristics of spatial interaction in Heilongjiang province. The work of Blondel et al. [14]
was based on data from Belgium, a relatively small country. However, in the process of
urbanization, it is important to uncover the characteristics of spatial interaction based on online
social network all over China, a country with a large population and vast land.

Public opinion propagation depends on the state of online interaction. By measuring and
analyzing the propagation characteristics of the WeChat network we can understand and
appreciate the structure and evolution of WeChat network, and social behavior of users, then
provide theoretical and technical guidance for public opinion online detection and management.
Our target is to uncover the spatial interaction features based on the geographic information of
the online social networks. Thus we can find the geographic characteristics of online public
opinion propagation, and the relationship between the online interaction and economy.

We focus on two features in the network, the first one is betweenness centrality, which pays
attention to the global importance of nodes. And another one is community, which refers to a
group of nodes that have more interactions in group than that with nodes out of group. The
communities in network broaden the research perspective, and attract more attention to the
structure of network based on the interactions’ density.

Geoinformatica

The remainder of this paper is organized as follows. Section 2 describes the methods we
used in the work, and introduces some closely related works. Section 3 shows what the data set
is and how the network G is built based on the data. In section 4, we describe some features of
the network, such as degree, degree with interaction weight, and distance distribution of the
interactions. In section 5, we detect the communities and analyze the betweenness of the
nodes. In section 6, we analyze the similarity between community division and the adminis-
trative division. In section 7, we detect the volatility of the community division results by
getting more networks with different size of time window and different begin time. We discuss
the findings in section 8, and draw the conclusions in the last section.

2 Methods and related works

A method of taking cities as nodes to construct a network is used at first, which is similar to the
work of Blondel et al. [21]. Blondel et al. analyzed the data sets containing 200 million mobile
phone communication records and constructed the city-node network, used the community
detection method to divide the network nodes into multiple groups, and then study the
existence of the regions and the boundaries.

The concept of betweenness centrality is used to measure the important role in the overall
situation while the degree measures the influence in the local. In general, the centricity of a
node is calculated by the ratio of the shortest path between all nodes to the node. The detailed
work about betweenness is referred to Freeman’s work [22].

CB kð Þ ¼ ∑N

i≠ j≠k

σi j kð Þ
σi j

σij is the number of shortest paths from node i to node j, σij(k) is the number of shortest
paths from node i to node j that pass node k. The degree and betweenness centrality measure
different aspects of the nodes’ roles in network. Barthelemy [3] found that betweenness and
degree follow a power law distribution in complex network based on the mobile phone
communication records, but Guimera et al. [23] found the nodes with big degree did not have
big betweenness in some network with special structure. Onnela et al. [24] found the
betweenness of edges is negatively correlated with weight. All these studies are based on
individual network. Guanghua et al. [25] followed the concept of geographic information, took
the nodes with the high betweenness as the center, found the center in the geographical
regional area by the method of community analysis and betweenness. The studies about
community detection based on mobile phone communication dataset mainly involves four
aspects, there are other studies based on individuals ([24, 26, 27]), square pixels [15] and cells
divided by method of Thiessen polygons ([25, 28]). The types of network depend on the types
of datasets. And the communities detected correspond with the administrative boundaries
obviously.

These studies took different regions as nodes and interaction density as edge weight to
construct the networks, then analyzed the communities in the network. In the research of
complex network, the concept of community is different from what we generally think. In the
fields of complex network, community is referred to a group of nodes which have more edges
in group than that with nodes out of group, while in general, it means a group of people with
the same interest. The communities are not easy to control and the algorithms are complex.

Geoinformatica

Many algorithms have been developed to detect the communities, and the different levels
of community detection are achieved. Generally speaking, the algorithm of community
detection mainly includes two kinds of methods. The first one is graph partition and the
second one is hierarchical clustering. Graph partition aim to divide the graph of network
in to groups that would not overlap with each other, while hierarchical clustering is used
to build the hierarchical structure of the clusters of nodes. Hierarchical clustering
algorithms can further be divided into two classes, including hierarchical agglomerative,
and hierarchical divisive.

Newman and Girvan [29] proposed modularity to measure the results of community
detection. Modularity is calculated by comparing the ratio of edges in communities of a
network with that expected in a random network.

(cid:1)

Q ¼ ∑
k

∑
ij∈C

realflowijk

−estflowijk

(cid:3)

k is the number of communities, realflowijk gives the ratio of edge between node i and j in
the same community, estflowijk gives the expected value in random network. Actually, the
modularity of different scale of network fluctuates between 0.3 and 0.7.

Newman [29] proposed the most widely used methods, which is Newman modularity
maximization method. In the practical projects, there are several algorithms to support the
actual network analysis in consideration of time complexity and flexibility. The fast greedy
algorithm is a hierarchical agglomerative algorithm, its time complexity is O(md log n), m
represents the number of edges, and n is the number of nodes, d is the tree diagram depth of
community structure.

Blondel [14] applied the multilevel community detection algorithm28. But the work was
based on dataset of mobile phone communication, and the network was based on individuals
devoid of spatial interaction information. As so far, the studies that try to detect the multilevel
communities based on spatial interaction is rare, except for works of Sobolevsky et al. [30], De
Montis et al. [31] and Guanghua [25], the former two work were based on modularity
maximization algorithm, and the last one was based on infomap algorithm. Sobolevsky
et al. (2013) detected deeper and small communities based on the communities that formed
before. This kind of method is different from others, which is getting small communities firstly
and getting large communities based on that. The work in this paper is based on algorithm of
informap without detecting multilevel communities.

There are many algorithms to detect communities [32]. Lancichinetti and Fortunato [33]
found that algorithm of informap appear good performance in different situation. Rosvall and
Bergstrom [34] has more detailed description about this algorithm. We use the Igraph package
in Python in our work, and run ten times to get more robust results.

There does not exist many studies focus on the influence of network’s time window size.
Aurelien et al. [35] proved that the overall statistics index is stable, but the local activity of
network is intense. Petter Holme et al. [36] analyzed the sustainable development of social
networks, focusing on the characteristics of dynamic development. Gautier Krings et al. [37]
studied the structure characteristics of mobile phone communication network with different
size of time window. Although the research in this area is reare, the dynamic characteristics
should be taken into consideration. In this paper, data of three hours, six hours, 12 h, 24 h,
48 h, 96 h, and 192 h’ time window were used to analyze the impact of the continuous
dynamic change process on the community detection results.

Geoinformatica

3 Dataset

The data set for our work includes all cities in mainland China, as well as Hong Kong and
Macau special administrative regions (SARs), the data from Taiwan is not considered here
because Twitter and Facebook are the most popular online social media application instead of
WeChat in Taiwan. It is known that the People’s Republic of China has 34 provincial
administrative units, including 23 provinces, four municipalities, five autonomous regions
and two SARs.

WeChat is the most widely and frequently used social application software by the Chinese
people to support the use of mobile phones and computers. WeChat users click to visit the
pages shared by others, the clicks are recorded and then the records are collected as the dataset
of our work. Data collection company (Fabonacci) collect a large number of web pages
spreading among users in the history, constitute a big data set. The data set contains a 29-
day record, as shown in the Table 1.

Each record in the data indicates a user’s behavior of clicking and browsing a webpage,
including the page’s sharer ID, visitor ID, page ID, visitor IP and browsing time. For the
purpose of protecting user’s privacy, all the user IDs are unique and corresponded to user’s
WeChat IDs, but not the same. So when the data is analyzed, the IDs are not specific to the real
users. Through the IP library query we can get the corresponding geographical location. Song
Jian [38] analyzed several major domestic and international IP address library, including foreign
IP2Location Lite, GeoLite2 domestic Pure IPAddress Database, Taobao IPAddress Database,
Sina IP Address Database, and Baidu IP Address Database. They compared coverage rate and
accuracy of the four domestic IP address databases. They got the conclusion that the domestic
Taobao IP Address Database had the highest credibility. Because the IP address library is
difficult to test and verify, and the lack of information about building method of these two IP
address databases, we cannot get credibility of IP2Location Lite and GeoLite2. We use Taobao
IP Address Database to address the geographical location of the IP address in our work.

At the same time, Song Jian et al.’s [38] work found that the lower the administrative level is,
the lower the accuracy of IP address library is. In order to keep the accuracy, cities are taken as the
basic units. All the administrative units under other provincial administrative units directly are
regarded as basic units in our work. These units include sub-provincial cities, prefecture-level
cities, county-level cities and autonomous counties. In our work, we also regard the four munic-
ipalities and two SARs as basic units in network, although they are provincial administrative units.
There are 359 cities in the data, without affiliation among these cities as shown in Fig. 1. Their
administrative areas on the map can completely make up the map of China except for Taiwan.

Therefore, each user can be geocoded to different cities according to their IP address. We do
not take the user’s real locations in consideration, we just use the user’s IP address to determine
the user’s city. A network is finally achieved, the connection weight between the city A and the
city B is determined by the connection of people in city A and B. We take several cities in

Table 1 The snapshot about the dataset

Time period

1
2
3
4

Start time

2015.04.22
2015.05.08
2015.05.16
2015.05.29

End time

2015.04.25
2015.05.14
2015.05.26
2015.06.04

Duration(days)

4
7
11
7

Geoinformatica

Fig. 1 The work area of this paper. Note: The dataset of this work include all cities in mainland China as well as
Hong Kong and Macau, we do not take the data from Taiwan into consideration. As we all know, China has 34
provincial administrative units, including 23 provinces, four municipalities, five autonomous regions and two
special administrative regions

Heilongjiang province as example to explain how to construct the network, all details are
shown in Fig. 2. In this paper, data of two days’ time length are first extracted to construct the
network for analysis. In section 7, we will build the network with different size of time window
to discuss the stability and volatility of the community detection results.

4 Interaction network based on city-nodes

The data from April 22 00:00:00 to April 24 00:00:00, including 2,242,157 interaction records
is analyzed. The network G is shown in Fig. 1. The network consists of 359 nodes and 45,922
directed edges. The average degree was 127.91. Here the interaction within the same city is not
considered, so there is no loop in the network. The telecommunication industry typically uses
Erlang to measure the total communication time [39], an Erlang refers to one hour’s call. Work
of Guanghua et al. [25] used Erlang to measure the overall communication traffic. They

Geoinformatica

Fig. 2 Network construction method. a. The WeChat interaction network. b. The city-node network G. Note:
Three cities in Heilongjiang province is taken for example, Yichun, Shuihua and Haerbin are three city-nodes in
the network. u1, u2, u3 and u4 are WeChat users. Supposing that there are just four WeChat users in the three
cities, the edge weight of Shuihua to Haerbin in network G is calculated by the sum of u1 to u3 and u1 to u4, and
the edge weight of Shuihua to Yichun is the sum of the number of times between u1 and u2

compares the communication duration and the number of communications, finding that they
have a strong linear relationship. In view of this point, we use the interaction number between
the two cities as the edge weight.

The network is a directed network. The degree of network and the relationship between
network properties and GDP are analyzed. The relationship between network properties and
geographic characteristics is also analyzed. Fig. 3a shows the degree distribution of the
network. It can be seen that the degree of the network reaches the peak at 200. There exists
a long tail in the graph, where the degree is about 700, and the probability is relatively small.
This indicates that there are some cities have two-way interaction to almost all cities, for there
are only 359 nodes in total. The degree distribution are similar to work of Guanghua et al. [25]
and De Montis et al. [31].

Guanghua et al. [25] compared the distribution of edge strength with the distribution of the
degree. In order to reveal the difference of the intensity of each city in the network, Fig. 3b shows
the distribution of the weighted degree. The number of interactions is used as the weight of the
edge, and the nodes’ weighted degree is the value obtained by adding all the edge weights of the
node. Degrees show the number of nodes connected by the node, the weighted degree shows the
total interaction times of the node with other nodes. It can be summarized that if the strength of
each edge is consistent, then the weighted degree distribution of the nodes will be consistent with
the degree distribution. While the actual distribution is an approximate power-law distribution,
with R2 = 0.7796. In fact, it is impossible that a city has same connections with every city. Some
densely populated cities with relatively high levels of economic development interact more
intensively than cities with lower economic levels. The power-law distribution also reveals the
uneven distribution of the influence of Chinese cities in the network to a certain extent.

As shown in Fig. 4, the degree and GDP ranks have a significant correlation with a
correlation coefficient of 0.8633. The betweeness and GDP also show a linear relationship
with a correlation coefficient of 0.8350. And P-values of the significance test of two case is
less than 0.001, which indicates their linear correlation is significant. In section 3 we

Geoinformatica

Fig. 3 Basic features of network G1. a. Degree distribution. b. Degree with interaction weight on a log-log plot

mentioned that the degree of a node is a measure of the ability of a node to connect with other
nodes locally in the network, while the betweenness centrality measures the ability of the node
to relate to the overall network.

At the same time, from the perspective of public opinion, the nodes with relatively high
degree the influence in public opinion is relatively high. The nodes with higher betweeenness
have higher influence on the overall network. GDP is commonly used to measure the level of
economic development within the administrative region.

The high correlation coefficients show that the city-node degree and the betweenness
centrality have strong connection with the city-economy. To a large extent, it shows that if a
city is more active in the Internet, and more intensively connected to other cities, it would also
show economic vitality.

The distribution of network interactions over distances is also analyzed, as shown in Fig. 5a
and b. In Fig. 4a, it is found that the distribution of distance is an approximate log-normal
distribution, with mean of 1338.09, and variance of 1,450,610. We use the distance between
the two cities to approximate the actual distance of interaction between users in different cities.
The distance of all interactions is calculated and the distribution of all interactions’ distance is
plotted (without considering the interaction in the same city) in Fig. 5b.

In Fig. 5a and b, it can be seen that the probability of closer distance in Fig. 5b is higher
than that in Fig. 5a. If the density of the interaction between each pair of cities are exactly the
same, the interaction’s distance distribution should be exactly the same as the distance
distribution. But the actual distribution shows that there are more interactions with closer

Geoinformatica

Fig. 4 Properties of node compared with economy features. a. Each city has an economic and degree rank, and
we found that the economy is positively correlated with the degree. b. Each city has a betweeenness rank, we also
found that economy is positive correlated with betweenness

distance. This indicates that the impact of geographical distance still exists on the online
interaction. In real world, people with closer distance usually interact with each other more
frequently. It is found that the spread of public opinion in the network has also been affected by
the regions. Public opinion would not spread in the network evenly, it spreads from near places
to far places.

5 City-node community and betweenness

City nodes can be divide into groups by community detection. Intra-group interactions are
more intensive than interactions with nodes out group. The main structure in the network is
reflected by communities. The community detection based on the city network G can reflect
the characteristics of the network interaction in the region. The results are shown in Fig. 6, with
a total of 21 communities. And the composition of the communities has a strong correlation
with the boundaries of provincial administrative. But there are also five regions that commu-
nities do not correspond with provincial units exactly. For example, the Chongqing, Sichuan
and Tibet form a community together, the Guangxi, Guangdong, Hong Kong and Macau form
a community. There are other three community that contains more than one province-level
units as shown in Fig. 6. The most prominent features of the community are the aggregation
and continuity of the city-nodes. According to the general idea, the interaction in the network

Geoinformatica

Fig. 5 Distance distribution of cities and distance distribution of interactions. a. The distribution of distance
between cities. b. We use the distance between city A and city B to represent the distance of the interaction
between users in A and B, then we get the distance distribution of interactions

should not follow the law of face-to-face interaction, so that the city-nodes of a community
should not be geographically clustered in one area. But the results show that the geographical
distance in the network interaction does not disappear, and the city-nodes in a community also
locate together. This is consistent with the conclusion in section 4. It can also be explained that
the interaction of public opinion is affected by the geographical factors to a large extent. The
information in the network spread from near places to far in the region Fig. 7.

Look at the calculated results of betweenness centrality displayed on the map, as shown in
Fig. 7. It can be seen that the cities with high betweenness centrality are not evenly distributed
in the country, showing more in southeast and less in northwest. At the same time, in a
province or a region, the capital city of province, municipalities and SARs are the cities with
highest betweenness. In order to illustrate this point clearly, here the cities whose betweenness
ranks top two in each community are shown in Fig. 8 and listed in Table 2. Through analysis of
Table 2, it can be seen that there are 19 provincial capitals and two municipalities that the
betweenness ranked the first. It can be found that within the community, the center of the
network coincides very well with the political center. It is consistent with the conclusion in
section 4.

In order to explain the relationships between the communities and the betweenness in the
network better, we rank the cities’ GDP and the betweenness within each community. It can be
seen from the Fig. 9 that the points are basically linearly distributed. The correlation coefficient
between the GDP rank and the mediator rank of the nodes is 0.8821, which is higher than the

Geoinformatica

Fig. 6 Community detection results

correlation coefficient between the center of the city node and the rank of GDP in the
section 4 which is 0.8350, and P-values of the significance test is less than 0.001. It
indicates that for the local areas, the network center and the economic center correspond
with each other better Table 3.

Therefore, several conclusions can be drawn from the analysis of the results of community

detection, the betweenness centrality and the GDP value.

First, community division match administrative division well, most of the communities
match a provincial-level administrative region, a small part also happens to contain several
provincial-level administrative regions. This shows that the online interaction is affected by the
administrative division obviously, the internal interactions within a large administrative area
are relative more than the interaction with the outside.

Second, the cities with high betweenness centrality are scattered in the whole country,
showing the characteristics of higher in southeast and lower in northwest, and the cities with
high betweenness in the community are the provincial capital or the municipality. At the same
time, the GDP of cities with high betweenness rank highly. It indicates that interaction center
of the network and economic and political center correspond well within each region. This has
important guiding significance for our public opinion supervision.

Geoinformatica

Fig. 7 The betweenness of the city-nodes. Note: We color the city nodes by its betweenness, the color will be
deeper with a bigger betweenness

6 The similarity between the derived community boundaries
and the administrative boundaries

Community division is a kind of division of all cities, administrative division is also a
kind of division. The former one is based on the actual Internet formed by the interaction
of users around the country, and the latter is administrative division based on social,
economic, political and other practical situation. Following the method in work of
Guanghua et al. [25], the adjusted Rand index [40] is used to measure the similarity
between the two divisions. A pair of nodes have four cases whether they are belong to
the same community in two divisions. Rand Index is calculated by the number of four
cases among all pairs of nodes.

Rand ¼

a þ d
a þ b þ c þ d

Where a is the number of node pairs in the same community in both divisions, and d is the
number of nodes pairs not in the in the same community in two divisions. c and d count the
number of other two cases.

The adjusted Rand index (ARI) is the corrected-for-chance version of the Rand index. The

contingency table is used to calculate ARI as shown in Table 3.

Geoinformatica

Fig. 8 The cities whose betweenness rank top two in each community

Variables in the formula are derived from contingency tables. The ARI of commu-
nity division and administrative division is 0.69, they are similar to each other, but the
ARI is lower than that in work of Guanghua et al. [25]. It can be surmised that because
the interactions among several regions are more intensive, and the online interaction
may surpass the geographical limits, so the ARI is not very high. It is proved with the
next analysis.

Table 2 The cities whose betweenness rank top two in each community

\Community rank 0

1

2

\Community rank 7

\Community rank 14

1
2

1
2

1
2

4
3
Chengdu
Shenyang
Chongqing Changchun Nanyang
10

5
Zhengzhou Fuzhou

6

Wuhan
Yichang

Shanghai Guangzhou Beijing
Tianjin
Hangzhou Shenzhen
9
Changsha Harbin
Yiyang
16
Lanzhou Haikou
Sanya
Tianshui

Kunming Nanchang
Ganzhou
Dali

8
Xi’an
Xianyang
15

11
Urumqi
Mudanjiang Changji
17

18
Guiyang
Zunyi

12
Taiyuan
Yuncheng
19
Xining
Hercynian

Quanzhou
13
Hohhot
Baotou
20
Yinchuan
Shizuishan

Geoinformatica

Fig. 9 The GDP and Betweenness rank of every city in each community. Note: In each community, every city
has a betweenness rank and a GDP rank, we plot it in this figure such that every point in this picture represent a
city, the linear distribution of the points show that GDP and betweenness have strong relationship in each
community

(cid:4) (cid:5)
nij
2

þ ∑

j

(cid:6)
− ∑
i
(cid:4) (cid:5)
b j
2

(cid:4) (cid:5)
ai
2
(cid:7)

∑

(cid:6)
− ∑
i

(cid:4) (cid:5)
b j
j
2
(cid:4) (cid:5)
ai
2

∑

(cid:7).

(cid:4) (cid:5)
n
2
(cid:4) (cid:5)
b j
2

j

∑
ij
(cid:4) (cid:5)
ai
2

(cid:7).

(cid:4) (cid:5)
n
2

ARI ¼

(cid:6)

1
2

∑
i

We assume that there is a new division U, which is based on administrative division with
some changes. It is known that in community detection results, there are several communities
that contains more than one provincial-level units. We assume that these units that belong to
one community form one group in division U.

Table 3 The contingency table of two divisions

X \ Y

X1
X2
……
Xr
SUMS

Y1

n11
n21
……
nr1
b1

Y2

n12
n12
……
nr2
b2

……

……
……
……
……
……

Ys

n1s
n2s

nrs
bs

SUMS

a1
a2
……
ar

Geoinformatica

As shown in Table 4, several sets of provincial administrative units are considered as
groups in the division U. We get 20 groups data of different time points to form the 20 different
networks, each group data lasts for 48 h. The communities are detected and the results are
compared with administrative divisions and hypothetical divisions. The similarity is calculated
with the index of ARI. The ARI1 is calculated by community division and administrative
division, and the ARI2 is calculated by community division and hypothetical division U.

The results are shown in Table 5. It can be seen that the results of community detection are
similar to the hypothetical division U. It is proved that the big difference (ARI is just0.69)
between community division and administrative division is caused by the five community that
contains more than one province-level units.

The five regions are all special. First of all, these provincial administrative regions all gather
together, this is consistent with the conclusion in section 5. The provincial-level units that
belong to same community also have practical significance. Tibet is a plateau region with a
relatively low level of economic development. The state of the Tibet region need a lot of
assistance, and most of these aid got into Tibet through Sichuan. Chongqing became a
municipality from 1997, and most of Chongqing now is part of Sichuan Province by 1997.
And it is very easy to understand the close collection between Jilin and Liaoning, they are
belong to northeastern area, they have strong relationship with each other in economy and
politics.

The remaining three large communities just include China’s three large city agglomeration,
the Beijing-Tianjin-Hebei city agglomeration, the Pearl River Delta city agglomeration and the
Yangtze River Delta city agglomeration. The Political Bureau of the CPC Central Committee
held a meeting on April 30, 2015 to deliberate and adopt the Outline of Beijing-Tianjin-Hebei
Synergistic Development Plan. The Beijing-Tianjin Urban Agglomeration includes most cities
in Beijing, Tianjin and Hebei. Guangdong, Guangxi, Hong Kong and Macao form a commu-
nity. This is the embodiment of the Pearl River Delta economic circle. Jiangsu, Zhejiang,
Anhui, Shanghai is just around the Yangtze River Delta region.

It can be seen that there are strong political and economic factors where communities break
through the administrative limits. This also enriches the conclusion of section 5. The regional
interaction is more intensive than the external interaction. But the online interaction of the
Yangtze River Delta, Pearl River Delta, and Beijing-Tianjin-Hebei urban agglomeration go
beyond the geographical constraints because the economic development is prominent. Fur-
thermore, the economic development will also affect the online interaction.

7 The volatility and stability of the community detection results

The WeChat interaction network is a dynamic interactive network. Based on that, the network
G fluctuates with the advance of time, which affects the urban community division. In order to

Table 4 Assumed regions division

Regions

The administrative units that community contains

1
2
3
4
5

Tibet, Sichuan, Chongqing
Guangdong, Guangxi, Macao and Hong Kong
Beijing, Tianjin, Hebei, Shandong
Jiangsu, Zhejiang, Anhui, Shanghai
Jilin, Liaoning

Geoinformatica

Table 5 ARI calculate results

No.

ARI1

ARI2

No.

ARI1

ARI2

1
2
3
4
5
6
7
8
9
10

0.553155
0.6884943
0.5576074
0.5333643
0.5314087
0.6023728
0.6889082
0.6889082
0.6609144
0.6304591

0.9052137
1
0.8485016
0.8434762
0.9052137
0.9189837
1
1
0.9405446
1

11
12
13
14
15
16
17
18
19
20

0.660693
0.6895954
0.6932396
0.660693
0.660693
0.6932396
0.5776449
0.5776449
0.5776449
0.7025463

1
1
1
1
1
1
0.9052137
0.9052137
0.9052137
0.9633136

analyze the influence of time on network community detection results, we analyze the
temporal influence from two aspects of the temporal factors. The first is about the time length,
and the second is about time point that data set begin.

Seven different time length of three hours, six hours, 12 h, 24 h, 48 h, 96 h, and 192 h are
chosen, and 20 different network is constructed for each time length at 20 different time points.
We detect the communities in these networks, and get 140 results finally. We use Uhi to
represent results.

Uhi , h = 3 , 6 , 12 , 24 , 48 , 96 , 192 ; i = 1 , 2 , 3 … … 20,
It can be found that there will be significant fluctuations in the 140 detection results, but
there will be some regularity in this fluctuation, too. We can get the overall Baverage results^
based on these results. Since the results of the detection are community divisions, the mean
value is not readily available. However, the similarity between the two results of the 140
results can be obtained according to the ARI calculation method. The result with the highest
sum of the similarities of all the other results can represent the average state of the whole
detection result, so this result is taken as Average Detection Result:
(cid:9)

U

μ
hi

¼ U hi; max
i

h;

∑
0 ≠h;
h

0 ≠i

i

(cid:8)
ARI U hi; U h

0

0
i

μ
hi be Average Detection Result, we plot it in Fig.10 .

Let U
Comparing with Fig. 6, it can be seen in Fig. 10 that the Average Detection Result are
basically consistent with community detection result in section 5, which also shows stability of
the detection results. This confirm the rationality of the conclusion based on the community
detection result.

At the same time, there will be certain fluctuations in the detection results. That is,
network detection results of different time periods and different time points may be
different. Because the sample is not a simple single value, how to measure the fluctu-
ations in detection results is difficult.
The results are compared with U

μ
hi, similarity of the different network community detection
μ
hi is calculated by method of ARI. As shown in Fig. 11. It can
results and the average result U
be seen that when the network time window is greater than or equal to 6 h, the detection result
is very stable, and the similarity between most of the results and the average result is high,
which further shows the reliability of the community division results.

The volatility of the detection results is measured by the community ownership of the city.
The volatility of the city in the community detection is measured by calculating the times of

Geoinformatica

Fig. 10 Average Detection Result of community detection results

occurrence in the community that the city belong to in the Average Detection Result. If the
stability is stronger, the city will appearances more in the community.

It can be seen in Fig. 12 that there are a few cities with strong stability. On the whole, some
cities are very stable, many of them are the capital cities. We compare Fig.12 with Fig.8, it can
be seen that the cities with high betweenness correspond well with those with high stability.
Generally speaking, the stability of cities in community center is relatively strong, while that
locate in the community edge is relatively weak.

8 Discussion

Public opinion propagation depends on the state of interaction in web. With the data of
WeChat interaction network we can analyze the online interaction network across the country.
The network G is constructed, and its characteristics is analyzed including degree, weighted
degree, GDP of nodes and distance distribution. We also detect the communities in the
network and get some conclusions. There are some interesting results. These results help us

Geoinformatica

Fig. 11 The ARI of networks of different time length with Average Detection Result

to better understand the spreading characteristics of public opinion on the network. Some new
ideas for public opinion management can be provided.

It is found that the GDP of the city-nodes correlates with degree and betweenness well, this
is consistent with the results of Mao et al. [16]. Administrative, economic center and the center
of the interaction network correspond with each other well. The interaction online reflect the
region’s administrative and economic situation to a certain extent. It can be speculated that
seizing the regional center is important and should attract enough attention.

It is also found that the communities in the network correspond with administrative
boundaries well. This finding is consistent with the conclusion that online interaction
does not break through distance limits. In work of State et al. [41], they found that the
world can be divided into eight cultural circle based on the data set of email and
Twitter. There are also studies ([23, 25–29]) found that the communities of the network
correspond with administrative boundaries. It
indicates that administrative division
affects the network interaction and the spreading of public opinion. Administrative area
network interaction is more intensive than the outside world, in which public opinion
spread more quickly. Sub-regional online public opinion management should be taken
into consideration.

In the community division results, one community corresponds to a provincial ad-
ministrative, except for five regions where a community contains more than one provin-
cial administrative. The internal interactions of Tibet, Sichuan and Chongqing because
the economy connection between Tibet and Sichuan is intensive, and most area of

Geoinformatica

Fig. 12 The stability of the cities. Note: We calculate the times that each city appears in each community,
suppose that if the time a city appears in a community, the city is stable in a community, we color all the cities
according to that, and make sure that deeper color represent more stable cities

Chongqing belong to Sichuan before 1997. The province-level units that belong to a
same community all connect with each other intensive with economic, historical and
political reasons. In Northeast, Jilin and Liaoning have intensive connection obviously. The
remaining three are just the scope of China’s three major urban agglomerations, that is, Beijing-
Tianjin-Hebei, Yangtze River Delta and Pearl River Delta. This shows that if economic
development level is higher, the online interaction break through the geographical constraints
more easily. The regional network interaction is more intensive, then public opinion will spread
more rapidly. The management of these areas should be different, giving full consideration to its
economy and political characteristic.

Finally, the stability and volatility of the community detection results are analyzed. The
authors find that the cities in the fringe have relatively strong volatility in the community, and
the stability of the central cites is stronger. The volatility and stability of the city-nodes in the
community reflects the tendency of the city to connect in the online interaction. The cities with
high stability have relatively high level of economy development.

Geoinformatica

9 Conclusion

Research and analysis of public opinion rarely involves the information of regional interaction. In
this paper, we construct the network G, analyze the basic geographic characteristics of the network.
WeChat network is analyzed with methods of complex network. It can be concluded that through
the analysis of online social network, we can get deeper understanding of spatial interaction
characteristics.

Furthermore, the public opinion on the online social network is difficult to manage. The
results of the geographic characteristics analysis give some new idea and strategy to manage
the online public opinion.

First of all, the sub-regional public opinion management is more appropriate because the
spreads of public opinion is affected by the administrative division, and the interaction within
the region is significantly more intensive than the outside.

Secondly, public opinion management can be carried out in a manner similar to that of a
multi-level government, or even attached to a government organization. Because regions are
greatly affected by the central area in the online network.

Finally, the propagation of public opinion has its own characteristics. Cultural and eco-
nomic conditions vary widely in different areas. It is necessary to develop different manage-
ment methods according to specific characteristic. For example, the interaction is intensive in
regions with high level of economic development, public opinion would spread more rapidly,
so the regulation of public opinion and the management of crisis need to be more timely and
effective. For areas with special historical and political circumstances, a more professional
management should be developed in the guidance of experts in the field.

However, different kinds of online social network may have different characteristics. And
the overall management strategy should take most of all online social network into consider-
ation, such as Weibo, WeChat and QQ. Even though, spatial interaction information is
important in analysis of online social network, and it can give us deeper understanding of
the interaction characteristics online, and give new idea to public opinion management online.

Acknowledgements This study is supported by National Key Research & Development (R&D) Plan under
Grant No. 2017YFC0803300 and the National Natural Science Foundation of China under Grant Nos.
71673292,61503402 and Guangdong Key Laboratory for Big Data Analysis and Simulation of Public Opin-
ion. We also thank Fibonacci Consulting Co. Ltd. for the big dataset

References

1. Mislove A, Marcon M, Gummadi KP, Druschel P, Bhattacharjee B (2007) Measurement and analysis of
online social networks. Paper presented at the Proceedings of the 7th ACM SIGCOMM conference on
Internet measurement, San Diego

2. Kumar R, Novak J, Tomkins A (2010) Structure and Evolution of Online Social Networks. In: Yu PS, Han
J, Faloutsos C (eds) Link Mining: Models, Algorithms, and Applications. Springer New York, New York,
pp 337–357. https://doi.org/10.1007/978-1-4419-6515-8_13

3. Barrat A, Barthélemy M, Pastor-Satorras R, Vespignani A (2004) The architecture of complex weighted
networks. Proc Natl Acad Sci U S A 101(11):3747–3752. https://doi.org/10.1073/pnas.0400087101
4. Watts DJ, Strogatz SH (1998) Collective dynamics of small-world networks. Nature 393(6684):440–442
5. Barabási A-L, Albert R (1999) Emergence of Scaling in Random Networks. Science 286(5439):509
6. Benevenuto F, Rodrigues T, Cha M, Almeida V (2009) Characterizing user behavior in online social
networks. Paper presented at the Proceedings of the 9th ACM SIGCOMM conference on Internet
measurement conference, Chicago

Geoinformatica

7. Schneider F, Feldmann A, Krishnamurthy B, Willinger W (2009) Understanding online social network
usage from a network perspective. Paper presented at the Proceedings of the 9th ACM SIGCOMM
conference on Internet measurement conference, Chicago

8. Nazir A, Raza S, Chuah C-N (2008) Unveiling facebook: a measurement study of social network based
applications. Paper presented at the Proceedings of the 8th ACM SIGCOMM conference on Internet
measurement, Vouliagmeni, Greece

9. Granovetter M (1978) Threshold Models of Collective Behavior. Am J Sociol 83(6):1420–1443. https://doi.

org/10.1086/226707

10. Watts DJ (2002) A simple model of global cascades on random networks. Proc Natl Acad Sci U S A 99(9):

5766–5771. https://doi.org/10.1073/pnas.082090499

11. Gong NZ, Xu W, Huang L, Mittal P, Stefanov E, Sekar V, Song D (2012) Evolution of social-attribute
networks: measurements, modeling, and implications using google+. Paper presented at the Proceedings of
the 2012 ACM conference on Internet measurement conference, Boston

12. Gautier K, Francesco C, Carlo R, Vincent DB (2009) Urban gravity: a model for inter-city telecom-
munication flows. Journal of Statistical Mechanics: Theory and Experiment 2009(07):L07003
13. Roth C, Kang SM, Batty M, Barthélemy M (2011) Structure of urban movements: polycentric activity and
entangled hierarchical flows. PLoS One 6(1):e15923. https://doi.org/10.1371/journal.pone.0015923
14. Liu Z, Huang Y (2014) Community detection from location-tagged networks[C]// ACM Sigspatial

International Conference on Advances in Geographic Information Systems. ACM, pp 525–528

15. Ratti C, Sobolevsky S, Calabrese F, Andris C, Reades J, Martino M, Claxton R, Strogatz SH (2010)
Redrawing the map of Great Britain from a network of human interactions. PLoS One 5(12):e14248.
https://doi.org/10.1371/journal.pone.0014248

16. Moyano LG, Thomae ORM, Frias-Martinez E (2012) Uncovering the Spatio-temporal Structure of Social
Networks Using Cell Phone Records. Paper presented at the Proceedings of the 2012 I.E. 12th International
Conference on Data Mining Workshops

17. Ullman EL, Boyce RR (1980) Geography as spatial interaction. University of Washington Press 44:13–27
18. Noronha VT, Goodchild MF (2005) Modeling Interregional Interaction: Implications for Defining

Functional Regions. Ann Assoc Am Geogr 82(1):86–102

19. Castells M (1996) Rise of the Network Society: The Information Age: Economy, Society and Culture.

Blackwell Publishers, Inc. 48(2):132–134

20. Guanghua C, Yu L, Li S, Yong G (2017) Understanding the effects of administrative boundary in sampling
spatially embedded networks. Physica A: Statistical Mechanics and its Applications 466:616–625.
https://doi.org/10.1016/j.physa.2016.09.023

21. Blondel V, Krings G, Thomas I (2010) Regions and borders of mobile telephony in belgium and in the

brussels metropolitan zone. Brussels Studies 42(4):1–12

22. Freeman LC (1977) A Set of Measures of Centrality Based on Betweenness. Sociometry 40(1):35–41.

https://doi.org/10.2307/3033543

23. Guimerà R, Mossa S, Turtschi A, Amaral LAN (2005) The Worldwide Air Transportation Network:
Anomalous Centrality, Community Structure, and Cities' Global Roles. Proc Natl Acad Sci U S A
102(22):7794–7799

24. Onnela J, Saramäki J, Hyvönen J, Szabó G, de Menezes M, Kaski K, Barabási A, Kertész J (2007) Analysis
of a large-scale weighted network of one-to-one human communication. New J Phys 9(6). https://doi.
org/10.1088/1367-2630/9/6/179

25. Guanghua C, Jean-Claude T, Daoqin T, Li S, Yu L (2016) Uncovering regional characteristics from mobile
phone data: A network science approach. Pap Reg Sci 95(3):613–631. https://doi.org/10.1111/pirs.12149
26. Palla G, Barabási A-L, Vicsek T (2007) Quantifying social group evolution. Nature 446(7136):664–667
27. Lambiotte R, Blondel V, de Kerchove C, Huens E, Prieur C, Smoreda Z, Van Dooren P (2008) Geographical
dispersal of mobile communication networks. Physica A: Statistical Mechanics and its Applications 387.
https://doi.org/10.1016/j.physa.2008.05.014

28. Song G, Yu L, Yaoli W, Xiujun M (2013) Discovering Spatial Interaction Communities from Mobile Phone

Data. Trans GIS 17(3):463–481. https://doi.org/10.1111/tgis.12042

29. Newman ME, Girvan M (2004) Finding and evaluating community structure in networks. Phys Rev

E Stat Nonlinear Soft Matter Phys 69(2 Pt 2):026113. https://doi.org/10.1103/physreve.69.026113

30. Sobolevsky S, Szell M, Campari R, Couronné T, Smoreda Z, Ratti C (2013) Delineating geographical
regions with networks of human interactions in an extensive set of countries. PLoS One 8(12):e81707.
https://doi.org/10.1371/journal.pone.0081707

31. Montis AD, Barthelemy M, Chessa A, Vespignani A (2005) The structure of Inter-Urban traffic: A weighted

32. Fortunato S (2010) Community detection in graphs. Phys Rep 486(3–5):75–174. https://doi.org/10.1016/j.

network analysis. Physics 34(5):905–924

physrep.2009.11.002

Geoinformatica

33. Lancichinetti A, Fortunato S (2009) Community detection algorithms: a comparative analysis. Phys Rev E

Stat Nonlinear Soft Matter Phys 80(5 Pt 2):056117. https://doi.org/10.1103/physreve.80.056117

34. Rosvall M, Bergstrom CT (2008) Maps of random walks on complex networks reveal community structure.

Proc Natl Acad Sci U S A 105(4):1118–1123. https://doi.org/10.1073/pnas.0706851105

35. Gautreau A, Barrat A, Barthélemy M (2009) Microdynamics in stationary complex networks. Proc Natl

Acad Sci U S A 106(22):8847–8852. https://doi.org/10.1073/pnas.0811113106

36. Holme P (2003) Network dynamics of ongoing social relationships. Physics. https://doi.org/10.1209

/epl/i2003-00505-4

37. Krings G, Karsai M, Bernhardsson S, Blondel VD, Saramäki J (2012) Effects of time window size and
placement on the structure of an aggregated communication network. EPJ Data Science 1(1):4. https://doi.
org/10.1140/epjds4

38. Jian S, Ke X, Meina S, Xiaosu Z (2014) Credibility evaluation method of domestic IP address database.

Journal of Computer Applications (z2):4-6,15

39. Freeman RL (2005) Fundamentals of Telecommunications. Wiley-IEEE Press. https://doi.org/10.1002

40. Hubert L, Arabie P (1985) Comparing partitions. J Classif 2(1):193–218. https://doi.org/10.1007

/0471224162.ch1

/BF01908075

41. State B, Park P, Weber I, Macy M (2015) The mesh of civilizations in the global network of digital

communication. PLoS One 10(5):e0122543. https://doi.org/10.1371/journal.pone.0122543

Chuan Ai , he obtained his Master’s Degree from National University of Defense Technology, China in 2016.
He is studying for a Ph.D. Degree in the National University of Defense Technology currently. His main research
direction includes the modeling and simulation of the propagation of unconventional online public opinion.

Geoinformatica

Bin Chen , he obtained his Ph.D. Degree from National University of Defense Technology, China in 2010, he is
currently an associate professor in College of Information Systems and Management, National University of
Defense Technology. He has hosted 3 projects of the National Natural Science Foundation of China in the field of
emergency management of non-conventional emergencies. His research focuses on emergency management of
unconventional emergencies, modeling and simulation of network public opinion and multi-agent modeling and
simulation.

Lingnan He , he obtained his Ph.D. Degree from Sun Yat-sen University, China in 2012. He is now a lecturer at
the School of Communication and Design of Sun Yat-Sen University. His research interests include social
psychology, communication and public relations psychology, network public opinion analysis, new media
behavior research and user experience.

Geoinformatica

Kaisheng Lai , he obtained his Ph.D. Degree in Social Psychology from Nankai University, China in 2016.
Currently, he is a research associate at Sun Yat-sen University, China. His research interests include Big Data and
Communication, Geographical Psychology, and Cyberpsychology.

Xiaogang Qiu , he is a Professor in College of Information Systems and Management, National University of
Defense Technology. His research focuses on system simulation, modeling in emergency management and so on.

