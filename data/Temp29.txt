The Cartographic Journal
The World of Mapping

ISSN: 0008-7041 (Print) 1743-2774 (Online) Journal homepage: https://www.tandfonline.com/loi/ycaj20

Smart Cartographic Background Symbolization for
Map Mashups in Geoportals: A Proof of Concept by
Example of Landuse Representation

Nadia H. Panchaud & Lorenz Hurni

To cite this article: Nadia H. Panchaud & Lorenz Hurni (2018): Smart Cartographic Background
Symbolization for Map Mashups in Geoportals: A Proof of Concept by Example of Landuse
Representation, The Cartographic Journal, DOI: 10.1080/00087041.2017.1414019

To link to this article:  https://doi.org/10.1080/00087041.2017.1414019

Published online: 16 Nov 2018.

Submit your article to this journal 

Article views: 39

View Crossmark data

Full Terms & Conditions of access and use can be found at
https://www.tandfonline.com/action/journalInformation?journalCode=ycaj20

THE CARTOGRAPHIC JOURNAL
https://doi.org/10.1080/00087041.2017.1414019

REFEREED PAPER

Smart Cartographic Background Symbolization for Map Mashups in Geoportals:
A Proof of Concept by Example of Landuse Representation

Nadia H. Panchaud

and Lorenz Hurni

Institute of Cartography and Geoinformation, ETH Zurich, Zurich, Switzerland

ABSTRACT
Geospatial data are now widely available to the general public thanks to geoportals and online
mapping platforms. However, creating a map involves more than just combining data layers.
Thus we develop cartographic functions for geoportals to support better visual hierarchy in
user map mashups. This includes a couple of preparatory steps followed by a smart
cartographic background symbolization derived from the original
layer style. We evaluate
diﬀerent approaches to background symbolization: greyscale, desaturation, and smart
background. The diﬀerent background symbolization methods are analysed with two
concrete map examples and evaluated with a survey. The smart background symbolization
developed in this work improves the visual hierarchy of the map mashup by reducing the
visual importance of the background layers.

KEYWORDS
geoportal; web cartography;
smart symbolization; user
map; map mashup; map
design

Introduction

Thanks to geoportals and online mapping platforms, geospatial data of various kinds and sources are now widely
available to the general public. However, creating a map involves more than just combining data layers. For
instance, issues can arise when a large quantity of information is displayed on the map or when the content is not
appropriately symbolized and organized. Proper symbolization of spatial data on maps is paramount to a
successful communication, and thus to understanding the spatial phenomenon displayed on the map. The
cartographic quality of user-created maps on geoportals and online mapping platform is often low because no
trained cartographer is involved in the process (Harrie et al., 2011). Additionally, these platforms lack tools that
can provide improvements to the map symbology. Thus, a major challenge lies in integrating methods and
functions that can replicate the work and expertise of a cartographer within these platforms’ architectures.
Geoportals and similar platforms propose pre-deﬁned styles for standalone layers, but often oﬀer no possibility to
adapt the styles once several layers are combined in a user map mashup. Additionally, the users often wish to
combine not only data from diﬀerent sources within the platform but also with their own data, which results in
suboptimal data visualization because there is no possibility to change the background symbolization.

Even though methods to solve cartographic conﬂicts on geoportals have been developed in the past, they oﬀer
solutions diﬃcult to implement in other platforms. The reasons that restrict their transfer comprise their
specialization, complexity, and requirement for high processing capabilities. The motivation behind this work
consists in providing tools that improve the legibility of user maps on geoportals and online mapping
platforms. Creating these tools involves developing strategies and methods that solve cartographic conﬂicts
often found in geoportals. This work focuses on conﬂicts arising from the lack of visual hierarchy in user-
generated mashup maps and that can be solved by changes in symbology. The tools developed should be
general enough to be transferable to other platforms and detailed enough to bring an added-value to the user maps.
First, we review common issues that are linked to the visual hierarchy in map mashups and their potential solutions.
Then, we explain the preparatory steps and the background symbolization functions we developed to improve the
cartographic quality of map mashups. We show how the functions work with concrete examples from existing
geoportal data. Afterwards, we evaluate the results based on an analysis and an online survey. The work concludes
with reﬂections on future improvements to the tools and their integration within online platforms.

Methodology

To improve the visual hierarchy, we develop a set of rules and assumptions to be implemented within a geoportal.
We build on an earlier work that deﬁned a contextual map model and a hierarchical object catalogue for spatial

CONTACT Nadia H. Panchaud

nadia.panchaud@ethz.ch

© 2018 The British Cartographic Society

2

N. H. PANCHAUD AND L. HURNI

Figure 1. Casual map-maker persona and use cases ((a)–(i)). The main scope is the ‘geoportal’ with a sub-scope ‘wizard’. The geoportal is the main interface
for data exploration and selection, whereas the wizard applies the cartographic functions developed in this work.

data most found on generic national geoportals. It provides the frame and parameters on which the rules and
assumptions can be deﬁned.

First, we collect principles regarding the lack of visual hierarchy and the role of colours in maps. Rules, well-
thought assumptions, and sensible default values are deﬁned from the collected principles to construct smart
cartographic functions. Good default values are essential for users with no or little training in geovisualization
(Cartwright et al., 2001). This process is seconded by an in-depth review of best practices and previous work in
corresponding topics.

Second, we integrate the diﬀerent aspects of the rules and assumptions within the geoportal. To mimic the work
and reasoning of a cartographer as closely as possible, we introduce a prioritization of the rules, which allow to
show the balancing of diﬀerent, and occasionally contradicting, cartographic principles during the map design
process.

To support the evaluation and integration of the functions, we deﬁne the persona of a casual online map maker
(non-professional cartographer), who wants to compose a map, and the corresponding use cases (see Figure 1).
More speciﬁcally, this map maker needs a general map for orientation purpose with transportation means as
the main theme and at a medium scale. The map maker wishes to use an alternative solution to the traditional
topographic maps or the major online map platforms, which oﬀer too many details (i.e. a large quantity of
labels, icons, and roads). Thus, the map maker decides to use an online geoportal that allows combining
individual layers into a map.

The developed functions are integrated within the Graphical User Interface (GUI) of the actual geoportal and
wizard for testing. We evaluate the resulting map mashups in two ways: (1) a close analysis based on four criteria
and (2) an online qualitative survey. The analysis is based on the ability of each modiﬁed colour scheme to retain
colour information, to show contrast within itself, to allow diﬀerentiating colour classes, and to be combined with a
shaded relief.

The online qualitative survey focuses on two characteristics of the modiﬁed colours schemes, namely to retain
colour information and to help diﬀerentiate the foreground information from the background. The survey was
built using two map examples with similar content but for diﬀerent geographic locations and diﬀerent scales.
The ﬁrst task of the respondents was to rank the three diﬀerent background symbolizations as applied to each
map example. Then, they were asked to assess each background symbolization separately in regards to the two
characteristics mentioned above. The 21 respondents (4 women and 17 men) are trained cartographers, GIS
specialists, and/or working with maps on a regular basis. One-third of respondents designs or makes maps
themselves ‘very often’; one-third ‘often’; and one-third ‘sometimes’. Most of them are in between 25 and 44
years old (17); 1 is younger and 3 are between 45 and 64 years old.

Related work

For a cartographer, providing legible maps represents an essential part of one’s work. A legible map shows the
spatial phenomenon in a clear manner, meaning that ‘the user can eﬃciently interpret the map visually’ (Harrie
et al., 2011). Among other aspects, it involves attributing diﬀerent levels of visual importance to the map
elements to structure the map and help the map reader understand the information. But, map legibility can be

THE CARTOGRAPHIC JOURNAL

3

reduced when the density of information displayed on the map is too high or when not appropriately symbolized.
Removing unnecessary information and keeping only what support the message of the map improve its legibility by
eliminating distractions and background noise (Spiess, 1970a). Similarly, using appropriate symbology supports a
clear visual hierarchy within the map.

Providing adequate symbolization of data on geoportals can be challenging because users can combine data
however they wish in map mashups, but with little control on symbolization. However, geoportals’ capabilities
and functionalities have progressed in the recent years and oﬀer more complex visualization methods than
before and thus should allow to support optimal symbolization for legible map mashups. For instance,
standards such as the Styled Layer Descriptor (SLD) have been extended to support diagrams representation
and thematic cartography; 3D cartography can also be realized with service-driven approaches; and additional
interactive functions supporting customization are now available (Iosifescu et al., 2013). Original work on
solving issues regarding the combination of satellite imagery and vector maps on geoportals has been
conducted with overlay and blending techniques and relies on an extended SLD standard as well (Hoarau and
Christophe, 2015).

Many advances on geoportals regarding symbolization are found in the area of expanded customization options
and tools to help non-informed users make appropriate choices: for instance, picking a new colour scheme can be
supported by existing colour palettes suggested to the users or map samples (Lafay et al., 2015). Often, these tools
are associated with constraints, such as cartographic conventions, contrast test and colour pattern, that prevent
suboptimal options. Finally, semantic metadata and linked data start being used and integrated into geoportals
(Hu et al., 2015; Panchaud et al., 2017) and thus allow the deﬁnition of complex cartographic functions relying
on the meaning of the data behind the map.

Visual hierarchy

The concept of visual hierarchy, also called ‘ﬁgure–ground phenomenon’ from the Gestalt theory (Ellis, 1955),
(Robinson et al., 1995), or ‘visual planes’
‘levels of visual prominence’,
(MacEachren, 1995) pertains to the ‘perceptual organization’ of the map (Slocum et al., 2009). It enables the
map reader to perceive a diﬀerence between the information that composes the foreground (ﬁgure) and the
information in the background (ground).

‘visual or conceptual

levels’

Contrast is crucial to diﬀerentiate the base map from the main topic of the map (Spiess, 1970b). Creating a clear
visual hierarchy include the use of marked brightness contrasts and contrasts at the edges between ﬁgures and
grounds (Spiess, 1970b; Dent, 1972). A minimal number of two levels should be present in any well-designed
map, one for the main topic and one for background information (Spiess, 1970b). Then, a cartographer can
interpose supplementary levels for a ﬁner visual diﬀerentiation (Robinson et al., 1995).

For points and lines in the role of ﬁgure, making the features darker than the surrounding information is one
option. However, for areas, it was shown that using dark and light features was not a sure way to indicate the ﬁgure
or ground (MacEachren, 1995; MacEachren and Mistrick, 1992). Conventional principles state that the background
layer should be symbolized in toned down and lighter colours (Spiess, 1970b), but Hoarau (2011) showed that a
darker background is possible as long as the contrast to the other themes is well marked.

As a general rule, large contrasts in brightness and thick lines against thin line are good practices. Dent (1972)
mentioned additional ways to provide contrast: contrast of hue, contrast of cold and warm colours, complementary
contrast, simultaneous contrast, contrast of saturation, contrast of extension. Simultaneous contrast should be
avoided in cartography; whereas saturation contrast helps in the formation of ﬁgure and background (Bláha
and Štěrba, 2014).

An empirical study shows that hue and value impact the perceived contrast between two colours compared to
the mathematical contrast (Buard and Ruas, 2007). Using a chromatic circle, cartographic experts were asked to
evaluate diﬀerences in hue and value. For instance, between a red and a pink of the same value, the red appear
darker. It was found that neighbouring colours on the chromatic circle are not perceived as being separated by
equal steps of hue or value. The results of the study allow to recalibrate colour contrasts calculation to take into
account the perceived contrast between colours.

The literature provides a large body of knowledge to improve map legibility with the help of contrast and line
thickness. However, for online on-demand maps, the cartographer is only marginally part of the map making
process. Consequently, the quality and legibility of the map created by the users can be much lower (Bucher
et al., 2007; Field et al., 2011; Harrie et al., 2011). This inference leads to the development of tools to improve
the symbolization of online user maps. Color Brewer (Brewer and Harrower, 2013) is a well-known example of
a standalone tool to help informal, and professional alike, map makers improve their colour schemes. Other
‘Brewers’ have been then developed to help map makers produce better maps, such as the Type Brewer

4

N. H. PANCHAUD AND L. HURNI

(Sheesley, 2006), the Map Symbol Brewer (Schnabel, 2007), the Projection Wizard (Šavrič et al., 2016), and the
OCAD ThematicMapper (Tsorlini et al., 2015).

Background symbology

Online on-demand maps often have a colour-saturated base map and thus they need to be de-emphasized when
combined with other layers in the foreground. Toomanian et al. (2012) suggest an approach based on colour
saturation which involves converting the colour from Red–Green–Blue (RGB) to Hue–Saturation–Value (HSV)
to decrease the saturation according to pre-deﬁned ranges before reconverting the colour to RGB. This
approach is combined with a more complex method to solve conﬂicts of polygon overlapping the base map:
transformation of a polygon’s ﬁll into a symbol pattern. Strong and saturated colours are chosen to diﬀerentiate
clearly the polygon from the base map (background). Additionally, polygon borders and the symbols are of the
same colour to guarantee they are associated with each other. The symbols are kept simple but mimetic, as
argued by Robinson et al. (1995) and MacEachren (1995). A further study (Kiik, 2015) tested the approach of
Toomanian et al. (2012) against the representation of polygons only with boundaries, with a transparent ﬁll, or
with hatches. This eye-tracking study shows that the preferred map design is the transparency solution, which
is also the most eﬃcient method for polygon identiﬁcation (followed closely by symbols and hatches).

When the diﬀerent aspects of cartographic design mentioned above are not taken into account, this leads to
lower map quality and legibility. The most impactful types of errors are ‘incorrect usage of cartographic
representation method […], visual and/or dynamic variables […], semantic and pragmatic error’ (Bielecka and
Dukaczewski, 2009). Other studies show that poor cartographic visualizations can confuse the users (i.e. map
reader) (Jenny et al., 2010), prevent the optimal use of geoportal or similar online cartographic environment
(He et al., 2012), and decrease map legibility (Huang and Gartner, 2012).

For all the above-mentioned reasons, providing symbolization tools improving map legibility for online
mapping platforms support a broader purpose than just appropriate symbology; it also facilitates a more
eﬃcient map communication process and use of the online platform.

Preparatory steps

This section explains the preparatory steps that are performed before applying a method to improve the
background symbolization of the map mashups.

Data in geoportals are often organized in diﬀerent map products or topics. In the geoportal used to test the
functions, the user can select and combine any layers from diﬀerent map products and add them to a ‘user
map’ (see use cases (a) and (b) – all use cases refer to Figure 1). Then, the map maker must start the wizard
(use case (c)) to beneﬁt from the cartographic functions. Once the wizard has started, the map maker validates
the layer selection (use case (d)), enters metadata about the map via drop-down menus (use case (e)). At this
the second
point,
preparatory step of the wizard re-orders the layer appropriately. Finally, the map maker validates or adapts the
layer order, if the speciﬁc layer combination is not ordered optimally to the map maker’s opinion (use case (f)).
These preparatory steps are based on a framework deﬁned in a previous work and rely on semantic annotations
attached to each layer (for details, see Panchaud et al., 2017).

the wizard applies the ﬁrst preparatory step, namely the content constraints. Then,

Content constraints

Geoportals and other map mashup platforms often allow the users, i.e. the map makers, to combine any data layer
with any other ones. Although this gives the users a greater freedom of exploration, it can lead to awkward
cartographic visualization as a combined map. Thus, in the ﬁrst preparatory step, a function analyses the layer
selection with the map parameters and informs the users of poor or unadvised combinations. It is based on a
careful evaluation of the data topics available on public and state geoportals and of the relation of the map
content to the map types.

Layer list
Layer combinations that are highly improbable raise warnings based on their respective categories and themes. For
instance, the selection of rivers without the presence of lakes will raise a warning. The layer categories and themes
give semantic information about each layer content. Layer categories provide a broad distinction, such as natural or
man-made elements, whereas the layer’s themes are more details, e.g. indicating whether a layer contains
transportation information or hydrological features.

THE CARTOGRAPHIC JOURNAL

5

Map types
So far, the framework oﬀers four map types: general-purpose map, physical map, political map, and thematic map.
We diﬀerentiate four relations between a layer and a map type: for a certain map type, the layer can be ‘a must’,
‘allowed’, ‘not allowed’, or ‘allowed but with warning’ regarding its potential inappropriateness. The matrix found
in Figure 2 details these four relations based on the map types and layer categories, with additional conditions
pertaining to the layer themes and categories. For instance, on a physical map, there must be at least one layer
of category ‘natural’ and theme ‘water’, as well as at least one natural layer with a theme diﬀerent than water; a
cultural layer is allowed if the theme is administration; and thematic layers are not allowed. A layer that is
already a map in itself (e.g. scanned topographic map) is diﬃcult to combine with other layers and thus raises a
warning.

Layer order

The second preparatory step deals with the re-ordering of the layers from the user-random order to an optimal
one. The rules are simple, but they show interesting aspects of the reasoning process behind cartographic
principles. A cartographer balances the general cartographic principles with the speciﬁcity of each map.
However, formalizing this ﬂexible reasoning process within a function is complex. Thus, when implementing
the function, this balancing translates into rule prioritization.

In the case of the drawing order of layers, the general rule requires to draw ﬁrst polygon geometries on the map,
then line geometries, and ﬁnally point geometries on top to ensure that all can be displayed properly. Additionally,
more speciﬁc rules depending on the type of maps and layer content can be derived from the body of
cartographic knowledge; for example, to deal with the drawing order of layers with the same geometry type. There
also exist exceptions and special cases. A typical example is the issue of rivers drawn as centreline through the
lakes (for modelling reasons) as seen in Figure 3. As long as both are represented with the same colour and the
lakes do not have a stroke for their contour (a), the order does not matter much. But as soon as a more complex
symbolization is used (b), issues of unwanted overlaps appear. It can be corrected by setting the rivers below the
lakes (c) and thus contradicting the general rule.

The function is split into two diﬀerent pipelines based on whether two layers have the same geometry type or not
(see Figure 4). In pipeline 1 (diﬀerent geometry types), the high-priority rules regarding the layer themes check
whether exceptions exist to the general geometry rules, which have a lower priority. In pipeline 2 (same
geometry type), high-priority rules determine which layer should be above which based on layer themes. If the
combination matches none of the high-priority rules, medium priority rules based on the layer categories are
applied. And if none of those can resolve the layer order, the initial order stays. With this structure, speciﬁc
cases are veriﬁed ﬁrst and are not run through lower priority rules. The priority of the rules depends on the
speciﬁcity of the rule. The more speciﬁc semantic content the rule has, the higher its priority (see Figure 5).

Figures 6 and 7 present two examples of layer reordering as implemented in the geoportal. At this point, the map
maker can validate or adapt the layer order (use case (f) in Figure 1). The ﬁrst one deals with a topographic-like
map mashup. Layers containing landcover and forest are moved to the bottom; the administrative borders are
above the rivers, but below other line elements; the water polygon layer (lakes) is above the rivers. The second
example has a thematic layer ‘Site of Community Importance’ supported by other layers for spatial context (see
Figure 7). The thematic and main layer of the map is on top, while the supportive layers are ordered optimally.

Smart cartographic functions and
symbology

rules,

consists

symbology
of
body

can be
knowledge
strict

Once the preparatory steps have been accomplished,
adapted. The
the original
cartographic
of
and of
principles, which are not
subjective aspects, which are left to the cartographers.
Thus replicating the decision-making process of a
cartographer with a set of functions requires not only
a precise and accurate understanding of the map
design process but also well-reasoned assumptions
and sensible default values. Only so, the functionality
can eﬃciently support the casual map maker. The
in a two-step
function described below works

Figure 2. Compatibility of layers with diﬀerent map types, according to
layer categories and themes.

6

N. H. PANCHAUD AND L. HURNI

Figure 3. Rivers, lake centrelines, and lakes, a question of layer order: (a) same stroke and ﬁll colour = no conﬂict, (b) and (c) diﬀerent stroke and ﬁll colours =
the layer order matters. Made with Natural Earth data.

manner. First, the layers are assigned to diﬀerent visual levels within the map; then, the symbolization of the
background layers is adapted to improve contrast with the foreground.

Visual hierarchy

The visual level of each layer is determined using information provided by the user and by the geoportal regarding
the map and the layers. Three diﬀerent visual levels are used: background, middle ground, and foreground. It allows

Figure 4. Pipelines for the drawing order of the layers.

THE CARTOGRAPHIC JOURNAL

7

Figure 5. The more speciﬁc semantic content is present in the rule, the higher is the rule priority.

Figure 6. Before (left) and after (right) reordering. The administrative borders are above the rivers, but below the other line layers; the water polygon layer
(lakes) is above the rivers.

Figure 7. Before (left) and after (right) reordering. The thematic layer is on top.

a ﬁner diﬀerentiation than using only background and foreground but does not render the function unnecessarily
complex. Information taken into account to assign layers to a visual level are the layer geometries, the layer themes
and categories, the map type and the main layers of the map.

In a ﬁrst round, a set of general rules assigns the main layers of the map to the foreground. Then, based on
assumptions, they assign the layers that have a high probability of being in the background, such as a satellite
image or a shaded relief. The rest of the layers are temporarily assigned to the middle ground. In the second
round, speciﬁc rules ﬁne-tune the position of the layers in the diﬀerent visual levels. For instance, all thematic
layers in a thematic map or the administrative boundaries in a political map are set in the foreground.

Because the function is built to assume the most probable solutions, it cannot anticipate all possible solutions
and thus, once all the layers have been assigned, the user still has the possibility to correct the visual level
assignment (use case (g) in Figure 1). Figure 8 shows in step (1) the integration of the use case in the wizard GUI.

Background symbolization

This section presents the three methods for background symbolization that are later analysed and assessed in the
survey to evaluate their suitability for background symbolization.

Greyscale
Geoportals, e.g. Géoportail and Map GeoAdmin,1 and map platforms, e.g. MapBox and Google,2 sometimes oﬀer a
greyscale version of the default symbolization. Even though this is a rudimentary approach, it does visually lessen
the importance of the layers. The RGB colour space model, which is used by screens, is used for this transformation.
Using the luminance channel for colour-to-greyscale transformations produces satisfactory results for most cases
in a fast and eﬃcient manner (Zemko and Sikudova, 2016). Several similar coeﬃcients (ITU-R, 2011; ITU-R, 2015;
World Wide Web Consortium (W3C), 2016) can be used to calculate the luminance from RGB depending on the
original colour space and the presence of gamma’s correction (Bradley, 2014). Because we are not encoding images
and video for transmission and the diﬀerences are negligible in our case, the simplest version (see Equation (1)) was

8

N. H. PANCHAUD AND L. HURNI

Figure 8. In step (1), the map maker can adapt the visual hierarchy (use case (g) from Figure 1); in step (2) pick a symbolization method for the background
(use case (h) from Figure 1).

used in this work in order to speed up the processing. Alternative methods could be the average or the full
desaturation of the RGB values (see Equations (2) and (3)). From the R, G, and B values we calculate a new g
value which is then used in the RGB triplet in order to create a grey tone using RGB(g,g,g).

The method ‘Luminance’ gives a slightly better result for background because the contrast between the diﬀerent
colours is softer than with the full desaturation method while better preserving distinction between the original
colours. Nevertheless, the three methods result in visually very similar images (see the red circles in Figure 9 for
some diﬀerences).

‘Luminance’

‘Average’

g = Y = R · 0.3 + G · 0.59 + B · 0.11
g = (R + G + B)
3
g = Max(R, G, B) + Min(R, G, B)
2

‘Full desaturation’

With R = red value; G = green value; B = blue value; Max(n) = maximal value among n; Min(n) = minimal value

among n; g = value for grey tone.

Desaturation and smart background
As background style transformation, we test also another approach based on the suggestion of Dent (1999) regarding
greater contrast between ﬁgure and ground information: because most standalone layers are styled as ﬁgure by
default, they require to be modiﬁed into a visually more subtle style to work as background. By increasing the
saturation contrast between layers, the ﬁgure–ground relation is better rendered (Bláha and Štěrba, 2014). To
decrease the saturation, one must translate the original RGB colour into another colour space, e.g. the HSV or the
Hue–Saturation–Lightness (HSL). We use the HSL model because a change in saturation in this model keeps the
lightness constant, whereas it is not the case for the HSV model. Then, the S value can be reduced accordingly,
here of a 0.4 factor (see Equation (4)).

‘Desaturation’

S′ = S · 0.4

However, only decreasing the saturation as done by Toomanian et al. (2012) is not enough. Increasing
luminance diﬀerences is another mean to diﬀerentiate foreground from background information (Stauﬀer et al.,
2015). Relative luminance, often only called luminance in the context of colour spaces, is deﬁned as the
photometric luminance values normalized to 1, or 100, for a reference white (ITU-R, 2015).

To modify the colours, we use the Lightness Chroma Hue (LCH) colour space so as to use the chroma and not
the saturation parameter. The LCH colour space is derived from the CIE Lab one. Even though often used
interchangeably, the terms saturation and chroma are slightly, but crucially diﬀerent in their deﬁnition.
Saturation is the ‘colourfulness of an area judged in proportion to its brightness’ (Commission Internationale
de L’Eclairage (CIE), 2011), whereas chroma is the ‘colourfulness of an area judged as a proportion of the
brightness of a similarly illuminated area that appears white or highly transmitting’ (Commission Internationale
de L’Eclairage (CIE), 2011). The (relative) luminance of vivid colours from the RGB, HSV and HSL spaces are

(1)

(2)

(3)

(4)

THE CARTOGRAPHIC JOURNAL

9

Figure 9. Comparison between the diﬀerent greyscale methods. Red circles point to diﬀerences. Data © OpenStreetMap Contributors.

highly discontinuous: a pure red or a pure green (saturation 100%) is not perceived with the same lightness. This
means that linear changes in saturation are not perceived as linear changes by the human eye; whereas the LCH
colour space is based on how the human perception works and change in chroma is perceived linearly by the
human eye in terms of lightness (Stauﬀer et al., 2015). Additionally, LCH is device independent (Cruse, 2016).
The more chroma we remove, the more the colours tend toward a greyscale. We can use other parameters such
as the luminance and lightness to further de-emphasize a colour scheme without removing too much chroma.

The function to reduce the visual prominence of layers in the background operates in three steps. First,
the luminance values of the diﬀerent colours of the layers are reduced to a smaller range toward higher value
(= toward white). This reduces the relative diﬀerences in brightness overall and thus there is less contrast within
the layer itself (see Equation (5)). Second, the colour lightness is increased to prevent colours from turning too
much toward a greyscale and from producing darker colours (see Equation (6)). Third, the chroma values are
slightly reduced to avoid too saturated colours that would attract too much attention (see Equation (7)).

The two ﬁrst steps aim at keeping the relative diﬀerence between colours, while reducing the absolute value
diﬀerences. The chroma reduction uses a power function, which can change according to other parameters of
the map and layer combinations, such as a transparency requirement. Moreover, a generally more saturated
colour scheme is altered more prominently.

Smart background function:

Step 1: Lum′ = maxLum − [pLum · (maxLum − Lum)]

Step 2: L′ = z · (maxL – [pL · (maxL − L)])

Step 3: C′ = y · (C pC)

(5)

(6)

(7)

With pLum = 0.6; pL = 0.6; pC = 0.7, which are the calibrating parameters; Lum′, L′, and C′ are the value for
luminance, lightness, and chroma for the new colour; Lum, L, and C are the value for luminance, lightness, and
chroma for the original colour; maxLum, maxL, and maxC are the maximal luminance, lightness, and chroma of
the original colour scheme; y and z are adjustment coeﬃcient in case of transparency.

The parameters result from a calibration process testing a range of values with two diﬀerent colour schemes, one
being already close to satisfying background conditions and another one consisting of saturated colours. The goal
of the calibration is to avoid grey colours (except for initial grey), to keep a large enough range of chroma or
saturation so that colour of similar hues could still be diﬀerentiated, and to prevent a feeling of greyish colour

10

N. H. PANCHAUD AND L. HURNI

Figure 10. Variation based on the diﬀerent parameters for a colour scheme belonging to a landuse layer. For each pair of colour scheme lines, the top line of
colours is the original colour scheme and the bottom line is the modiﬁed one.

scheme. First, we tested the function with colour scheme ‘lines’ (see Figure 10) and then moved to actual map
examples (see Figures 11 and 12).

For map examples, we use landuse or landcover background with hydrological features and roads. Depending
on the layer combination, an opacity parameter is integrated to the function; e.g. when there is a shaded relief
combined with a landuse layer or more generally when polygon layers and raster data are used together in a
map. Because adding opacity reduces the fullness of the colour, the reduction of chroma and lightness are
dependent on a coeﬃcient (see y and z in the Equations (6) and (7)). When the layer opacity is full, the
coeﬃcient is 1; when the layer needs some transparency, the coeﬃcient is reduced, leading to smaller variations
from the original colour.

Results and discussion

We compare the greyscale, the desaturation, and the smart background methods with the original maps and with
each other in two map examples. To this end, we not only analyse in details the resulting map visualizations, but we
also conduct the survey described in the Methodology section. The illustrations used for the analysis and the survey
can be found in Figures 13 and 14.

Analysis

Greyscale
The greyscale method renders the symbolization less prominent and it is practical because simple to implement, but it
has drawbacks. If there are too many colours (starting at seven or eight) in the original scheme, it becomes diﬃcult to
diﬀerentiate them on a greyscale. When the original colour scheme consists of light colours already, it can render the
diﬀerentiation between the resulting shades of grey even more diﬃcult. Furthermore, the same linear transformation
is applied, no matter of the characteristics of the original colour schemes: there is no subtlety in this method. Two
original colours diﬀering in perceived brightness can be transformed into the same grey with this method, which
is problematic for diﬀerentiation. True greyscale maps are speciﬁcally designed and not a mere transformation of
a coloured counterpart. Additionally, this method is not appropriate to combine with a relief because the shaded

Figure 11. Original (left) and modiﬁed (right) map background. Data © 2016 swisstopo (JD100042).

THE CARTOGRAPHIC JOURNAL

11

Figure 12. Original (left) and modiﬁed (right) map background. Data © OpenStreetMap Contributors.

greys of the relief cannot be distinguished from the greyscale of the background layer. Even with numerous
drawbacks, the greyscale method can be better than the original symbolization for certain map purpose because it
lessens the visual importance of the background layer and thus improves the ﬁgure–ground relation.

Desaturation
The desaturation method is straightforward in the sense that it reduces the saturation value in the HSL colour
space. Depending on the value of this coeﬃcient, the ﬁnal result comes closer to the greyscale or to the original
colour scheme. The coeﬃcient chosen is 0.4 and gives satisfactory results with original bright colour schemes.
The results with lighter original schemes (e.g. Map 1) are satisfactory as well if it originally had contrast
within its colour schemes. For both map examples, it is still possible to clearly diﬀerentiate the classes of the
initial colour schemes and it provides a better contrast with the foreground than original symbology.
However, combining the desaturation method with a relief background yields a greyish and darker map
background.

Figure 13. Map example 1. Data © OpenStreetMap Contributors.

12

N. H. PANCHAUD AND L. HURNI

Figure 14. Map example 2. Data © 2016 swisstopo (JD100042).

Smart background
The smart background method we develop here shows more promises. We tested and calibrated the method with
colour schemes showing diﬀerent characteristics: from already pastel tones to much darker and saturated colour
schemes. Compared to the greyscale alternative or a simple reduction of saturation (or chroma), the smart
background method as presented here shows several advantages.

First, the function keeps the colour information of the original schemes, although modiﬁed: there is a smaller
loss of information from the initial scheme. Second, the function uses diﬀerent parameters that take into account
the overall scheme and not each colour separately. The function reduces the contrast within the layer itself while
tuning down the intensity (i.e. chroma) of the colour scheme. Because of changes in luminance, the resulting colour
schemes are not as greyish as the one with the desaturation method and work better with a shaded relief in the
background. However, the method, as implemented so far, cannot anticipate strong simultaneous contrast
resulting from the transformation. Additionally, if a darker colour is present in the original scheme, it might
still oﬀer signiﬁcant contrast to the rest of the scheme. Finally, colour-blindness was not taken into account
while developing this approach. One common aspect to these three methods is that the symbology changes are
based on the colour scheme of the layer it is applied to and not yet in relation to the colour schemes of other
layers within the map mashups.

Survey results

The ﬁrst part of the survey asks to rank the three background styles according to how supportive the 21 participants
ﬁnd them for a speciﬁc scenario. The scenario is as follows:

Imagine you want to create a map for orientation purposes with the main topic being the roads. Imagine you wish to
provide this map to your friends for your birthday party (the location is not on the map examples, since it is not
important for this survey). As you are sending online invitations, you went to a geoportal to create this custom map.

Now the geoportal oﬀers three methods to transform the background information of the maps, so that the roads are
better highlighted.

Please tell us which one you would choose. You need to evaluate whether the background style helps render the map
more legible. For your purpose, this means that the new style helps better diﬀerentiate the roads from the
background, while still retaining information about the landscape.
For both Map 1 and Map 2, the method ‘Smart background’ is preferred, although the preference is stronger for
Map 2 (see Figure 15). Issues mentioned in the comments concern the lack of contrast for this method in Map 1

THE CARTOGRAPHIC JOURNAL

13

Figure 15. Rank the three background styles according to how supportive you ﬁnd them for the scenario (1 = most supportive, 3 = least supportive). Number
of respondents for each ranking and method (n = 21).

and the original style in Map 1 being already ‘easy to interpret’. The original style of Map 1 has light tones and thus
is already rather suitable for the background. Regarding Map 2, the ‘Smart’ method is never ranked third, the two
other methods being ranked similarly. The original colour scheme of the background is more saturated than in
Map 1 and it is combined with a relief, which might explain why the end result is better ranked in the survey.

In the second part, two statements comparing the original maps with one method at a time are evaluated. The
ﬁrst one asks whether the modiﬁed style retains information about the landscape in the background and the second
one whether the modiﬁed style helps better diﬀerentiate the roads from the background. Figure 16 shows the results
per statement and map, whereas Figure 17 aggregates the results per method.

In both Map 1 and Map 2 with the method ‘Greyscale’, the respondents disagree with the statement regarding
landscape information retainment: 57% , resp. 58% of negative opinion for Maps 1 and 2 (see Figure 17). However,
they agree that this method helps diﬀerentiate the roads from the background (96% for Map 1 and 100% for Map
2). Comments include the fact that if it is only for the road network, it is acceptable, but if the map users care about
the location as well, then too much information is lost.

For the method ‘Desaturation’, the respondents ﬁnd that the modiﬁed style of Map 1and Map 2 retain the
landscape information in the background (91 and 86% of combined agree and somewhat agree). They are
diverging opinion whether it helps with the roads diﬀerentiation in comparison to the previous method. Even
though the numbers are slightly positive, this method scores less than the greyscale method on the same
question. Some respondents mention the ‘unconventional’ or ‘disorienting’ colours that still interfere with the
roads layer, whereas some state that they like having colours in the background while still providing better contrast.
Finally, regarding the method ‘Smart’ developed in this work, both aspects of the modiﬁed styles receive positive
answers from the respondents. They agree that the modiﬁed colour schemes retain information at 86% in Map 1

Figure 16. Results for each map, per statement (in percentage of the respondents).

14

N. H. PANCHAUD AND L. HURNI

Figure 17. Results for each method per aspect and map (in percentage of the respondents).

and 96% in Map 2. Moreover, they agree that it helps distinguish the roads at 86% in Map 1 and 100% in Map 2. A
couple of respondents disagree with the roads diﬀerentiation aspect for Map 1: one reason stated is that roads
without outlines are more diﬃcult to diﬀerentiate from the background. In the comments, there are six
mentions of the roads being clearly visible or that this method is the best for the roads diﬀerentiation. A couple
of respondents mention that it is their favourite style. However, three comments mention that the style looks
‘washed out’,
‘dim’, and ‘weak’. Colour perception and personal preferences can vary among the end users,
which might explain diverging opinion. Another respondent suggests that a style in between the ‘Desaturation’
and ‘Smart’ would be best. The respondent did not know the name of the style or how they were generated.
This would indicate that the chroma parameter has been reduced too much in the ‘Smart’ method. Thus we
tested the parameter of the smart function a second time to generate a style that looks less washed out with
pastel colour schemes while still reducing strongly saturated colour schemes to a background type of style. We
modiﬁed the pL and pC parameters to 0.8 and respectively 0.6 instead of 0.6 and respectively 0.7 as originally
planned. The Map examples 1 and 2 have been re-generated with the new parameter values (see the resulting
maps in Figure 18).

Figure 19 shows the luminance curve of three colour schemes: Map example 1 (= OSM), Map example 2 (=
CH) and a colour scheme similar to the Corine Land Cover (CLC) Urban Atlas standard colours. The
luminance of each colour schemes has been calculated for the original scale, for the formula used in the
survey and for the modiﬁed post-survey formula. We can see that the new parameters lead to a less drastic
change in luminance.

In all three methods, the respondent noted that the yellow roads were not well distinguishable from the
background. The roads styles were designed to mimic the existing roads colour schemes of the original data, but
from the survey, it becomes clear that yellow roads with no clear outline are a less than an optimal design choice.

Conclusions and outlook

This work proposes a new approach that integrates cartographic principles to improve the symbolization of
background layers in map mashups in geoportals. We present a couple of preparatory steps and several
methods (two existing and one novel) to modify the symbolization of background layers. The method is

Figure 18. Post-survey map examples, Map example 1 (left) data © OpenStreetMap Contributors and Map example 2 (right) data © 2016 swisstopo
(JD100042).

THE CARTOGRAPHIC JOURNAL

15

Figure 19. Luminance changes from original, to survey version, to post-survey correction.

supported by preparatory steps that optimize the drawing order of the layers and constrain the map content.
Then we analyse the strengths and weaknesses of each method. The analysis is supported by an online survey
realized among professional and trained cartographers. The analysis and the survey show that it is possible to
improve background style in order to better support the main theme of a map mashup.

The new method developed in this work improves the map mashup in comparison with the original styles, even
though it works better for some combinations of layers than others. This functionality can be useful for geoportals
where diverse actors publish a large amount of spatial data without a central overview regarding colour scheme and
data combinations. Diﬀerent institutions can have diﬀerent standards for colour schemes and the smart
background method helps combining data from diﬀerent sources in legible map mashups.

Professional cartographers and the production of high-quality maps are not the targets of this functionality
and they will keep relying on complex decision-making processes, experience, and more intricate tools: it
does not mean that there should not also be simpler but nonetheless usable and useful tool for the casual
cartographer. There are still areas of improvement and possible evolution for the smart background method.
With original styles in light tones, the method seems to produce a background style that is too light or
washed out. A new calibration parameter for light tones has been provided after the survey. However, one
could also test whether to oﬀer the users to tweak the parameter themselves in a restricted range, for instance
via sliders so that they can compare themselves how the smart background style changes with the parameters.
Quite popular are also dark base maps and thus a future development of the functionality could be to
propose a similar transformation of original styles. Additionally, so far the styles modiﬁcation function only
takes into consideration the colour scheme of the background layer itself. In the future, statistics about the
lightness, saturation, and general hue of the main layers of the map could be integrated as parameters in the
transformation. This would allow to estimate the interplay between fore- and background layers and
eventually calibrate the function parameters.

Generally, providing cartographic functions and symbolization improvements that are based on cartographic
principles for map mashups on geoportals, encourages and supports the re-use of the data available. Indeed,
additional functions that allow for proper cartographic visualization (and not just a simple combination of
layers) can serve to attract users and can be used to promote geoportals among the general public as more
than an online storage for spatial data.

16

N. H. PANCHAUD AND L. HURNI

Notes

1. The Géoportail France from IGN (http://www.geoportail.gouv.fr, accessed on 28 July 2016) and the Map GeoAdmin

from swisstopo (https://map.geo.admin.ch, accessed on 28 July 2016).

2. Such as MapBox and its Mapbox Light style (https://www.mapbox.com/maps/light-dark/, accessed on 28 July 2016) and
the Google Map style from Snazzy Maps (https://snazzymaps.com/style/15/subtle-greyscale, accessed on 28 July 2016).

Notes on Contributor

Nadia H. Panchaud holds an MSc in Geomatics and Planning. She is a doctoral student at the
Institute of Cartography and Geoinformation (IKG) at the ETH Zurich, Switzerland. Her
current research interests cover web cartography, smart symbology, geoportal technologies,
and open data.

ORCID

Nadia H. Panchaud
Lorenz Hurni

http://orcid.org/0000-0002-5690-6827

http://orcid.org/0000-0002-0453-8743

References
Bielecka, E. and Dukaczewski, D. (2009) “Web Mapping Errors and Their Typology” In 24th International Cartographic

Conference Santiago, Chile: 15th to 21st November.

Bláha, J.D. and Štěrba, Z. (2014) “Colour Contrast in Cartographic Works using the Principles of Johannes Itten” The

Cartographic Journal 51 (3) pp.203–213.

Bradley, S. (2014) The Eﬀect of Luminance and Contrast Ratio on Accessibility Available at: http://vanseodesign.com/web-

design/luminance-contrast-ratio-accessibility/ (Accessed: 15th November 2016).

Brewer, C.A. and Harrower, M. (2013) ColorBrewer 2.0 Available at: http://colorbrewer2.org/ (Accessed: 10th October 2016).
Buard, E. and Ruas, A. (2007) “Evaluation of Colour Contrasts by Means of Expert Knowledge for On-Demand Mapping” In

23rd International Cartographic Conference Moscow, Russia: Aug 4–10.

Bucher, B., Buard, E., Jolivet, L. and Ruas, A. (2007) “The Need for Web Legend Services” In Ware, J.M. and Taylor, G.E. (Eds)

In Web and Wireless Geographical Information Systems Berlin, Heidelberg: Springer, pp.40–60.

Cartwright, W., Crampton, J., Gartner, G., Miller, S., Mitchell, K., Siekierska, E. and Wood, J. (2001) “Geospatial Information

Visualization User Interface Issues” Cartography and Geographic Information Science 28 (1) pp.45–60.

Commission Internationale de L’Eclairage (CIE) (2011) International Lighting Vocabulary. CIE S 017/E:2011 Available at:

http://eilv.cie.co.at/ (Accessed: 29th July 2016).

Cruse, P. (2016) Introduction to Colour Spaces Available at: http://www.colourphil.co.uk/lab_lch_colour_space.shtml

Dent, B.D. (1972) “Visual Organization and the Thematic Map Communication” Annals of the Association of the American

(Accessed: 29th July 2016).

Geographers 62 (1) pp.79–93.

Dent, B.D. (1999) Cartography: Thematic Map Design Boston: WCB McGraw Hill.
Ellis, W.D. (1955) A Source Book of Gestalt Psychology New York: Humanities Press.
Field, K., O’Brien, J. and Cartwright, W. (2011) “Exploring Cartographic Design in Social-Network Map Mashups” In 25th

International Cartographic Conference Paris, France: 3rd–8th July.

Harrie, L., Mustière, S. and Stigmar, H. (2011) “Cartographic Quality Issues for View Services in Geoportals” Cartographica:

The International Journal for Geographic Information and Geovisualization 46 (2) pp.92–100.

He, X., Persson, H. and Östman, A. (2012) “Geoportal Usability Evaluation” International Journal of Spatial Data

Infrastructures Research 7 pp.88–106.

Hoarau, C. (2011) “Reaching a Compromise Between Contextual Constraints and Cartographic Rules: Application to

Sustainable Maps” Cartography and Geographic Information Science 38 (2) pp.79–88.

Hoarau, C. and Christophe, S. (2015) “Color and Texture Interpolation between Orthoimagery and Vector Data” ISPRS Annals

of Photogrammetry, Remote Sensing and Spatial Information Sciences 1 pp.1507–1514.

Hu, Y., Janowicz, K., Prasad, S. and Gao, S. (2015) “Metadata Topic Harmonization and Semantic Search for Linked-Data-

Driven Geoportals: A Case Study using ArcGIS Online” Transactions in GIS 19 (3) pp.398–416.

Huang, H. and Gartner, G. (2012) “A Technical Survey on Decluttering of Icons in Online Map-Based Mashups” In Peterson,

M.P. (Ed.) Online Maps with APIs and Web Services Berlin, Heidelberg: Springer, pp.157–175.

Iosifescu, I., et al. (2013) “Advances in Web Service-Driven Cartography” In 6th International Cartographic Conference

Dresden, Germany: 25th–30th August.

ITU-R (2011) ITU-R Recommendation BT.601-7 Switzerland, Geneva: International Telecommunication Union.
ITU-R (2015) ITU-R Recommendation BT.709-6 Switzerland, Geneva: International Telecommunication Union.

THE CARTOGRAPHIC JOURNAL

17

Jenny, H., Neumann, A., Jenny, B. and Hurni, L. (2010) “A WYSIWYG Interface for User-Friendly Access to Geospatial Data

Collections” In Jobst, M. (Ed.) Preservation in Digital Cartography: Archiving Aspects Berlin, Heidelberg: Springer.

Kiik, A. (2015) “Cartographic Design of Thematic Polygons: A Comparison Using Eye-Movement Metrics Analysis” (Master

Thesis) Lund University.

Lafay, S., Braun, A., Chandler, D., Michaud, M., Ricaud, L. and Mustière, S. (2015) “Automatic Mapping and Innovative On-

Demand Mapping Services at IGN France” Cartography and Geographic Information Science 42 (1) pp.54–68.
MacEachren, A.M. (1995) How Maps Work: Representation, Visualization, and Design New York: Guilford Press.
MacEachren, A.M. and Mistrick, T.A. (1992) “The Role of Brightness Diﬀerences in Figure-Ground: Is Darker Figure?” The

Cartographic Journal 29 (2) pp.91–100.

Panchaud, N.H., Iosifescu Enescu, I. and Hurni, L. (2017) “Smart Cartographic Functionality for Improving Data Visualization
in Map Mashups” Cartographica: The International Journal for Geographic Information and Geovisualization 52 (2)
pp.194–211.

Robinson, A.H., Morrison, J.L., Muehrcke, P.C., Kimerling, A.J. and Guptill, S.C. (1995) Elements of Cartography New York,

Šavrič, B., Jenny, B. and Jenny, H. (2016) “Projection Wizard – an Online Map Projection Selection Tool” The Cartographic

Schnabel, O. (2007) Map Symbol Brewer. Available at: http://www.carto.net/schnabel/mapsymbolbrewer/ (Accessed: 15th

NY, USA: John Wiley & Sons, Inc.

Journal 53 (2) pp.177–185.

December 2016).

Sheesley, B. (2006) TypeBrewer. Available at: http://typebrewer.org/ (Accessed: 13th December 2016).
Slocum, T.A., McMaster, R.B., Kessler, F.C. and Howard, H.H. (2009) Thematic Cartography and Geovisualization Upper

Spiess, E. (1970a) “Base-Map Types for Thematic Maps” 6th United Nations Regional Cartographic Conference for Asia and the

Saddle River, NJ: Pearson Education, Inc.

Far East Teheran, Iran, 24th October–7th November.

Spiess, E. (1970b) “The Need for Eﬃcient Base Maps in Thematic Mapping” In 5th International Conference on Cartography

Stauﬀer, R., Mayr, G.J., Dabernig, M. and Zeileis, A. (2015) “Somewhere Over the Rainbow: How to Make Eﬀective use of

Colors in Meteorological Visualizations” Bulletin of the American Meteorological Society 96 (2) pp.203–216.

Toomanian, A., Harrie, L. and Olsson, P. (2012) “Automatic Symbolisation Methods for Geoportals” The Cartographic Journal

Stresa, Italy, May.

49 (2) pp.153–163.

Tsorlini, A., Hurni, L., Sieber, R., Gloor, T. and Klauser, H. (2015) “Generation of Thematic Maps with Wizards based on
Cartographic Principles. The Case Study of OCAD Thematic Mapper” 27th International Cartographic Conference Rio
de Janeiro, Brazil, 23rd–28th August.

World Wide Web Consortium (W3C) (2016) Techniques and Failures for Web Content Accessibility Guidelines 2.0. W3C

Working Group Note.

Zemko, M. and Sikudova, E. (2016) “Saliency Enhanced Decolorization” In Chmielewski, L.J., Datta, A., Kozera, R. and
Wojciechowski, K. (Eds) Computer Vision and Graphics. ICCVG 2016. Lecture Notes in Computer Science Cham:
Springer International Publishing, pp.184–193.

